!function(e){function t(t){for(var o,i,s=t[0],l=t[1],c=t[2],d=0,p=[];d<s.length;d++)i=s[d],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&p.push(a[i][0]),a[i]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(e[o]=l[o]);for(u&&u(t);p.length;)p.shift()();return r.push.apply(r,c||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],o=!0,s=1;s<n.length;s++){var l=n[s];0!==a[l]&&(o=!1)}o&&(r.splice(t--,1),e=i(i.s=n[0]))}return e}var o={},a={1:0},r=[];function i(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.e=function(e){var t=[],n=a[e];if(0!==n)if(n)t.push(n[2]);else{var o=new Promise((function(t,o){n=a[e]=[t,o]}));t.push(n[2]=o);var r,s=document.createElement("script");s.charset="utf-8",s.timeout=120,i.nc&&s.setAttribute("nonce",i.nc),s.src=function(e){return i.p+""+({}[e]||e)+".js"}(e);var l=new Error;r=function(t){s.onerror=s.onload=null,clearTimeout(c);var n=a[e];if(0!==n){if(n){var o=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+o+": "+r+")",l.name="ChunkLoadError",l.type=o,l.request=r,n[1](l)}a[e]=void 0}};var c=setTimeout((function(){r({type:"timeout",target:s})}),12e4);s.onerror=s.onload=r,document.head.appendChild(s)}return Promise.all(t)},i.m=e,i.c=o,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(n,o,function(t){return e[t]}.bind(null,o));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i.oe=function(e){throw e};var s=window.webpackJsonp=window.webpackJsonp||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var u=l;r.push([1504,0]),n()}({1032:function(e,t){},1034:function(e,t){},1044:function(e,t){},1046:function(e,t){},1072:function(e,t){},1073:function(e,t){},1096:function(e,t){},1199:function(e,t,n){var o={"./af":434,"./af.js":434,"./ar":435,"./ar-dz":436,"./ar-dz.js":436,"./ar-kw":437,"./ar-kw.js":437,"./ar-ly":438,"./ar-ly.js":438,"./ar-ma":439,"./ar-ma.js":439,"./ar-sa":440,"./ar-sa.js":440,"./ar-tn":441,"./ar-tn.js":441,"./ar.js":435,"./az":442,"./az.js":442,"./be":443,"./be.js":443,"./bg":444,"./bg.js":444,"./bm":445,"./bm.js":445,"./bn":446,"./bn.js":446,"./bo":447,"./bo.js":447,"./br":448,"./br.js":448,"./bs":449,"./bs.js":449,"./ca":450,"./ca.js":450,"./cs":451,"./cs.js":451,"./cv":452,"./cv.js":452,"./cy":453,"./cy.js":453,"./da":454,"./da.js":454,"./de":455,"./de-at":456,"./de-at.js":456,"./de-ch":457,"./de-ch.js":457,"./de.js":455,"./dv":458,"./dv.js":458,"./el":459,"./el.js":459,"./en-au":460,"./en-au.js":460,"./en-ca":461,"./en-ca.js":461,"./en-gb":462,"./en-gb.js":462,"./en-ie":463,"./en-ie.js":463,"./en-il":464,"./en-il.js":464,"./en-nz":465,"./en-nz.js":465,"./eo":466,"./eo.js":466,"./es":467,"./es-do":468,"./es-do.js":468,"./es-us":469,"./es-us.js":469,"./es.js":467,"./et":470,"./et.js":470,"./eu":471,"./eu.js":471,"./fa":472,"./fa.js":472,"./fi":473,"./fi.js":473,"./fo":474,"./fo.js":474,"./fr":475,"./fr-ca":476,"./fr-ca.js":476,"./fr-ch":477,"./fr-ch.js":477,"./fr.js":475,"./fy":478,"./fy.js":478,"./gd":479,"./gd.js":479,"./gl":480,"./gl.js":480,"./gom-latn":481,"./gom-latn.js":481,"./gu":482,"./gu.js":482,"./he":483,"./he.js":483,"./hi":484,"./hi.js":484,"./hr":485,"./hr.js":485,"./hu":486,"./hu.js":486,"./hy-am":487,"./hy-am.js":487,"./id":488,"./id.js":488,"./is":489,"./is.js":489,"./it":490,"./it.js":490,"./ja":491,"./ja.js":491,"./jv":492,"./jv.js":492,"./ka":493,"./ka.js":493,"./kk":494,"./kk.js":494,"./km":495,"./km.js":495,"./kn":496,"./kn.js":496,"./ko":497,"./ko.js":497,"./ky":498,"./ky.js":498,"./lb":499,"./lb.js":499,"./lo":500,"./lo.js":500,"./lt":501,"./lt.js":501,"./lv":502,"./lv.js":502,"./me":503,"./me.js":503,"./mi":504,"./mi.js":504,"./mk":505,"./mk.js":505,"./ml":506,"./ml.js":506,"./mr":507,"./mr.js":507,"./ms":508,"./ms-my":509,"./ms-my.js":509,"./ms.js":508,"./mt":510,"./mt.js":510,"./my":511,"./my.js":511,"./nb":512,"./nb.js":512,"./ne":513,"./ne.js":513,"./nl":514,"./nl-be":515,"./nl-be.js":515,"./nl.js":514,"./nn":516,"./nn.js":516,"./pa-in":517,"./pa-in.js":517,"./pl":518,"./pl.js":518,"./pt":519,"./pt-br":520,"./pt-br.js":520,"./pt.js":519,"./ro":521,"./ro.js":521,"./ru":522,"./ru.js":522,"./sd":523,"./sd.js":523,"./se":524,"./se.js":524,"./si":525,"./si.js":525,"./sk":526,"./sk.js":526,"./sl":527,"./sl.js":527,"./sq":528,"./sq.js":528,"./sr":529,"./sr-cyrl":530,"./sr-cyrl.js":530,"./sr.js":529,"./ss":531,"./ss.js":531,"./sv":532,"./sv.js":532,"./sw":533,"./sw.js":533,"./ta":534,"./ta.js":534,"./te":535,"./te.js":535,"./tet":536,"./tet.js":536,"./tg":537,"./tg.js":537,"./th":538,"./th.js":538,"./tl-ph":539,"./tl-ph.js":539,"./tlh":540,"./tlh.js":540,"./tr":541,"./tr.js":541,"./tzl":542,"./tzl.js":542,"./tzm":543,"./tzm-latn":544,"./tzm-latn.js":544,"./tzm.js":543,"./ug-cn":545,"./ug-cn.js":545,"./uk":546,"./uk.js":546,"./ur":547,"./ur.js":547,"./uz":548,"./uz-latn":549,"./uz-latn.js":549,"./uz.js":548,"./vi":550,"./vi.js":550,"./x-pseudo":551,"./x-pseudo.js":551,"./yo":552,"./yo.js":552,"./zh-cn":553,"./zh-cn.js":553,"./zh-hk":554,"./zh-hk.js":554,"./zh-tw":555,"./zh-tw.js":555};function a(e){var t=r(e);return n(t)}function r(e){if(!n.o(o,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return o[e]}a.keys=function(){return Object.keys(o)},a.resolve=r,e.exports=a,a.id=1199},1246:function(e,t){},1259:function(e,t){},1268:function(e,t){},1332:function(e,t,n){var o={"./af":618,"./af.js":618,"./ar":619,"./ar-dz":620,"./ar-dz.js":620,"./ar-kw":621,"./ar-kw.js":621,"./ar-ly":622,"./ar-ly.js":622,"./ar-ma":623,"./ar-ma.js":623,"./ar-sa":624,"./ar-sa.js":624,"./ar-tn":625,"./ar-tn.js":625,"./ar.js":619,"./az":626,"./az.js":626,"./be":627,"./be.js":627,"./bg":628,"./bg.js":628,"./bm":629,"./bm.js":629,"./bn":630,"./bn.js":630,"./bo":631,"./bo.js":631,"./br":632,"./br.js":632,"./bs":633,"./bs.js":633,"./ca":634,"./ca.js":634,"./cs":635,"./cs.js":635,"./cv":636,"./cv.js":636,"./cy":637,"./cy.js":637,"./da":638,"./da.js":638,"./de":639,"./de-at":640,"./de-at.js":640,"./de-ch":641,"./de-ch.js":641,"./de.js":639,"./dv":642,"./dv.js":642,"./el":643,"./el.js":643,"./en-au":644,"./en-au.js":644,"./en-ca":645,"./en-ca.js":645,"./en-gb":646,"./en-gb.js":646,"./en-ie":647,"./en-ie.js":647,"./en-il":648,"./en-il.js":648,"./en-in":649,"./en-in.js":649,"./en-nz":650,"./en-nz.js":650,"./en-sg":651,"./en-sg.js":651,"./eo":652,"./eo.js":652,"./es":653,"./es-do":654,"./es-do.js":654,"./es-us":655,"./es-us.js":655,"./es.js":653,"./et":656,"./et.js":656,"./eu":657,"./eu.js":657,"./fa":658,"./fa.js":658,"./fi":659,"./fi.js":659,"./fil":660,"./fil.js":660,"./fo":661,"./fo.js":661,"./fr":662,"./fr-ca":663,"./fr-ca.js":663,"./fr-ch":664,"./fr-ch.js":664,"./fr.js":662,"./fy":665,"./fy.js":665,"./ga":666,"./ga.js":666,"./gd":667,"./gd.js":667,"./gl":668,"./gl.js":668,"./gom-deva":669,"./gom-deva.js":669,"./gom-latn":670,"./gom-latn.js":670,"./gu":671,"./gu.js":671,"./he":672,"./he.js":672,"./hi":673,"./hi.js":673,"./hr":674,"./hr.js":674,"./hu":675,"./hu.js":675,"./hy-am":676,"./hy-am.js":676,"./id":677,"./id.js":677,"./is":678,"./is.js":678,"./it":679,"./it-ch":680,"./it-ch.js":680,"./it.js":679,"./ja":681,"./ja.js":681,"./jv":682,"./jv.js":682,"./ka":683,"./ka.js":683,"./kk":684,"./kk.js":684,"./km":685,"./km.js":685,"./kn":686,"./kn.js":686,"./ko":687,"./ko.js":687,"./ku":688,"./ku.js":688,"./ky":689,"./ky.js":689,"./lb":690,"./lb.js":690,"./lo":691,"./lo.js":691,"./lt":692,"./lt.js":692,"./lv":693,"./lv.js":693,"./me":694,"./me.js":694,"./mi":695,"./mi.js":695,"./mk":696,"./mk.js":696,"./ml":697,"./ml.js":697,"./mn":698,"./mn.js":698,"./mr":699,"./mr.js":699,"./ms":700,"./ms-my":701,"./ms-my.js":701,"./ms.js":700,"./mt":702,"./mt.js":702,"./my":703,"./my.js":703,"./nb":704,"./nb.js":704,"./ne":705,"./ne.js":705,"./nl":706,"./nl-be":707,"./nl-be.js":707,"./nl.js":706,"./nn":708,"./nn.js":708,"./oc-lnc":709,"./oc-lnc.js":709,"./pa-in":710,"./pa-in.js":710,"./pl":711,"./pl.js":711,"./pt":712,"./pt-br":713,"./pt-br.js":713,"./pt.js":712,"./ro":714,"./ro.js":714,"./ru":715,"./ru.js":715,"./sd":716,"./sd.js":716,"./se":717,"./se.js":717,"./si":718,"./si.js":718,"./sk":719,"./sk.js":719,"./sl":720,"./sl.js":720,"./sq":721,"./sq.js":721,"./sr":722,"./sr-cyrl":723,"./sr-cyrl.js":723,"./sr.js":722,"./ss":724,"./ss.js":724,"./sv":725,"./sv.js":725,"./sw":726,"./sw.js":726,"./ta":727,"./ta.js":727,"./te":728,"./te.js":728,"./tet":729,"./tet.js":729,"./tg":730,"./tg.js":730,"./th":731,"./th.js":731,"./tk":732,"./tk.js":732,"./tl-ph":733,"./tl-ph.js":733,"./tlh":734,"./tlh.js":734,"./tr":735,"./tr.js":735,"./tzl":736,"./tzl.js":736,"./tzm":737,"./tzm-latn":738,"./tzm-latn.js":738,"./tzm.js":737,"./ug-cn":739,"./ug-cn.js":739,"./uk":740,"./uk.js":740,"./ur":741,"./ur.js":741,"./uz":742,"./uz-latn":743,"./uz-latn.js":743,"./uz.js":742,"./vi":744,"./vi.js":744,"./x-pseudo":745,"./x-pseudo.js":745,"./yo":746,"./yo.js":746,"./zh-cn":747,"./zh-cn.js":747,"./zh-hk":748,"./zh-hk.js":748,"./zh-mo":749,"./zh-mo.js":749,"./zh-tw":750,"./zh-tw.js":750};function a(e){var t=r(e);return n(t)}function r(e){if(!n.o(o,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return o[e]}a.keys=function(){return Object.keys(o)},a.resolve=r,e.exports=a,a.id=1332},1382:function(e,t,n){},1483:function(e,t,n){},1496:function(e,t,n){},1497:function(e,t,n){"use strict";n.r(t),n.d(t,"startNew",(function(){return s})),n.d(t,"reconnect",(function(){return l}));var o=n(21),a=n(180)("startSessionService"),r="";r=location.host.indexOf("tianchi.aliyun.com")>-1?"wss":"ws";var i=window.CONFIG.prefix||"",s=function(e){var t=o.ServerConnection.makeSettings({baseUrl:"".concat(i,"/proxy/kernel"),wsUrl:"".concat(r,"://").concat(location.host).concat(i,"/proxy/kernel"),init:{cache:"no-store",credentials:"same-origin",headers:Object.assign({"Content-Type":"application/json"},window.ajaxHeader)}}),n=new o.SessionManager({serverSettings:t});return new Promise((function(t,o){a("sessionMng",n,e),n.startNew({name:e.path,type:"notebook",kernelName:"python"===e.type?"python3":"ir",path:e.path,username:window.CONFIG.userId}).then((function(e){a("session",e),e.kernel._username=window.CONFIG.userId,t({session:e,sessionMng:n})})).catch((function(t){a("startNew error",t),e.errHandler(n,t)}))}))},l=function(){}},1498:function(e,t,n){"use strict";t.encodeHtml=function(e){return String(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"'").replace(/</g,"&lt;").replace(/>/g,"&gt;")},t.decodeHtml=function(e){return String(e).replace("&amp;","&").replace("&quot;",'"').replace(/'/g,"'").replace("&lt;","<").replace("&gt;",">")}},1499:function(e,t,n){},1500:function(e,t,n){"use strict";var o=window.CONFIG.prefix;e.exports={timeStamp:{url:o+"/proxy/kernel/time/stamp",method:"GET",param:{}},releaseVersion:{url:o+"/api/content/version",method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},param:{}},saveContent:{url:o+"/api/content",method:"PUT",headers:{"Content-Type":"application/json; charset=utf-8"},param:{}},getContent:{url:o+"/api/content",method:"GET"},getDefaultNotebook:{url:o+"/api/defaultcontent",method:"GET"},cleanData:{url:o+"/proxy/kernel/time/stamp",method:"GET"},listRaceByUserId:{url:o+"/proxy/competition/api/race/listRaceByUserId",method:"GET"},havePrivateData:{url:o+"/proxy/tianchi/notebook/isHavePrivateData",method:"GET"},uploadFileForNotebook:{url:o+"/proxy/competition/api/race/user/file/uploadFileForNotebook",method:"GET"},notebookLog:{url:o+"/proxy/tianchi/notebookActionLog/userActionLog",method:"post"}}},1501:function(e,t,n){"use strict";var o=window.CONFIG.prefix;e.exports={getCompetitionList:{url:"".concat(o,"/proxy/competition/api/race/listAllRaceName"),method:"GET"},getDetail:{url:"".concat(o,"/proxy/tianchi/api/notebook/getLabDetail"),method:"GET",param:{}},getRaceId:{url:"".concat(o,"/proxy/tianchi/api/notebook/getPost"),method:"GET",param:{}},saveOther:{url:"".concat(o,"/proxy/tianchi/api/notebook/addLabBook"),method:"POST",headers:{"Content-Type":"application/json"},param:{}},saveRaceId:{url:"".concat(o,"/proxy/tianchi/api/notebook/bindRace"),method:"PUT",headers:{"Content-Type":"application/json"},param:{}},getGpu:{url:"".concat(o,"/notebook/gpu/getGpu"),method:"GET"},openGpu:{url:"".concat(o,"/notebook/gpu/openGpu"),method:"POST"},vipGetGpu:{url:"".concat(o,"/notebook/gpu/vipGetGpu"),method:"GET"},vipOpenGpu:{url:"".concat(o,"/notebook/gpu/vipOpenGpu"),method:"POST"},vipCloseGpu:{url:"".concat(o,"/notebook/gpu/vipCloseGpu"),method:"POST"},vipCheckCurrentVip:{url:"".concat(o,"/notebook/gpu/vipCheckCurrentVip"),method:"POST"},closeGpu:{url:"".concat(o,"/notebook/gpu/closeGpu"),method:"POST"},versionGetData:{url:"".concat(o,"/proxy/tianchi/notebook/versionGetData"),method:"GET",headers:{},param:{}},relieveData:{url:"".concat(o,"/proxy/tianchi/notebook/RelieveData"),method:"POST",headers:{"Content-Type":"application/json"},param:{}},getDataList:{url:"".concat(o,"/proxy/tianchi/notebook/DataList"),method:"GET",headers:{},param:{}},relationData:{url:"".concat(o,"/proxy/tianchi/notebook/RelationData"),method:"POST",headers:{"Content-Type":"application/json"},param:{}},getUserInfo:{url:"/home/getUserInfo",method:"GET",param:{}}}},1502:function(e,t,n){"use strict";var o=window.CONFIG.prefix;e.exports={saveContent:{url:o+"/proxy/filemanager/api/contents/:path(.*)",method:"put"},postFileToOss:{url:o+"/proxy/filemanager/api/copyFileToOss",method:"post"},getImages:{url:o+"/proxy/filemanager/api/getImages",method:"get"}}},1504:function(e,t,n){"use strict";n.r(t);n(825);var o=n(0),a=n.n(o),r=n(14),i=n(1618),s=n(1619),l=n(1614),c=n(49),u=n.n(c);n(832);function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=g(e);if(t){var a=g(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return b(this,n)}}function b(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(i,e);var t,n,o,r=h(i);function i(){return p(this,i),r.apply(this,arguments)}return t=i,(n=[{key:"render",value:function(){return a.a.createElement("div",{className:"notebook-wrapper"},this.props.children)}}])&&m(t.prototype,n),o&&m(t,o),i}(a.a.Component),v=(n(833),n(368),n(369),n(147)),k=n(16),C=n(21),w=n(12),S=n(322),j=n(7),O=n(15);function E(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function I(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var N=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};E(this,e),this._isDisposed=!1,this._models=[],this._sessions=new Set,this._specs=null,this._modelsTimer=-1,this._specsTimer=-1,this._specsChanged=new w.Signal(this),this._runningChanged=new w.Signal(this),this.serverSettings=n.serverSettings||C.ServerConnection.makeSettings(),this._model=n.model,n.readOnly||!1===this._model.unwrap("status")?this._readyPromise=Promise.resolve():(this._readyPromise=this._refreshSpecs().then((function(){return t._refreshRunning()})).catch((function(e){})),this.refresh())}var t,n,o;return t=e,(n=[{key:"refresh",value:function(){var e=this;clearInterval(this._modelsTimer),clearInterval(this._specsTimer),this._modelsTimer=setInterval((function(){"dead"!==e._model.unwrap("status")?"undefined"!=typeof document&&document.hidden||e._refreshRunning():clearInterval(e._modelsTimer)}),1e4),this._specsTimer=setInterval((function(){"dead"!==e._model.unwrap("status")?"undefined"!=typeof document&&document.hidden||e._refreshSpecs():clearInterval(e._specsTimer)}),61e3)}},{key:"dispose",value:function(){this.isDisposed||(this._isDisposed=!0,clearInterval(this._modelsTimer),clearInterval(this._specsTimer),w.Signal.clearData(this),this._models.length=0)}},{key:"running",value:function(){return Object(j.iter)(this._models)}},{key:"refreshSpecs",value:function(){return this._refreshSpecs()}},{key:"refreshRunning",value:function(){return this._refreshRunning()}},{key:"startNew",value:function(e){var t=this,n=this.serverSettings;return C.Session.startNew(Object.assign(Object.assign({},e),{serverSettings:n})).then((function(e){return t._onStarted(e),e}))}},{key:"stopIfNeeded",value:function(e){var t=this;return C.Session.listRunning(this.serverSettings).then((function(n){var o=n.filter((function(t){return t.path===e}));if(1===o.length){var a=o[0].id;return t.shutdown(a).catch((function(){}))}})).catch((function(){return Promise.resolve(void 0)}))}},{key:"findById",value:function(e){return C.Session.findById(e,this.serverSettings)}},{key:"findByPath",value:function(e){return C.Session.findByPath(e,this.serverSettings)}},{key:"connectTo",value:function(e){var t=C.Session.connectTo(e,this.serverSettings);return this._onStarted(t),t}},{key:"shutdown",value:function(e){var t=this,n=j.ArrayExt.findFirstIndex(this._models,(function(t){return t.id===e}));return-1===n?Promise.resolve():(this._models.splice(n,1),this._runningChanged.emit(this._models.slice()),C.Session.shutdown(e,this.serverSettings).then((function(){var n=[];t._sessions.forEach((function(t){t.id===e&&(t.dispose(),n.push(t))})),n.forEach((function(e){t._sessions.delete(e)}))})))}},{key:"shutdownAll",value:function(){var e=this,t=this._models;return t.length>0&&(this._models=[],this._runningChanged.emit([])),this._refreshRunning().then((function(){return Promise.all(t.map((function(t){return C.Session.shutdown(t.id,e.serverSettings).then((function(){var t=[];e._sessions.forEach((function(e){e.dispose(),t.push(e)})),t.forEach((function(t){e._sessions.delete(t)}))}))}))).then((function(){}))}))}},{key:"_onTerminated",value:function(e){var t=j.ArrayExt.findFirstIndex(this._models,(function(t){return t.id===e}));-1!==t&&(this._models.splice(t,1),this._runningChanged.emit(this._models.slice()))}},{key:"_onStarted",value:function(e){var t=this,n=e.id,o=j.ArrayExt.findFirstIndex(this._models,(function(e){return e.id===n}));this._sessions.add(e),-1===o&&(this._models.push(e.model),this._runningChanged.emit(this._models.slice())),e.terminated.connect((function(e){t._onTerminated(n)})),e.propertyChanged.connect((function(n,o){t._onChanged(e.model)})),e.kernelChanged.connect((function(){t._onChanged(e.model)})),this.refresh()}},{key:"_onChanged",value:function(e){var t=j.ArrayExt.findFirstIndex(this._models,(function(t){return t.id===e.id}));-1!==t&&(this._models[t]=e,this._runningChanged.emit(this._models.slice()))}},{key:"_refreshSpecs",value:function(){var e=this;return C.Kernel.getSpecs(this.serverSettings).then((function(t){O.JSONExt.deepEqual(t,e._specs)||(e._specs=t,e._specsChanged.emit(t))})).catch((function(e){var t=e&&e.response&&e.response.status;/^\/mas-notebook\/preview/.test(location.pathname)||"/notebook-ai/home"==location.pathname||423==t||t>=400&&t<500&&window.parent.postMessage({refresh:!0},"*")}))}},{key:"_refreshRunning",value:function(){var e=this;return this._model.unwrap("status")&&"dead"!=this._model.unwrap("status")||this._model.setMany({status:"starting",kernelStatus:"starting"}),C.Session.listRunning(this.serverSettings).then((function(t){if(!O.JSONExt.deepEqual(t,e._models)){var n=t.map((function(e){return e.id})),o=[];e._sessions.forEach((function(e){-1===n.indexOf(e.id)&&(e.dispose(),o.push(e))})),o.forEach((function(t){e._sessions.delete(t)})),e._models=t.slice(),e._runningChanged.emit(t)}"inthequeue"==e._model.unwrap("status")&&e._model.set("status","starting")})).catch((function(t){var n=t&&t.response&&t.response.status;423==n?e._model.set("status","inthequeue"):n>=400&&n<500&&window.parent.postMessage({refresh:!0},"*")}))}},{key:"specsChanged",get:function(){return this._specsChanged}},{key:"runningChanged",get:function(){return this._runningChanged}},{key:"isDisposed",get:function(){return this._isDisposed}},{key:"specs",get:function(){return this._specs}},{key:"isReady",get:function(){return null!==this._specs}},{key:"ready",get:function(){return this._readyPromise}}])&&I(t.prototype,n),o&&I(t,o),e}();function x(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function T(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var _=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};x(this,e),this._isDisposed=!1,this._specsChanged=new w.Signal(this),this._isReady=!1,this.serverSettings=n.serverSettings||C.ServerConnection.makeSettings(),this.contents=new C.ContentsManager(n),this.sessions=new N(n),this.settings=new C.SettingManager(n),this.terminals=new C.TerminalManager(n),this.builder=new S.BuildManager(n),this.workspaces=new C.WorkspaceManager(n),this.nbconvert=new C.NbConvertManager(n),this.sessions.specsChanged.connect((function(e,n){t._specsChanged.emit(n)})),this._readyPromise=this.sessions.ready.then((function(){if(t.terminals.isAvailable())return t.terminals.ready})),this._readyPromise.then((function(){t._isReady=!0}))}var t,n,o;return t=e,(n=[{key:"dispose",value:function(){this.isDisposed||(this._isDisposed=!0,w.Signal.clearData(this),this.contents.dispose(),this.sessions.dispose(),this.terminals.dispose())}},{key:"specsChanged",get:function(){return this._specsChanged}},{key:"isDisposed",get:function(){return this._isDisposed}},{key:"specs",get:function(){return this.sessions.specs}},{key:"isReady",get:function(){return this._isReady}},{key:"ready",get:function(){return this._readyPromise}}])&&T(t.prototype,n),o&&T(t,o),e}(),P=n(10),D=n(178),A=n(79),R=n(121),G=n(89),L=n(78),M=n(787),F=n(32),B=n(219),U=n(25),V=n(100),K=n(53);function z(e){return(z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function H(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function W(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function q(e,t,n){return t&&W(e.prototype,t),n&&W(e,n),e}function J(e,t,n){return(J="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ee(e)););return e}(e,t);if(o){var a=Object.getOwnPropertyDescriptor(o,t);return a.get?a.get.call(n):a.value}})(e,t,n||e)}function Y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&X(e,t)}function X(e,t){return(X=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=ee(e);if(t){var a=ee(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return $(this,n)}}function $(e,t){return!t||"object"!==z(t)&&"function"!=typeof t?Q(e):t}function Q(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ee(e){return(ee=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var te,ne,oe,ae=function(e){Y(n,e);var t=Z(n);function n(e){var o;H(this,n),(o=t.call(this))._readOnly=!1,o._model=null,o._inputHidden=!1,o._input=null,o._inputWrapper=null,o._inputPlaceholder=null,o.addClass("jp-Cell");var a=o._model=e.model,r=o.contentFactory=e.contentFactory||te.defaultContentFactory;o.layout=new k.PanelLayout;var i=r.createCellHeader();i.addClass("jp-Cell-header"),o.layout.addWidget(i);var s=o._inputWrapper=new k.Panel;s.addClass("jp-Cell-inputWrapper");var l=new K.InputCollapser;l.addClass("jp-Cell-inputCollapser");var c=o._input=new K.InputArea({model:a,contentFactory:r});c.addClass("jp-Cell-inputArea"),s.addWidget(l),s.addWidget(c),o.layout.addWidget(s),o._inputPlaceholder=new K.InputPlaceholder((function(){o.inputHidden=!o.inputHidden}));var u=o.contentFactory.createCellFooter();return u.addClass("jp-Cell-footer"),o.layout.addWidget(u),e.editorConfig&&Object.keys(e.editorConfig).forEach((function(t){o.editor.setOption(t,e.editorConfig[t])})),o}return q(n,[{key:"initializeState",value:function(){var e=this.model.metadata.get("jupyter")||{};this.inputHidden=!0===e.source_hidden,this._readOnly=!1===this.model.metadata.get("editable")}},{key:"setPrompt",value:function(e){this._input.setPrompt(e)}},{key:"handleInputHidden",value:function(e){}},{key:"clone",value:function(){return new(0,this.constructor)({model:this.model,contentFactory:this.contentFactory})}},{key:"dispose",value:function(){this.isDisposed||(this._input=null,this._model=null,this._inputWrapper=null,this._inputPlaceholder=null,J(ee(n.prototype),"dispose",this).call(this))}},{key:"onAfterAttach",value:function(e){this.update()}},{key:"onActivateRequest",value:function(e){this.editor.focus()}},{key:"onUpdateRequest",value:function(e){this._model&&this.editor.getOption("readOnly")!==this._readOnly&&(this.editor.setOption("readOnly",this._readOnly),this.toggleClass("jp-mod-readOnly",this._readOnly))}},{key:"promptNode",get:function(){return this._inputHidden?this._inputPlaceholder.node.firstElementChild:this._input.promptNode}},{key:"editorWidget",get:function(){return this._input.editorWidget}},{key:"editor",get:function(){return this._input.editor}},{key:"model",get:function(){return this._model}},{key:"inputArea",get:function(){return this._input}},{key:"readOnly",get:function(){return this._readOnly},set:function(e){e!==this._readOnly&&(this._readOnly=e,this.update())}},{key:"ready",get:function(){return Promise.resolve(void 0)}},{key:"inputHidden",get:function(){return this._inputHidden},set:function(e){if(this._inputHidden!==e){var t=this._inputWrapper.layout;e?(this._input.parent=null,t.addWidget(this._inputPlaceholder)):(this._inputPlaceholder.parent=null,t.addWidget(this._input)),this._inputHidden=e,this.handleInputHidden(e)}}}]),n}(k.Widget);ne=te||(te={}),oe=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};H(this,e),this._editorFactory=null,this._editorFactory=t.editorFactory||K.InputArea.defaultEditorFactory}return q(e,[{key:"createCellHeader",value:function(){return new K.CellHeader}},{key:"createCellFooter",value:function(){return new K.CellFooter}},{key:"createInputPrompt",value:function(){return new K.InputPrompt}},{key:"createOutputPrompt",value:function(){return new V.OutputPrompt}},{key:"createStdin",value:function(e){return new V.Stdin(e)}},{key:"editorFactory",get:function(){return this._editorFactory}}]),e}(),ne.ContentFactory=oe,ne.defaultContentFactory=new oe;var re=function(e){Y(n,e);var t=Z(n);function n(e){var o;H(this,n),(o=t.call(this,e))._rendermime=null,o._outputHidden=!1,o._outputWrapper=null,o._outputPlaceholder=null,o._output=null,o.addClass("jp-CodeCell");var a=o._rendermime=e.rendermime,r=o.contentFactory,i=o.model,s=o._outputWrapper=new k.Panel;s.addClass("jp-Cell-outputWrapper");var l=new K.OutputCollapser;l.addClass("jp-Cell-outputCollapser");var c=o._output=new ue({model:i.outputs,rendermime:a,contentFactory:r});return c.addClass("jp-Cell-outputArea"),0===i.outputs.length&&o.addClass("jp-mod-noOutputs"),c.outputLengthChanged.connect(o._outputLengthHandler,Q(o)),s.addWidget(l),s.addWidget(c),o.layout.insertWidget(2,s),o._outputPlaceholder=new K.OutputPlaceholder((function(){o.outputHidden=!o.outputHidden})),o.initializeState(),i.stateChanged.connect(o.onStateChanged,Q(o)),i.metadata.changed.connect(o.onMetadataChanged,Q(o)),o}return q(n,[{key:"initializeState",value:function(){J(ee(n.prototype),"initializeState",this).call(this);var e=this.model.metadata.get("scrolled");this.outputsScrolled=!0===e;var t=this.model.metadata.get("jupyter")||{},o=this.model.metadata.get("collapsed");this.outputHidden=!0===o||!0===t.outputs_hidden,this.setPrompt("".concat(this.model.executionCount||""))}},{key:"handleInputHidden",value:function(e){!e&&this._outputWrapper.isHidden?this._outputWrapper.show():e&&!this._outputWrapper.isHidden&&this._outputHidden&&this._outputWrapper.hide()}},{key:"clone",value:function(){return new(0,this.constructor)({model:this.model,contentFactory:this.contentFactory,rendermime:this._rendermime})}},{key:"cloneOutputArea",value:function(){return new V.SimplifiedOutputArea({model:this.model.outputs,contentFactory:this.contentFactory,rendermime:this._rendermime})}},{key:"dispose",value:function(){this.isDisposed||(this._output.outputLengthChanged.disconnect(this._outputLengthHandler,this),this._rendermime=null,this._output=null,this._outputWrapper=null,this._outputPlaceholder=null,J(ee(n.prototype),"dispose",this).call(this))}},{key:"onUpdateRequest",value:function(e){var t=this.model.metadata.get("collapsed");this.toggleClass("jp-mod-collapsed",t),this._output,J(ee(n.prototype),"onUpdateRequest",this).call(this,e)}},{key:"onStateChanged",value:function(e,t){switch(t.name){case"executionCount":this.setPrompt("".concat(e.executionCount||""))}}},{key:"onMetadataChanged",value:function(e,t){switch(t.key){case"collapsed":case"scrolled":this.update();break;case"editable":this.readOnly=!t.newValue}}},{key:"_outputLengthHandler",value:function(e,t){var n=0===t;this.toggleClass("jp-mod-noOutputs",n),n&&(this.outputsScrolled=!1)}},{key:"outputArea",get:function(){return this._output}},{key:"outputHidden",get:function(){return this._outputHidden},set:function(e){if(this._outputHidden!==e){var t=this._outputWrapper.layout;e?(t.removeWidget(this._output),t.addWidget(this._outputPlaceholder),this.inputHidden&&!this._outputWrapper.isHidden&&this._outputWrapper.hide()):(this._outputWrapper.isHidden&&this._outputWrapper.show(),t.removeWidget(this._outputPlaceholder),t.addWidget(this._output)),this._outputHidden=e}}},{key:"outputsScrolled",get:function(){return this._outputsScrolled},set:function(e){this.toggleClass("jp-mod-outputsScrolled",e),this._outputsScrolled=e}}]),n}(ae);(re||(re={})).execute=function(e,t,n){var o=e.model,a=o.value.text;if(!a.trim()||!t.kernel)return o.executionCount=null,o.outputs.clear(),Promise.resolve(void 0);var r={cellId:o.id};return n=Object.assign(Object.assign({},n),r),o.executionCount=null,e.outputHidden=!1,e.setPrompt("*"),o.trusted=!0,V.OutputArea.execute(a,e.outputArea,t,n).then((function(e){return o.executionCount=e.content.execution_count,e})).catch((function(t){throw"Canceled"===t.message&&e.setPrompt(""),t}))};var ie,se,le,ce=function(e){Y(n,e);var t=Z(n);function n(e){var o,a;return H(this,n),(a=t.call(this,e))._monitor=null,a._renderer=null,a._rendered=!0,a._prevText="",a._ready=new O.PromiseDelegate,a.addClass("jp-MarkdownCell"),a._rendermime=e.rendermime.clone({resolver:new B.AttachmentsResolver({parent:e.rendermime.resolver,model:a.model.attachments})}),a._monitor=new U.ActivityMonitor({signal:a.model.contentChanged,timeout:1e3}),a._monitor.activityStopped.connect((function(){a._rendered&&a.update()}),Q(a)),a._updateRenderedInput().then((function(){a._ready.resolve(void 0)})),J((o=Q(a),ee(n.prototype)),"initializeState",o).call(o),a}return q(n,[{key:"renderInput",value:function(e){this.addClass("jp-mod-rendered"),this.inputArea.renderInput(e)}},{key:"showEditor",value:function(){this.removeClass("jp-mod-rendered"),this.inputArea.showEditor()}},{key:"onUpdateRequest",value:function(e){this._handleRendered(),J(ee(n.prototype),"onUpdateRequest",this).call(this,e)}},{key:"_handleRendered",value:function(){this._rendered?(this._updateRenderedInput(),this.renderInput(this._renderer)):this.showEditor()}},{key:"_updateRenderedInput",value:function(){var e=this.model,t=e&&e.value.text||"Type Markdown and LaTeX: $ α^2 $";if(t!==this._prevText){var n=new L.MimeModel({data:{"text/markdown":t}});return this._renderer||(this._renderer=this._rendermime.createRenderer("text/markdown"),this._renderer.addClass("jp-MarkdownOutput")),this._prevText=t,this._renderer.renderModel(n)}return Promise.resolve(void 0)}},{key:"clone",value:function(){return new(0,this.constructor)({model:this.model,contentFactory:this.contentFactory,rendermime:this._rendermime})}},{key:"ready",get:function(){return this._ready.promise}},{key:"rendered",get:function(){return this._rendered},set:function(e){e!==this._rendered&&(this._rendered=e,this._handleRendered())}}]),n}(ae),ue=function(e){Y(n,e);var t=Z(n);function n(e){var o;return H(this,n),(o=t.call(this,e)).model.trusted=!1,o}return q(n,[{key:"onModelChanged",value:function(e,t){t.newValues[0]&&(t.newValues[0].trusted=!1),J(ee(n.prototype),"onModelChanged",this).call(this,e,t)}},{key:"onStateChanged",value:function(e){for(var t=0;t<this.model.length;t++)this.model.get(t).trusted=!1;J(ee(n.prototype),"onStateChanged",this).call(this,e)}},{key:"createRenderedMimetype",value:function(e){var t;e.trusted=!1;var n=this.rendermime.preferredMimeType(e.data,e.trusted?"any":"ensure");if(n){var o=e.metadata,a=o[n],r=!1;r=a&&void 0!==a.isolated?a.isolated:o.isolated;var i=this.rendermime.createRenderer(n);!0===r&&(i=new ie.IsolatedRenderer(i)),i.renderModel(e).catch((function(e){i.node.innerHTML="<pre>Javascript Error: ".concat(e.message,"</pre>"),i.node.className="p-Widget jp-RenderedText",i.node.setAttribute("data-mime-type","application/vnd.jupyter.stderr")})),t=i}else(t=new k.Widget).node.innerHTML="No ".concat(e.trusted?"":"(safe) ","renderer could be ")+"found for output. It has the following MIME types: "+Object.keys(e.data).join(", ");return t}}]),n}(V.OutputArea);se=ie||(ie={}),le=function(e){Y(n,e);var t=Z(n);function n(e){var o;H(this,n),(o=t.call(this,{node:document.createElement("iframe")})).addClass("jp-mod-isolated"),o._wrapped=e;var a=o.node;return a.frameBorder="0",a.scrolling="auto",a.addEventListener("load",(function(){a.contentDocument.open(),a.contentDocument.write(o._wrapped.node.innerHTML),a.contentDocument.close();var e=a.contentDocument.body;a.style.height=e.scrollHeight+"px"})),o}return q(n,[{key:"renderModel",value:function(e){var t=this;return this._wrapped.renderModel(e).then((function(){var e=t.node.contentWindow;e&&e.location.reload()}))}}]),n}(k.Widget),se.IsolatedRenderer=le;var de=n(18),pe=n(59),me=n(102),fe=n.n(me),he=n(177),be=n(1607),ge=n(20),ye=n(1608),ve=n(1609),ke=n(101),Ce=n(1615),we=n(788),Se=n.n(we),je=n(231),Oe=n.n(je),Ee=n(789),Ie=n.n(Ee),Ne=n(790),xe=n.n(Ne),Te=n(4),_e=n.n(Te),Pe=(n(1333),n(791)),De=n(324);function Ae(e){return(Ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Re(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],o=!0,a=!1,r=void 0;try{for(var i,s=e[Symbol.iterator]();!(o=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);o=!0);}catch(e){a=!0,r=e}finally{try{o||null==s.return||s.return()}finally{if(a)throw r}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ge(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ge(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ge(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function Le(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function Me(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Le(Object(n),!0).forEach((function(t){Fe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Le(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Fe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Be="signal"in new Request("")?window.fetch:Pe.a,Ue={"Content-Type":"application/json; charset=utf-8"};function Ve(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(var n in t)e=e.replace(":"+n,t[n]);return e}function Ke(e){if(401==e.status)throw window.goLogin&&goLogin(),e;if(e.status>=200&&e.status<300||304==e.status)return e;var t=new Error(e.statusText);throw t.response=e,t}function ze(e){return e.json()}function He(e){if(!e||0===e.errCode||e.code&&"SUCCESS"===e.code)return e&&e.data;var t=new Error(e.message||e.toString());return t.code=e.code||"接口错误",t}function We(e,t){return function(n){return(n=n||{}).store=n.store||{},n.actions=n.actions||{},n.api=n.api||{},n.store[e.displayName]=Oe.a.stream(e.store),n.actions[e.displayName]=Oe.a.stream(e.actions),u.a.forEach(t,(function(t,o){u.a.set(n.api,[e.displayName,o],t)})),n}}function qe(e){throw e.name,e}function Je(e){if(e){var t=e.path,n=e.root,o=Re(t,3),a=o[0],r=o[1],i=o[2];return"api"==a&&3===t.length?{map:function(e){return function(t){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Promise.resolve("function"==typeof e?e():e).then((function(e){var a=n.unwrap(["actions",r]),s=n.unwrap(["store",r]),l=a[i]||{},c=l.exec,u=l.reducer,d=l.callback,p=l.timeout,m=l.checkStatus,f=void 0===m?Ke:m,h=l.beforeResponse,b=void 0===h?ze:h,g=l.afterResponse,y=void 0===g?He:g,v=l.errorHandler,k=void 0===v?qe:v;"string"==typeof c&&(c=n.unwrap(["api",r,c],{map:function(e){return e}})),c||(c=e);var C=c.mock;window.CONFIG&&!window.CONFIG.isDebug&&(C=!1);var w=String(c.method||"get").toUpperCase(),S=/PUT|POST|PATCH/.test(w),j=Ve(c.url,o.params);S||Ye(t)||(j=j+"?"+Se.a.stringify(t));var O=new AbortController;p=Number(c.timeout||p);var E=!1,I=-1,N=new Promise((function(e,t){p>0?I=setTimeout((function(){if(E=!0,C){var e=new Error("Aborted due to timeout");e.name="AbortError",t(e)}else O.abort()}),p):e()})),x=Me(Me({method:w,signal:O.signal,credentials:"same-origin"},c),{},{headers:Me(Me(Me({},Ue),c.headers),window.ajaxHeader),body:S?JSON.stringify(t):void 0},o),T=C?Promise.resolve("function"==typeof C?C():C instanceof Response?C:new Response(xe()(C)||Array.isArray(C)?JSON.stringify(C):C)):Be(j,x);return Promise.race([N,T]).then((function(){return clearTimeout(I),T})).then(f).then(b).then((function(e){e=y(e);var t=d&&d.success||u&&u.success||d||u;return t&&(t(s,{data:e}),n.change.emit(n.get(["store",r]),"change")),e})).catch((function(e){e.isTimeout=E,clearTimeout(I),k(e)}))}))}}}:void 0}}function Ye(e){if(Array.isArray(e))return 0===e.length;if("object"===Ae(e)){if(e){if(function(e){if("undefined"==typeof Symbol)return!1;return e[Symbol.iterator]}(e)&&void 0!==e.size)throw new Error("isEmpty() does not support iterable collections.");for(var t in e)return!1}return!0}return!e}var Xe=CONFIG.language;function Ze(e,t){return(De[Xe]||De["zh-cn"])[e]||t}function $e(){var e;e=window.location.host.indexOf("pre-tianchi.aliyun.com")>-1?_e()("2019-05-01 00:00:00").valueOf():_e()("2019-06-01 00:00:00").valueOf();var t=_e()("2019-06-07 00:00:00").valueOf(),n=_e()().valueOf();if(n>e&&n<t){var o="en-us"===(Xe||"zh-cn")?"Due to system update, the function is not available till 24:00 June, 6th.":"系统升级维护，从即日起至6月6日功能暂时关闭";return be.a.destroy(),be.a.warning(o),!0}return!1}function Qe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function et(e){return(et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function nt(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function ot(e,t,n){return t&&nt(e.prototype,t),n&&nt(e,n),e}function at(e,t,n){return(at="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ut(e)););return e}(e,t);if(o){var a=Object.getOwnPropertyDescriptor(o,t);return a.get?a.get.call(n):a.value}})(e,t,n||e)}function rt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&it(e,t)}function it(e,t){return(it=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function st(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=ut(e);if(t){var a=ut(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return lt(this,n)}}function lt(e,t){return!t||"object"!==et(t)&&"function"!=typeof t?ct(e):t}function ct(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ut(e){return(ut=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(1382);var dt=he.a.Option,pt=function(e){rt(n,e);var t=st(n);function n(){var e;return tt(this,n),(e=t.apply(this,arguments))._dirty=!1,e}return ot(n,[{key:"onFitRequest",value:function(e){at(ut(n.prototype),"onFitRequest",this).call(this,e),this.parent.isAttached&&(Object(j.some)(this.widgets,(function(e){return!e.isHidden}))?this.parent.node.style.minHeight="var(--jp-private-toolbar-height)":this.parent.node.style.minHeight=""),this._dirty=!0,this.parent.parent&&F.MessageLoop.sendMessage(this.parent.parent,k.Widget.Msg.FitRequest),this._dirty&&F.MessageLoop.sendMessage(this.parent,k.Widget.Msg.UpdateRequest)}},{key:"onUpdateRequest",value:function(e){at(ut(n.prototype),"onUpdateRequest",this).call(this,e),this.parent.isVisible&&(this._dirty=!1)}},{key:"onChildShown",value:function(e){at(ut(n.prototype),"onChildShown",this).call(this,e),this.parent.fit()}},{key:"onChildHidden",value:function(e){at(ut(n.prototype),"onChildHidden",this).call(this,e),this.parent.fit()}},{key:"onBeforeAttach",value:function(e){at(ut(n.prototype),"onBeforeAttach",this).call(this,e),this.parent.fit()}},{key:"attachWidget",value:function(e,t){at(ut(n.prototype),"attachWidget",this).call(this,e,t),this.parent.fit()}},{key:"detachWidget",value:function(e,t){at(ut(n.prototype),"detachWidget",this).call(this,e,t),this.parent.fit()}}]),n}(k.PanelLayout),mt=function(e){rt(n,e);var t=st(n);function n(){var e;return tt(this,n),(e=t.call(this)).addClass("jp-Toolbar"),e.layout=new pt,e}return ot(n,[{key:"names",value:function(){var e=this.layout;return Object(j.map)(e.widgets,(function(e){return ht.nameProperty.get(e)}))}},{key:"addItem",value:function(e,t){var n=this.layout;return this.insertItem(n.widgets.length,e,t)}},{key:"insertItem",value:function(e,t,n){return!Object(j.find)(this.names(),(function(e){return e===t}))&&(n.addClass("jp-Toolbar-item"),this.layout.insertWidget(e,n),ht.nameProperty.set(n,t),!0)}},{key:"handleEvent",value:function(e){switch(e.type){case"click":!this.node.contains(document.activeElement)&&this.parent&&this.parent.activate()}}},{key:"onAfterAttach",value:function(e){this.node.addEventListener("click",this)}},{key:"onBeforeDetach",value:function(e){this.node.removeEventListener("click",this)}}]),n}(k.Widget);function ft(e){return o.createElement("button",{className:e.className?e.className+" jp-ToolbarButtonComponent":"jp-ToolbarButtonComponent",disabled:!1===e.enabled,onMouseDown:function(t){t.preventDefault(),e.onClick()},title:e.tooltip||e.iconLabel},e.iconClassName&&o.createElement("span",{className:e.iconClassName+" jp-ToolbarButtonComponent-icon"}),e.label&&o.createElement("span",{className:"jp-ToolbarButtonComponent-label"},e.label))}!function(e){function t(e,t){var o=this,r=e.state.session,i=e.state.manager,s=e.props.model;if(e.props.model.set("poweron",!!t),!r)return Promise.resolve(!1);if("inthequeue"==s.unwrap("status"))return be.a.destroy(),be.a.warn(Ze("notebook.edit.inthequeue","kernel正在排队中，请耐心等待哦~"),5),Promise.resolve(!1);var l=e.state.kernel||{},c=this;return e.props.parentProps.tianchi.getUserInfo().then((function(u){return u.currentVip?r.initialize().then((function(){if(r.isDisposed)return Promise.reject("session already disposed");var c=r.kernel;return c&&"dead"!=c.status?c?t?Promise.resolve():a(c,e):l.name?r.changeKernel({name:l.name}).then((function(){return!0})):Promise.reject("No kernel to restart"):i.sessions.refreshRunning().then((function(){if("inthequeue"==s.unwrap("status"))return be.a.destroy(),be.a.warn(Ze("notebook.edit.inthequeue","kernel正在排队中，请耐心等待哦~"),5),Promise.resolve(!1);var t=l.name||(e.props.model.unwrap("kernelspec")||{}).name;return!e.state.kernel&&t?(window.tcComponent=e,r.changeKernel({name:t}).then((function(){var t=[];s.unwrap("dataList").map((function(e,n){t.push(e.datalab.id)})),e.props.parentProps.notebook.notebookLog({actionCode:"run_begin",userId:u.userId,notebookLabId:s.unwrap("lab"),dataSetId:t.join(","),notebookId:s.unwrap("notebookId")}).then((function(e){})),e.props.getTime()})).catch((function(e){var t=e&&e.response&&e.response.status;423==t?s.set("status","inthequeue"):t>=400&&t<500&&o.props.model.setMany({refresh:!0})}))):n(r,e)}))})):e.props.parentProps.tianchi.vipCheckCurrentVip().then((function(o){return r.initialize().then((function(){if(r.isDisposed)return Promise.reject("session already disposed");var o=r.kernel;return o&&"dead"!=o.status?o?t?Promise.resolve():a(o,e):l.name?r.changeKernel({name:l.name}).then((function(){return!0})):Promise.reject("No kernel to restart"):i.sessions.refreshRunning().then((function(){if("inthequeue"==s.unwrap("status"))return be.a.destroy(),be.a.warn(Ze("notebook.edit.inthequeue","kernel正在排队中，请耐心等待哦~"),5),Promise.resolve(!1);var t=l.name||(e.props.model.unwrap("kernelspec")||{}).name;return!e.state.kernel&&t?(window.tcComponent=e,r.changeKernel({name:t}).then((function(){var t=[];s.unwrap("dataList").map((function(e,n){t.push(e.datalab.id)})),e.props.parentProps.notebook.notebookLog({actionCode:"run_begin",userId:u.userId,notebookLabId:s.unwrap("lab"),dataSetId:t.join(","),notebookId:s.unwrap("notebookId")}).then((function(e){})),e.props.getTime()})).catch((function(e){var t=e&&e.response&&e.response.status;423==t?s.set("status","inthequeue"):t>=400&&t<500&&c.props.model.setMany({refresh:!0})}))):n(r,e)}))}))}))}))}function n(e,t){de.Dialog.warnButton({label:Ze("notebook.edit.comfirm","确定")});return window.tcComponent=t,e.restart().then((function(){var e=[];model.unwrap("dataList").map((function(t,n){e.push(t.datalab.id)})),t.props.parentProps.notebook.notebookLog({actionCode:"run_begin",userId:t.props.parentProps.routeParams.userId,notebookLabId:model.unwrap("lab"),dataSetId:e.join(","),notebookId:model.unwrap("notebookId")}).then((function(e){})),t.props.getTime()}))}function a(e,t){var n=de.Dialog.warnButton({label:Ze("notebook.edit.comfirm","确定")});return Object(de.showDialog)({title:o.createElement("div",null,o.createElement(ge.a,{type:"question-circle",theme:"outlined",style:{color:"#ffbf00",marginRight:"16px",fontSize:"22px"}}),o.createElement("span",null,Ze("notebook.edit.tip","提示"))),body:Ze("notebook.edit.shutcontent","确定断开kernel吗？"),buttons:[de.Dialog.cancelButton({label:Ze("notebook.edit.cancel","取消")}),n]}).then((function(n){return e.isDisposed?Promise.resolve(!1):!!n.button.accept&&t.state.session.shutdown().then((function(){var e=[];return t.props.model.set("status","dead"),t.props.model.setMany({time:0}),t.props.model.unwrap("dataList").map((function(t,n){e.push(t.datalab.id)})),t.props.parentProps.notebook.notebookLog({actionCode:"run_end",userId:t.props.parentProps.routeParams.userId,notebookLabId:t.props.model.unwrap("lab"),dataSetId:e.join(","),notebookId:t.props.model.unwrap("notebookId")}).then((function(e){})),!0}))}))}e.createInterruptButton=function(e){return new bt({iconClassName:"jp-StopIcon jp-Icon jp-Icon-16 my-toolbaricon",onClick:function(){e.kernel&&e.kernel.interrupt()},tooltip:"interrupt the cell"})},e.restartSession=t,e.restartKernel=n,e.shutdownKernel=a,e.createRestartAndClearButton=function(e,n){return new bt({iconClassName:"jp-ClearIcon jp-Icon jp-Icon-16 my-toolbaricon",onClick:function(){P.NotebookActions.clearAllOutputs(e.content),t(n,!0)},tooltip:"restart & clear output"})},e.createSpacerItem=function(){return new ht.Spacer},e.createKernelNameItem=function(e){return new ht.KernelName({session:e})}}(mt||(mt={}));var ht,bt=function(e){rt(n,e);var t=st(n);function n(){var e,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return tt(this,n),(e=t.call(this,o.createElement(ft,Object.assign({},a)))).addClass("jp-ToolbarButton"),e}return n}(de.ReactElementWidget),gt=function(e){rt(n,e);var t=st(n);function n(e){var o;return tt(this,n),o=t.call(this,e),e.commands.commandChanged.connect(o._onChange,ct(o)),o._childProps=ht.propsFromCommand(o.props),o}return ot(n,[{key:"render",value:function(){return o.createElement(ft,Object.assign({},this._childProps))}},{key:"_onChange",value:function(e,t){t.id===this.props.id&&"changed"===t.type&&(this._childProps=ht.propsFromCommand(this.props),this.forceUpdate())}}]),n}(o.Component);de.ReactElementWidget;!function(e){e.propsFromCommand=function(e){var t=e.commands,n=e.id,o=t.iconClass(n),a=t.iconLabel(n),r=t.label(n),i=t.className(n);return t.isToggled(n)&&(i+=" p-mod-toggled"),t.isVisible(n)||(i+=" p-mod-hidden"),{className:i,iconClassName:o,tooltip:t.caption(n)||r||a,onClick:function(){t.execute(n)},enabled:t.isEnabled(n)}},e.nameProperty=new pe.AttachedProperty({name:"name",create:function(){return""}}),e.noOp=function(){};var t=function(e){rt(n,e);var t=st(n);function n(){var e;return tt(this,n),(e=t.call(this)).addClass("jp-Toolbar-spacer"),e}return n}(k.Widget);e.Spacer=t;var n=function(e){rt(n,e);var t=st(n);function n(e){var o;return tt(this,n),o=t.call(this,e),e.session.kernelChanged.connect(o._onKernelChanged,ct(o)),o._childProps={className:"jp-Toolbar-kernelName",onClick:function(){o.props.session.selectKernel()},label:e.session.kernelDisplayName},o}return ot(n,[{key:"render",value:function(){return o.createElement(ft,Object.assign({},this._childProps))}},{key:"_onKernelChanged",value:function(e){this._childProps.label=e.kernelDisplayName,this._childProps.enabled=!1,this.forceUpdate()}}]),n}(o.Component);e.KernelNameComponent=n;var a=function(e){rt(a,e);var t=st(a);function a(e){var r;return tt(this,a),(r=t.call(this,o.createElement(n,Object.assign({},e)))).addClass("jp-KernelName"),r}return a}(de.ReactElementWidget);e.KernelName=a}(ht||(ht={}));var yt,vt=function(e){rt(n,e);var t=st(n);function n(e){var a;return tt(this,n),(a=t.call(this,o.createElement(kt,Object.assign({},e)))).addClass("jp-Toolbar-kernelStatus"),a}return n}(de.ReactElementWidget),kt=function(e){rt(n,e);var t=st(n);function n(e){var o;return tt(this,n),(o=t.call(this,e)).toText=function(e){"connected"===e||"idle"===e?o.setState({boxClass:"kernelStatusbox jp-CircleIcon"}):"connected"!==e&&"busy"!==e&&"idle"!==e?o.setState({boxClass:"kernelStatusbox jp-FilledCircleIcon"}):"busy"===e&&o.setState({boxClass:"kernelStatusbox jp-KernelStatus-Busing"});var t="";switch(e){case"starting":t="starting...";break;case"reconnecting":t="reconnecting...";break;case"idle":t="connected";break;case"busy":t="running...";break;case"restarting":t="restarting..";break;case"dead":t="disconnected";break;case"connected":t="connected";break;case"inthequeue":"inthequeue"!=o.prevStatus&&be.a.warn(Ze("notebook.edit.inthequeue","kernel正在排队中，请耐心等待哦~"),5),t="in the queue";break;case"unknown":case null:t="disconnected";break;case"saving":t="saving"}o.setState({statusText:t})},o.state={kernelStatus:"disconnected",statusText:"disconnected",boxClass:"kernelStatusbox jp-FilledCircleIcon"},o}return ot(n,[{key:"componentDidMount",value:function(){var e=this;this.props.model.change.map((function(t){var n=t.path,o=(t.type,t.value);/status/.test(n)&&e.setState({kernelStatus:o.unwrap()},(function(){e.toText(e.state.kernelStatus),e.props.model.setMany({kernelStatus:e.state.kernelStatus})}))}))}},{key:"render",value:function(){return o.createElement("div",{className:this.state.boxClass},o.createElement("div",{className:""},this.state.statusText))}}]),n}(o.Component),Ct=function(e){rt(n,e);var t=st(n);function n(e){var a;return tt(this,n),(a=t.call(this,o.createElement(wt,Object.assign({},e)))).addClass("jp-time"),a}return n}(de.ReactElementWidget),wt=function(e){rt(n,e);var t=st(n);function n(e){var o;return tt(this,n),(o=t.call(this,e))._onVisibilityChange=function(){document[o.hiddenProperty]?(clearInterval(o.timer),o.setState({second:0})):o.timerTime()},o.timerTime=function(){o.second<1||(o.timer&&clearInterval(o.timer),o.timer=setInterval((function(){o.compareTimeList(),o.props.sendSecond(o.second),o.second<1&&(o.listenTimeEnd(),o.props.preantProps.state.session.shutdown(),o.props.preantProps.props.isGpuOpen&&o.props.model.setMany({restartTimeDown:!0})),o.second--}),1e3))},o.formatNumber=function(e){var t=0,n=0,a=e<0?0:e;return e>59&&(a=e%60,(n=Math.floor(e/60))>59&&(t=Math.floor(n/60)>99?99:Math.floor(n/60),n%=60)),o.addZoom(t)+":"+o.addZoom(n)+":"+o.addZoom(a)},o.addZoom=function(e){return 1*e>9?e:"0"+e},o.listenTimeEnd=function(){clearInterval(o.timer),o.setState({remainingFormattedTime:"00:00:00",lastTime:"00:00:00"}),o.props.onComplete&&o.props.onComplete()},o.compareTimeList=function(){var e=ct(o);e.setState({remainingFormattedTime:e.formatNumber(e.second-1)})},o.delayClick=function(){o.props.preantProps.props.delayten&&o.props.delayClick()},o.second=parseInt(o.props.model.unwrap("time")/1e3),o.state={remainingFormattedTime:o.formatNumber(o.second),second:parseInt(o.props.time),reduce:!1,kernelStatus:""},o.hiddenProperty="hidden"in document?"hidden":"webkitHidden"in document?"webkitHidden":"mozHidden"in document?"mozHidden":null,o}return ot(n,[{key:"componentDidMount",value:function(){var e=this;this.timerTime();var t=this,n=this.hiddenProperty.replace(/hidden/i,"visibilitychange");window.onresize=function(){document.documentElement.clientWidth<=830?t.setState({reduce:!0}):t.setState({reduce:!1})},document.addEventListener(n,this._onVisibilityChange),this.props.model.change.map((function(t){var n=t.value,o=t.path;t.type;"time"===o[0]&&(e.second=parseInt(n()/1e3),e.setState({second:parseInt(n()/1e3)}),e.timerTime()),"status"===o[0]&&(e.setState({kernelStatus:n()}),e.props.model.setMany({kernelStatus:n()}),"busy"!==n()&&"idle"!==n()&&"connected"!==n()||e.timerTime())}))}},{key:"componentWillReceiveProps",value:function(e){parseInt(e.time)!==this.state.second&&(this.setState({second:parseInt(e.time)}),this.second=parseInt(e.time))}},{key:"componentWillUnmount",value:function(){clearInterval(this.timer)}},{key:"render",value:function(){if("starting"==this.props.model.unwrap("status")||"dead"==this.props.model.unwrap("status"))return o.createElement("i",null);var e=this.props.preantProps.props,t=e.isdelay,n=e.isGpuOpen,a=e.delayten,r=this.state.kernelStatus;return(this.second<=0||isNaN(this.second)||"restarting"===r||"inthequeue"===r||"dead"===r||"reconnecting"===r||!r)&&this.timer&&clearInterval(this.timer),!(this.second<=0||isNaN(this.second)||"restarting"===r||"inthequeue"===r||"dead"===r||"reconnecting"===r||!r)&&o.createElement("div",{className:"timebox"},n?o.createElement("div",{className:"delay-con",onClick:this.delayClick.bind(this)},this.state.reduce?o.createElement("div",{className:t?"delay-after-icon":a?"delay-active-icon":"delay-icon"}):o.createElement("div",{className:t?"delay delay-after":a?"delay-active":"delay"},t?Ze("notebook.ipython_editor.operation_bar.isDelay","已延时"):Ze("notebook.ipython_editor.operation_bar.delay","延时"))):"",o.createElement("div",{className:t?"timer timer-after":"timer"},o.createElement(ye.a,{placement:"bottom",title:o.createElement("p",null,Ze("notebook.ipython_editor.operation_bar.kerneltime.hover","单次连接时长为2小时，可多次连接，连接断开后您的所有中间结果将被清除。"))},o.createElement("div",{className:"outBox"},this.state.reduce?"":o.createElement("span",{className:"kernel-time"},Ze("notebook.ipython_editor.operation_bar.kernelDisconnect","剩余")),o.createElement("section",{className:"timeBox"},o.createElement("div",{className:"timeBoxLineWrap"},o.createElement("div",{className:"timeBoxLine"},this.state.remainingFormattedTime.split("").map((function(e,t,n){return o.createElement("div",{className:"timeBoxLine-Box",key:t},o.createElement("span",{className:"timeBoxLine-Box-item"},e))}))))),this.state.reduce?"":o.createElement("span",{className:"timeicon"},o.createElement(ge.a,{type:"clock-circle"}))))))}}]),n}(o.Component),St=function(e){rt(n,e);var t=st(n);function n(e){return tt(this,n),t.call(this,o.createElement(jt,Object.assign({},e)))}return n}(de.ReactElementWidget),jt=function(e){rt(n,e);var t=st(n);function n(e){var o,a;return tt(this,n),(a=t.call(this,e)).onSelectedFetch=function(e){a.props.model.setMany({raceId:e.split("&&")[1],raceName:e.split("&&")[0],unSaved:!0})},a.handleInputChange=function(e){var t=e.target.value,n=/[^\u0020-\u007E\u00A0-\u00BE\u2E80-\uA4CF\uF900-\uFAFF\uFE30-\uFE4F\uFF00-\uFFEF\u0080-\u009F\u2000-\u201f\u2026\u2022\u20ac\r\n]/g;t.match(n)&&(t=t.replace(n,""));for(var o=t.length,r=-1,i=0,s=0;s<o;s++)if((i+=(r=t.charCodeAt(s))>=0&&r<=128?1:2)>120){t=t.substr(0,s),be.a.destroy(),be.a.warn(Ze("notebook.edit.maxTitle","标题长度不可以超过120个字符哦~"),5);break}a.setState({title:t}),a.props.model.setMany({title:t,unSaved:!0})},a._switch=function(e){"PUBLIC"!==a.state.type&&(a.setState({isOpen:!a.state.isOpen}),a.props.model.setMany({types:e?"PUBLIC":"PRIVATE"}))},a.releaseClick=function(){a.props.releaseVersion()},a.selectLang=function(){var e=a.props.model.unwrap("specs");if((!(t=a.state.kernelList)||!t.length)&&e&&e.kernelspecs){var t=[],n=e.kernelspecs;for(var o in n){var r;r=n[o],t.push(r)}}if(t.length){var i=a.props.model.unwrap("lab");a.setState({selectKernelVisible:!0,kernelList:t,currentLabId:"".concat(i,".ipynb"),changeLangValue:a.state.lang})}},a.onSelectedKernel=function(e){e===a.state.changeLangValue||a.state.changingKernel||a.setState({changeLangValue:e},(function(){a.selectOk()}))},a.selectOk=function(){var e=!1,t=a.props.model.unwrap("com");t&&""!==a.state.changeLangValue&&("python3"===a.state.changeLangValue.toLowerCase()&&"PYTHON3"!==a.state.lang?(t.state.session.changeKernel({name:a.state.changeLangValue}),a.setState({lang:"PYTHON3",changingKernel:!0}),a.props.model.set("lang","PYTHON3"),a.props.model.set("unSaved",!0),e=!0,a.timeout=setTimeout((function(){var e=ct(a);clearTimeout(e.timeout),e.setState({changingKernel:!1})}),3e3)):"ir"===a.state.changeLangValue.toLowerCase()&&"R"!==a.state.lang&&(t.state.session.changeKernel({name:a.state.changeLangValue}),a.setState({lang:"R",changingKernel:!0}),a.props.model.set("lang","R"),a.props.model.set("unSaved",!0),e=!0,a.timeout=setTimeout((function(){var e=ct(a);clearTimeout(e.timeout),e.setState({changingKernel:!1})}),3e3)));var n=a.props.model.unwrap("contentChange"),o=a.props.model.unwrap("creatType");if(!n&&e&&"FROMLOCAL"!==o){var r=a.props.model.unwrap("lang");a.props.changeContentModal(r)}else e&&P.NotebookActions.clearAllOutputs(a.props.panel);a.setState({selectKernelVisible:!1})},a.selectCancel=function(){a.setState({selectKernelVisible:!1})},a._switchgpu=function(e){a.state.gpuInfo.isGpuOn!==e&&(e?a.props.model.set("gpuOpenClick",!0):a.props.model.set("gpuCloseClick",!0))},a.langOnClick=function(){"idle"==a.props.model.unwrap("status")?a.state.kernelList&&0==a.state.kernelList.length&&a.setState({kernelList:[{name:"python3",display_name:"Python 3",spec:{argv:["/opt/conda/bin/python","-m","ipykernel_launcher","-f","{connection_file}"],env:{},display_name:"Python 3",language:"python",interrupt_mode:"signal",metadata:{}},resources:{"logo-64x64":"/kernelspecs/python3/logo-64x64.png","logo-32x32":"/kernelspecs/python3/logo-32x32.png"}},{name:"ir",display_name:"R",spec:{argv:["R","--slave","-e","IRkernel::main()","--args","{connection_file}"],env:{},display_name:"R",language:"R",interrupt_mode:"signal",metadata:{}},resources:{"kernel.js":"/kernelspecs/ir/kernel.js","logo-64x64":"/kernelspecs/ir/logo-64x64.png"}}]}):a.setState({kernelList:[]})},a.state=Object.assign((Qe(o={raceName:Ze("notebook.ipython_editor.operation_bar.linkCompetition","关联比赛"),lang:"PYTHON3",changeLangValue:"PYTHON3",title:"",edition:["PYTHON3","R"],isOpen:!1,selectKernelVisible:!1,selectKernelTitle:"Select Kernel",currentLabId:"",kernelList:[]},"changeLangValue",""),Qe(o,"creatType",""),Qe(o,"specs",null),Qe(o,"changingKernel",!1),Qe(o,"gpuInfo",{}),o),e.model.unwrap()),a.handleInputChange=a.handleInputChange.bind(ct(a)),a.lang=window.CONFIG.language,a.timeout=null,a}return ot(n,[{key:"componentDidMount",value:function(){var e=this,t=document.getElementById("contentTitle");this.props.model.change.map((function(n){var o=n.path,a=(n.type,n.value);/competitionList|title|titles|raceName|type|lang|raceId|publishedVersions|lab|creatType|specs|gpuInfo/.test(o)&&e.setState(Qe({},o.join(""),a.unwrap()),(function(){if(""!==e.state.title&&-1===e.state.title.indexOf("<")&&(e.inputNode.innerHTML=fe()(e.state.title),e.inputNode.title=fe()(e.state.title),e.setState({title:e.inputNode.innerText})),o.indexOf("specs")>-1){var n=e.props.model.unwrap("specs");if(n&&n.kernelspecs){var a=[],r=n.kernelspecs;for(var i in r){var s;s=r[i],a.push(s)}if(a.length){var l=e.props.model.unwrap("lab");e.setState({kernelList:a,currentLabId:"".concat(l,".ipynb"),changeLangValue:e.state.lang})}}}if(o.indexOf("gpuInfo")>-1&&e.setState({gpuInfo:e.props.model.unwrap("gpuInfo")}),o.indexOf("title")>-1){var c=e.props.model.unwrap("title").indexOf("Draft");t&&-1!==c&&t.focus()}}))})),this.setState(Object.assign({},this.props.model.unwrap()));var n=document.getElementsByClassName("edit-area"),o=document.getElementsByClassName("float-right");"en-us"!==this.lang&&"en"!==this.lang||(n&&n[0]&&(n[0].style.marginRight="590px"),o&&o[0]&&(o[0].style.width="198px"))}},{key:"componentWillUnmount",value:function(){this.timeout&&clearTimeout(this.timeout)}},{key:"applyGpu",value:function(){this.props.model.set("applyGpuClick",!0)}},{key:"applyRender",value:function(){var e=this.state.gpuInfo,t=e.gpuClass,n=e.isGpuOn,a=(e.gpuState,e.startDate),r=e.gmtExpiry,i=(e.overTime,e.gpuText),s=e.rejectReasons;return"apply"===t||"applying"===t?o.createElement("div",{className:"buttonLink gpu-apply",onClick:this.applyGpu.bind(this),href:"#"},i):"gpu-apply-fail"===t?o.createElement(ye.a,{placement:"bottom",title:o.createElement("p",{style:{fontzSize:"12px",color:"#E55130"}},Ze("notebook.newNotebook.applyAgain","未通过，再次申请："),s)},o.createElement("div",{className:"buttonLink gpu-apply-fail",href:"#",onClick:this.applyGpu.bind(this)},Ze("notebook.newNotebook.applyFail","未通过"))):"pass"===t?o.createElement("div",{className:"switch"},o.createElement(ve.a,{className:"switchBtn",checked:n,onChange:this._switchgpu.bind(this)}),n?o.createElement(ye.a,{title:"".concat(a," ").concat(Ze("notebook.newNotebook.to","至")," ").concat(r," ").concat(Ze("notebook.newNotebook.work","有效"))},o.createElement("span",{className:"gputxt"},"GPU")):o.createElement("span",{className:"gputxt"},"GPU")):void 0}},{key:"render",value:function(){var e=this,t=void 0===this.state.competitionList?null:this.state.competitionList.map((function(t,n){var a=("en-us"===e.lang||"en"===e.lang)&&t.raceNameEn?t.raceNameEn:t.raceName;return o.createElement(dt,{key:a+"&&"+t.raceId,title:a},a)})),n=this.props.model.unwrap("isGpuOpen"),a=[];return n&&"idle"==this.props.model.unwrap("status")&&(a=[{name:"python3",display_name:"Python 3",spec:{argv:["/opt/conda/bin/python","-m","ipykernel_launcher","-f","{connection_file}"],env:{},display_name:"Python 3",language:"python",interrupt_mode:"signal",metadata:{}},resources:{"logo-64x64":"/kernelspecs/python3/logo-64x64.png","logo-32x32":"/kernelspecs/python3/logo-32x32.png"}}]),o.createElement("div",{className:"input-top"},o.createElement("div",{className:"isSave",id:"isSave","data-save":this.state.unSaved}),o.createElement("div",{className:"edit-area"},o.createElement("input",{id:"contentTitle",title:this.state.title,placeholder:Ze("notebook.ipython_editor.inpyt_con.placeholder","请输入项目标题"),value:this.state.title,onChange:this.handleInputChange})),o.createElement("div",{id:"title",ref:function(t){return e.inputNode=t},style:{display:"none"}}),o.createElement("div",{className:"edit-btnContainer"},o.createElement("div",{className:"lang-sel"},o.createElement(he.a,{value:this.state.lang,onSelect:function(t){e.onSelectedKernel(t)},disabled:this.state.changingKernel,onDropdownVisibleChange:this.langOnClick},n?a&&a.length?a.map((function(e,t){return o.createElement(dt,{key:e.name,value:e.name},e.display_name)})):o.createElement(dt,{key:"No Kernel",value:"No Kernel"},"No Kernel"):this.state.kernelList&&this.state.kernelList.length?this.state.kernelList.map((function(e,t){return o.createElement(dt,{key:e.name,value:e.name},e.display_name)})):o.createElement(dt,{key:"No Kernel",value:"No Kernel"},"No Kernel"))),o.createElement("div",{className:"float-right"},o.createElement(he.a,{value:"FROMRACE"===this.state.creatType?this.state.raceName?this.state.raceName:Ze("notebook.ipython_editor.operation_bar.none","无"):this.state.raceName,onSelect:function(t){e.onSelectedFetch(t)},disabled:"FROMRACE"===this.state.creatType},o.createElement(dt,{key:"".concat(Ze("notebook.ipython_editor.operation_bar.none","无"))+"&&0"},Ze("notebook.ipython_editor.operation_bar.none","无")),t)),o.createElement("div",{className:"switch"},o.createElement(ye.a,{placement:"bottomRight",title:Ze("notebook.ipython_editor.tip","公开后不能再设为私有哦～")},o.createElement(ve.a,{className:"switchBtn",checked:this.state.isOpen||"PUBLIC"===this.state.type,onChange:this._switch.bind(this)})),o.createElement("span",{className:"switchTxt"},this.state.isOpen||"PUBLIC"===this.state.type?Ze("notebook.ipython_editor.public","公开"):Ze("notebook.ipython_editor.private","私有"))),o.createElement("div",{className:"versionContainer"},o.createElement(ke.a,{type:"primary",className:"releasebtn",onClick:this.releaseClick.bind(this)},Ze("notebook.release.version","发布版本")))),o.createElement(Ce.a,{visible:this.state.selectKernelVisible,title:this.state.selectKernelTitle,className:"seletctKernelModal",onOk:this.selectOk,onCancel:this.selectCancel,footer:[o.createElement(ke.a,{key:"back",onClick:this.selectCancel},Ze("notebook.edit.cancel","取消")),o.createElement(ke.a,{key:"submit",type:"primary",onClick:this.selectOk.bind(this)},Ze("notebook.edit.comfirm","确定"))]},o.createElement("div",null,o.createElement(he.a,{style:{width:"100%"},value:this.state.changeLangValue,onSelect:function(t){e.onSelectedKernel(t)}},this.state.kernelList.map((function(e,t){return o.createElement(dt,{key:e.name,value:e.name},e.display_name)}))))))}}]),n}(o.Component),Ot=function(e){rt(n,e);var t=st(n);function n(e){return tt(this,n),t.call(this,o.createElement(Et,Object.assign({},e)))}return n}(de.ReactElementWidget),Et=function(e){rt(n,e);var t=st(n);function n(e){var o;return tt(this,n),(o=t.call(this,e)).reconnecthander=function(){mt.restartSession(o.props.parentProps)},o.state=Object.assign({kernelStatus:"dead"},e.model.unwrap()),o}return ot(n,[{key:"componentDidMount",value:function(){var e=this;this.props.model.change.map((function(t){var n=t.path,o=(t.type,t.value);/status/.test(n)&&(e.setState({kernelStatus:o.unwrap()}),e.props.model.setMany({kernelStatus:o.unwrap()}))})),this.setState(Object.assign({},this.props.model.unwrap()))}},{key:"render",value:function(){var e="idle"===this.state.kernelStatus||"connected"===this.state.kernelStatus||"busy"===this.state.kernelStatus;return o.createElement("div",{title:"connect or shutdown",className:e?"jp-ConnectIcon jp-Icon jp-Icon-16 my-toolbaricon":"jp-UnconnectIcon jp-Icon jp-Icon-16 my-toolbaricon",onClick:this.reconnecthander})}}]),n}(o.Component),It=function(e){rt(n,e);var t=st(n);function n(e){return tt(this,n),t.call(this,o.createElement(Nt,Object.assign({},e)))}return n}(de.ReactElementWidget),Nt=function(e){rt(n,e);var t=st(n);function n(e){var o;return tt(this,n),(o=t.call(this,e)).savehander=function(){if(o.state.contentUnSaved||o.state.unSaved){if(o.props.panel.context.model.readOnly)return Object(de.showDialog)({title:"无法保存",body:"文档为只读",buttons:[de.Dialog.okButton()]});o.props.model.set("saveTitle",!0),o.props.panel.context.save().then((function(e){}))}},o.state={contentUnSaved:!1,unSaved:!1},o}return ot(n,[{key:"componentDidMount",value:function(){var e=this;this.props.model.change.map((function(t){var n=t.path,o=(t.type,t.value);/contentUnSaved|unSaved/.test(n)&&e.setState(Qe({},n.join(""),o.unwrap()))})),this.setState(Object.assign({},this.props.model.unwrap()))}},{key:"render",value:function(){return o.createElement("div",{title:"save",className:this.state.contentUnSaved||this.state.unSaved?"jp-SaveIcon jp-Icon jp-Icon-16 my-toolbaricon jp-hasSave":"jp-SaveIcon jp-Icon jp-Icon-16 my-toolbaricon jp-noSave",onClick:this.savehander},!(!this.state.contentUnSaved&&!this.state.unSaved)&&o.createElement("span",{className:"jp-UnSaveIcon"}))}}]),n}(o.Component),xt=n(798),Tt=n.n(xt),_t=n(1610),Pt=n(1620),Dt=function(e,t,n,o){return new(n||(n=Promise))((function(a,r){function i(e){try{l(o.next(e))}catch(e){r(e)}}function s(e){try{l(o.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}l((o=o.apply(e,t||[])).next())}))};function At(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Rt(e,t){return(Rt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Gt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=Ft(e);if(t){var a=Ft(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return Lt(this,n)}}function Lt(e,t){return!t||"object"!==Bt(t)&&"function"!=typeof t?Mt(e):t}function Mt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ft(e){return(Ft=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Bt(e){return(Bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e){e.save="docmanager:save",e.saveAll="docmanager:save-all",e.saveAs="docmanager:save-as",e.changeKeyMap="codemirror:change-keymap",e.changeTheme="codemirror:change-theme",e.changeMode="codemirror:change-mode",e.find="codemirror:find",e.findAndReplace="codemirror:find-and-replace",e.goToLine="codemirror:go-to-line",e.invoke="completer:invoke",e.invokeNext="completer:invokeNext",e.invokePrev="completer:invokePrev",e.invokeConsole="completer:invoke-console",e.invokeNotebook="completer:invoke-notebook",e.invokeFile="completer:invoke-file",e.select="completer:select",e.selectConsole="completer:select-console",e.selectNotebook="completer:select-notebook",e.selectFile="completer:select-file",e.paletteActivate="apputils:activate-command-palette",e.createNew="notebook:create-new",e.interrupt="notebook:interrupt-kernel",e.restart="notebook:restart-kernel",e.restartClear="notebook:restart-clear-output",e.restartRunAll="notebook:restart-run-all",e.reconnectToKernel="notebook:reconnect-to-kernel",e.changeKernel="notebook:change-kernel",e.createConsole="notebook:create-console",e.createOutputView="notebook:create-output-view",e.clearAllOutputs="notebook:clear-all-cell-outputs",e.closeAndShutdown="notebook:close-and-shutdown",e.trust="notebook:trust",e.exportToFormat="notebook:export-to-format",e.run="notebook:run-cell",e.runAndAdvance="notebook:run-cell-and-select-next",e.runAndInsert="notebook:run-cell-and-insert-below",e.runInConsole="notebook:run-in-console",e.runAll="notebook:run-all-cells",e.runAllAbove="notebook:run-all-above",e.runAllBelow="notebook:run-all-below",e.toCode="notebook:change-cell-to-code",e.toMarkdown="notebook:change-cell-to-markdown",e.toRaw="notebook:change-cell-to-raw",e.cut="notebook:cut-cell",e.copy="notebook:copy-cell",e.pasteAbove="notebook:paste-cell-above",e.pasteBelow="notebook:paste-cell-below",e.pasteAndReplace="notebook:paste-and-replace-cell",e.moveUp="notebook:move-cell-up",e.moveDown="notebook:move-cell-down",e.clearOutputs="notebook:clear-cell-output",e.deleteCell="notebook:delete-cell",e.showOrhideOutput="notebook:showOrhide-output",e.insertAbove="notebook:insert-cell-above",e.insertBelow="notebook:insert-cell-below",e.insertMarkdownBelow="notebook:insert-markdown-below",e.selectAbove="notebook:move-cursor-up",e.selectBelow="notebook:move-cursor-down",e.extendAbove="notebook:extend-marked-cells-above",e.extendBelow="notebook:extend-marked-cells-below",e.selectAll="notebook:select-all",e.deselectAll="notebook:deselect-all",e.editMode="notebook:enter-edit-mode",e.merge="notebook:merge-cells",e.split="notebook:split-cell-at-cursor",e.commandMode="notebook:enter-command-mode",e.toggleAllLines="notebook:toggle-all-cell-line-numbers",e.undoCellAction="notebook:undo-cell-action",e.redoCellAction="notebook:redo-cell-action",e.markdown1="notebook:change-cell-to-heading-1",e.markdown2="notebook:change-cell-to-heading-2",e.markdown3="notebook:change-cell-to-heading-3",e.markdown4="notebook:change-cell-to-heading-4",e.markdown5="notebook:change-cell-to-heading-5",e.markdown6="notebook:change-cell-to-heading-6",e.hideCode="notebook:hide-cell-code",e.showCode="notebook:show-cell-code",e.hideAllCode="notebook:hide-all-cell-code",e.showAllCode="notebook:show-all-cell-code",e.hideOutput="notebook:hide-cell-outputs",e.showOutput="notebook:show-cell-outputs",e.hideAllOutputs="notebook:hide-all-cell-outputs",e.showAllOutputs="notebook:show-all-cell-outputs",e.enableOutputScrolling="notebook:enable-output-scrolling",e.disableOutputScrolling="notebook:disable-output-scrolling",e.saveWithView="notebook:save-with-view"}(yt||(yt={}));var Ut;!function(e){function t(e,t){return new de.ToolbarButton({iconClassName:"jp-RunIcon jp-Icon jp-Icon-16 my-toolbaricon",onClick:function(){var n=t.state,o=n.session;n.notebook&&o&&(o.kernel&&"dead"!=o.kernel?P.NotebookActions.runAndAdvance(e.content,e.session):mt.restartSession(t,!0).then((function(){P.NotebookActions.runAndAdvance(e.content,e.session)})))},tooltip:"exec selected cell"})}function n(e,t){return new de.ToolbarButton({iconClassName:"jp-RunAllIcon jp-Icon jp-Icon-16 my-toolbaricon",onClick:function(){e.session.kernel?P.NotebookActions.runAll(e.content,e.session):mt.restartSession(t,!0).then((function(){P.NotebookActions.runAll(e.content,e.session)}))},tooltip:"exec all cells"})}function o(e,t){return new de.ToolbarButton({iconClassName:"jp-AddIcon jp-Icon jp-Icon-16 my-toolbaricon",onClick:function(){P.NotebookActions.insertBelow(e.content)},tooltip:"new code cell"})}function a(e,t){return new de.ToolbarButton({iconClassName:"jp-AddMDIcon jp-Icon jp-Icon-16 my-toolbaricon",onClick:function(){e.execute(yt.insertMarkdownBelow)},tooltip:"new markdown cell"})}function r(e){return new de.ToolbarButton({iconClassName:"jp-MoveDownIcon jp-Icon jp-Icon-16 my-toolbaricon",onClick:function(){P.NotebookActions.moveDown(e.content)},tooltip:"move down"})}function i(e){return new de.ToolbarButton({iconClassName:"jp-MoveUpIcon jp-Icon jp-Icon-16 my-toolbaricon",onClick:function(){P.NotebookActions.moveUp(e.content)},tooltip:"move up"})}function s(e){return new de.ToolbarButton({iconClassName:"jp-ShotcustIcon jp-Icon jp-Icon-16 my-toolbaricon",onClick:function(){},tooltip:"keyboard shortcuts"})}e.createSaveButton=function(e,t){return new de.ToolbarButton({iconClassName:"jp-SaveIcon foo jp-Icon jp-Icon-16",onClick:function(){if(e.context.model.readOnly)return Object(de.showDialog)({title:"Unable to save",body:"Document is read only",buttons:[de.Dialog.okButton()]});e.context.save().then((function(e){}))},tooltip:"save",enabled:!0})},e.createReleaseButton=function(e){return new de.ToolbarButton({iconClassName:"jp-ReleaseIcon jp-Icon jp-Icon-16 my-toolbaricon",onClick:function(){e.props.releaseVersion()},tooltip:"release version"})},e.createRunButton=t,e.createRunAllButton=n,e.createInterruptCellButton=function(e){return new de.ToolbarButton({iconClassName:"jp-InterruptcellIcon jp-Icon jp-Icon-16",onClick:function(){},tooltip:"interrupt the cell"})},e.createInsertButton=o,e.createInsertMDButton=a,e.createDownButton=r,e.createUpButton=i,e.createShotcutsButton=s,e.createCutButton=function(e){return new de.ToolbarButton({iconClassName:"jp-CutIcon jp-Icon jp-Icon-16",onClick:function(){P.NotebookActions.cut(e.content)},tooltip:"Cut the selected cells"})},e.createCopyButton=function(e){return new de.ToolbarButton({iconClassName:"jp-CopyIcon jp-Icon jp-Icon-16",onClick:function(){P.NotebookActions.copy(e.content)},tooltip:"Copy the selected cells"})},e.createPasteButton=function(e){return new de.ToolbarButton({iconClassName:"jp-PasteIcon jp-Icon jp-Icon-16",onClick:function(){P.NotebookActions.paste(e.content)},tooltip:"Paste cells from the clipboard"})},e.createCellTypeItem=function(e){return new Kt(e.content)},e.getDefaultItems=function(e,l,c){return[{name:"save",widget:new It({panel:e,model:c.props.model})},{name:"run",widget:t(e,c)},{name:"runall",widget:n(e,c)},{name:"clear",widget:mt.createRestartAndClearButton(e,c)},{name:"interrupt",widget:mt.createInterruptButton(e.session)},{name:"insert",widget:o(e,c.props.model)},{name:"insertmd",widget:a(l,c.props.model)},{name:"down",widget:r(e)},{name:"up",widget:i(e)},{name:"shotcuts",widget:s()},{name:"restart",widget:new Ot({parentProps:c,model:c.props.model})},window.CONFIG.hasKernel&&{name:"kernelStatus",widget:new vt({model:c.props.model})},window.CONFIG.hasKernel&&"false"==window.CONFIG.currentVip&&{name:"TimeDown",widget:new Ct({model:c.props.model,iconClassName:"jp-PasteIcontimeBox",time:c.props.restTime/1e3,sendSecond:c.props.sendSecond,sendTime:c.props.sendTime,isGpu:c.props.isGpuOpen,preantProps:c,isDelay:c.props.isDelay,delayten:c.props.delayten,delayClick:c.props.delayClick})}].filter(Boolean)}}(Ut||(Ut={}));var Vt,Kt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Rt(e,t)}(r,e);var t,n,o,a=Gt(r);function r(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),(t=a.call(this,{node:zt()}))._changeGuard=!1,t.addClass("jp-Notebook-toolbarCellType"),t._select=t.node.firstChild,de.Styling.wrapSelect(t._select),t._wildCard=document.createElement("option"),t._wildCard.value="-",t._wildCard.textContent="-",t._notebook=e,e.model&&t._updateValue(),e.activeCellChanged.connect(t._updateValue,Mt(t)),e.selectionChanged.connect(t._updateValue,Mt(t)),t}return t=r,(n=[{key:"handleEvent",value:function(e){switch(e.type){case"change":this._evtChange(e);break;case"keydown":this._evtKeyDown(e)}}},{key:"onAfterAttach",value:function(e){this._select.addEventListener("change",this),this._select.addEventListener("keydown",this)}},{key:"onBeforeDetach",value:function(e){this._select.removeEventListener("change",this),this._select.removeEventListener("keydown",this)}},{key:"_evtChange",value:function(e){var t=this._select,n=this._notebook;if("-"!==t.value&&!this._changeGuard){var o=t.value;P.NotebookActions.changeCellType(n,o),n.activate()}}},{key:"_evtKeyDown",value:function(e){13===e.keyCode&&this._notebook.activate()}},{key:"_updateValue",value:function(){var e=this._notebook,t=this._select;if(e.activeCell){for(var n=e.activeCell.model.type,o=0;o<e.widgets.length;o++){var a=e.widgets[o];if(e.isSelectedOrActive(a)&&a.model.type!==n){n="-",t.appendChild(this._wildCard);break}}"-"!==n&&t.remove(3),this._changeGuard=!0,t.value=n,this._changeGuard=!1}}}])&&At(t.prototype,n),o&&At(t,o),r}(k.Widget);function zt(){for(var e=document.createElement("div"),t=document.createElement("select"),n=0,o=["Code","Markdown","Raw"];n<o.length;n++){var a=o[n],r=document.createElement("option");r.value=a.toLowerCase(),r.textContent=a,t.appendChild(r)}return t.className="jp-Notebook-toolbarCellTypeDropdown",e.appendChild(t),e}function Ht(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Wt=(Ht(Vt={},yt.selectFile,{command:yt.selectFile,keys:["Enter"],selector:".jp-FileEditor .jp-mod-completer-active"}),Ht(Vt,yt.selectNotebook,{command:yt.selectNotebook,keys:["Enter"],selector:".jp-Notebook .jp-mod-completer-active"}),Ht(Vt,"application:activate-next-tab",{command:"application:activate-next-tab",keys:["Ctrl Shift ]"],selector:"body",title:"Activate Next Tab",category:"Main Area"}),Ht(Vt,"application:activate-previous-tab",{command:"application:activate-previous-tab",keys:["Ctrl Shift ["],selector:"body",title:"Activate Previous Tab",category:"Main Area"}),Ht(Vt,"application:toggle-left-area",{command:"application:toggle-left-area",keys:["Accel B"],selector:"body",title:"Toggle Left Area",category:"Main Area"}),Ht(Vt,"application:toggle-mode",{command:"application:toggle-mode",keys:["Accel Shift D"],selector:"body",title:"Toggle Single-Document Mode",category:"Main Area"}),Ht(Vt,"application:toggle-presentation-mode",{command:"application:toggle-presentation-mode",keys:[""],selector:"body",title:"Toggle Presentation Mode",category:"Main Area"}),Ht(Vt,"application:toggle-right-area",{command:"application:toggle-right-area",keys:[""],selector:"body",title:"Toggle Right Area",category:"Main Area"}),Ht(Vt,"apputils:activate-command-palette",{command:"apputils:activate-command-palette",keys:["Accel Shift P"],selector:"body",title:"Activate Command Palette",category:"Main Area"}),Ht(Vt,"completer:invoke-console",{command:"completer:invoke-console",keys:["Tab"],selector:".jp-CodeConsole-promptCell .jp-mod-completer-enabled",title:"Invoke Console Completion",category:"Completer"}),Ht(Vt,"completer:invoke-file",{command:"completer:invoke-file",keys:["Tab"],selector:".jp-FileEditor .jp-mod-completer-enabled",title:"Invoke File Completion",category:"Completer"}),Ht(Vt,"completer:invoke-notebook",{command:"completer:invoke-notebook",keys:["Tab"],selector:".jp-Notebook.jp-mod-editMode .jp-mod-completer-enabled",title:"Invoke Notebook Completion",category:"Completer"}),Ht(Vt,"console:linebreak",{command:"console:linebreak",keys:["Enter"],selector:".jp-CodeConsole-promptCell",title:"Insert Line Break",category:"Console"}),Ht(Vt,"console:run-forced",{command:"console:run-forced",keys:["Shift Enter"],selector:".jp-CodeConsole-promptCell",title:"Run Cell (forced)",category:"Console"}),Ht(Vt,"docmanager:close",{command:"docmanager:close",keys:["Ctrl Q"],selector:".jp-Activity",title:"Close Activity",category:"File Operations"}),Ht(Vt,"docmanager:save",{command:"docmanager:save",keys:["Accel S"],selector:"body",title:"Save",category:"File Operations"}),Ht(Vt,"docmanager:save-as",{command:"docmanager:save-as",keys:["Accel Shift S"],selector:"body",title:"Save As",category:"File Operations"}),Ht(Vt,"editmenu:clear-all",{command:"editmenu:clear-all",keys:[""],selector:"[data-jp-undoer]",title:"Clear All",category:"Editing"}),Ht(Vt,"editmenu:clear-current",{command:"editmenu:clear-current",keys:[""],selector:"[data-jp-undoer]",title:"Clear",category:"Editing"}),Ht(Vt,"editmenu:find",{command:"editmenu:find",keys:[""],selector:"[data-jp-undoer]",title:"Find",category:"Editing"}),Ht(Vt,"editmenu:find-and-replace",{command:"editmenu:find-and-replace",keys:[""],selector:"[data-jp-undoer]",title:"Find and Replace",category:"Editing"}),Ht(Vt,"editmenu:redo",{command:"editmenu:redo",keys:["Ctrl Shift Z"],selector:"[data-jp-undoer]",title:"Redo",category:"Editing"}),Ht(Vt,"filebrowser:create-main-launcher",{command:"filebrowser:create-main-launcher",keys:["Accel Shift L"],selector:"body",title:"New Launcher",category:"File Operations"}),Ht(Vt,"filebrowser:toggle-main",{command:"filebrowser:toggle-main",keys:["Accel Shift F"],selector:"body",title:"Toggle Filebrowser",category:"File Operations"}),Ht(Vt,"help:toggle",{command:"help:toggle",keys:["Ctrl Shift H"],selector:"body",title:"Toggle Help",category:"Help"}),Ht(Vt,"imageviewer:flip-horizontal",{command:"imageviewer:flip-horizontal",keys:["H"],selector:".jp-ImageViewer",title:"Flip Image Horizontally",category:"Image Viewer"}),Ht(Vt,"imageviewer:flip-vertical",{command:"imageviewer:flip-vertical",keys:["V"],selector:".jp-ImageViewer",title:"Flip Image Vertically",category:"Image Viewer"}),Ht(Vt,"imageviewer:invert-colors",{command:"imageviewer:invert-colors",keys:["I"],selector:".jp-ImageViewer",title:"Invert Colors",category:"Image Viewer"}),Ht(Vt,"imageviewer:reset-image",{command:"imageviewer:reset-image",keys:["0"],selector:".jp-ImageViewer",title:"Reset Image",category:"Image Viewer"}),Ht(Vt,"imageviewer:rotate-clockwise",{command:"imageviewer:rotate-clockwise",keys:["]"],selector:".jp-ImageViewer",title:"Rotate Clockwise",category:"Image Viewer"}),Ht(Vt,"imageviewer:rotate-counterclockwise",{command:"imageviewer:rotate-counterclockwise",keys:["["],selector:".jp-ImageViewer",title:"Rotate Counterclockwise",category:"Image Viewer"}),Ht(Vt,"imageviewer:zoom-in",{command:"imageviewer:zoom-in",keys:["="],selector:".jp-ImageViewer",title:"Zoom In",category:"Image Viewer"}),Ht(Vt,"imageviewer:zoom-out",{command:"imageviewer:zoom-out",keys:["-"],selector:".jp-ImageViewer",title:"Zoom Out",category:"Image Viewer"}),Ht(Vt,"inspector:open",{command:"inspector:open",keys:["Accel I"],selector:"body",title:"Open Inspector",category:"Inspector"}),Ht(Vt,"kernelmenu:interrupt",{command:"kernelmenu:interrupt",keys:["I","I"],selector:"[data-jp-kernel-user]:focus",title:"Interrupt Kernel",category:"Kernel Operations"}),Ht(Vt,"kernelmenu:restart",{command:"kernelmenu:restart",keys:["0","0"],selector:"[data-jp-kernel-user]:focus",title:"Restart Kernel",category:"Kernel Operations"}),Ht(Vt,"kernelmenu:restart-and-clear",{command:"kernelmenu:restart-and-clear",keys:[""],selector:"[data-jp-kernel-user]:focus",title:"Restart Kernel and Clear",category:"Kernel Operations"}),Ht(Vt,"kernelmenu:shutdown",{command:"kernelmenu:shutdown",keys:[""],selector:"[data-jp-kernel-user]:focus",title:"Shutdown Kernel",category:"Kernel Operations"}),Ht(Vt,"launcher:create",{command:"launcher:create",keys:[""],selector:"body",title:"New Launcher",category:"Main Area"}),Ht(Vt,"notebook:change-cell-to-code",{command:"notebook:change-cell-to-code",keys:["Y"],selector:".jp-Notebook:focus",title:"Change to Code Cell Type",category:"Notebook Cell Operations"}),Ht(Vt,"notebook:change-cell-to-markdown",{command:"notebook:change-cell-to-markdown",keys:["M"],selector:".jp-Notebook:focus",title:"Change to Markdown Cell Type",category:"Notebook Cell Operations"}),Ht(Vt,"notebook:change-cell-to-raw",{command:"notebook:change-cell-to-raw",keys:["R"],selector:".jp-Notebook:focus",title:"Change to Raw Cell Type",category:"Notebook Cell Operations"}),Ht(Vt,"notebook:change-to-cell-heading-1",{command:"notebook:change-cell-to-heading-1",keys:["1"],selector:".jp-Notebook:focus",title:"Change to Heading 1",category:"Notebook Cell Operations"}),Ht(Vt,"notebook:change-to-cell-heading-2",{command:"notebook:change-cell-to-heading-2",keys:["2"],selector:".jp-Notebook:focus",title:"Change to Heading 2",category:"Notebook Cell Operations"}),Ht(Vt,"notebook:change-to-cell-heading-3",{command:"notebook:change-cell-to-heading-3",keys:["3"],selector:".jp-Notebook:focus",title:"Change to Heading 3",category:"Notebook Cell Operations"}),Ht(Vt,"notebook:change-to-cell-heading-4",{command:"notebook:change-cell-to-heading-4",keys:["4"],selector:".jp-Notebook:focus",title:"Change to Heading 4",category:"Notebook Cell Operations"}),Ht(Vt,"notebook:change-to-cell-heading-5",{command:"notebook:change-cell-to-heading-5",keys:["5"],selector:".jp-Notebook:focus",title:"Change to Heading 5",category:"Notebook Cell Operations"}),Ht(Vt,"notebook:change-to-cell-heading-6",{command:"notebook:change-cell-to-heading-6",keys:["6"],selector:".jp-Notebook:focus",title:"Change to Heading 6",category:"Notebook Cell Operations"}),Ht(Vt,"notebook:copy-cell",{command:"notebook:copy-cell",keys:["C"],selector:".jp-Notebook:focus",title:"Copy Cell(s)",category:"Notebook Cell Operations"}),Ht(Vt,"notebook:cut-cell",{command:"notebook:cut-cell",keys:["X"],selector:".jp-Notebook:focus",title:"Cut Cell(s)",category:"Notebook Cell Operations"}),Ht(Vt,"notebook:delete-cell",{command:"notebook:delete-cell",keys:["D","D"],selector:".jp-Notebook:focus",title:"Delete Cell(s)",category:"Notebook Cell Operations"}),Ht(Vt,"notebook:showOrhide-output",{command:"notebook:showOrhide-output",keys:["O","O"],selector:".jp-Notebook:focus",title:"Show or hide output",category:"Notebook Cell Operations"}),Ht(Vt,"notebook:restart-kernel",{command:"notebook:restart-kernel",keys:["0","0"],selector:".jp-Notebook:focus",title:"Restart kernel",category:"Notebook Cell Operations"}),Ht(Vt,"notebook:enter-command-mode-1",{command:"notebook:enter-command-mode",keys:["Escape"],selector:".jp-Notebook.jp-mod-editMode",title:"Enter Command Mode",category:"Notebook Operations"}),Ht(Vt,"notebook:enter-command-mode-2",{command:"notebook:enter-command-mode",keys:["Ctrl M"],selector:".jp-Notebook.jp-mod-editMode",title:"Enter Command Mode",category:"Notebook Operations"}),Ht(Vt,"notebook:enter-edit-mode",{command:"notebook:enter-edit-mode",keys:["Enter"],selector:".jp-Notebook:focus",title:"Enter Edit Mode",category:"Notebook Operations"}),Ht(Vt,"notebook:extend-marked-cells-above-1",{command:"notebook:extend-marked-cells-above",keys:["Shift ArrowUp"],selector:".jp-Notebook:focus",title:"Extend Selection Above",category:"Notebook Cell Operations"}),Ht(Vt,"notebook:extend-marked-cells-above-2",{command:"notebook:extend-marked-cells-above",keys:["Shift K"],selector:".jp-Notebook:focus",title:"Extend Selection Above",category:"Notebook Cell Operations"}),Ht(Vt,"notebook:extend-marked-cells-below-1",{command:"notebook:extend-marked-cells-below",keys:["Shift ArrowDown"],selector:".jp-Notebook:focus",title:"Extend Selection Below",category:"Notebook Cell Operations"}),Ht(Vt,"notebook:extend-marked-cells-below-2",{command:"notebook:extend-marked-cells-below",keys:["Shift J"],selector:".jp-Notebook:focus",title:"Extend Selection Below",category:"Notebook Cell Operations"}),Ht(Vt,"notebook:insert-cell-above",{command:"notebook:insert-cell-above",keys:["A"],selector:".jp-Notebook:focus",title:"Insert Cell Above",category:"Notebook Cell Operations"}),Ht(Vt,"notebook:insert-cell-below",{command:"notebook:insert-cell-below",keys:["B"],selector:".jp-Notebook:focus",title:"Insert Cell Below",category:"Notebook Cell Operations"}),Ht(Vt,"notebook:line-numbering",{command:"viewmenu:line-numbering",keys:[""],selector:".jp-Notebook.jp-mod-commandMode",title:"Show Line Numbers",category:"Notebook Operations"}),Ht(Vt,"notebook:match-brackets",{command:"viewmenu:match-brackets",keys:[""],selector:".jp-Notebook.jp-mod-commandMode",title:"Match Brackets",category:"Notebook Operations"}),Ht(Vt,"notebook:merge-cells",{command:"notebook:merge-cells",keys:["Shift M"],selector:".jp-Notebook:focus",title:"Merge Selected Cells",category:"Notebook Cell Operations"}),Ht(Vt,"notebook:move-cursor-down-1",{command:"notebook:move-cursor-down",keys:["ArrowDown"],selector:".jp-Notebook:focus",title:"Move Cursor Down",category:"Notebook Cell Operations"}),Ht(Vt,"notebook:move-cursor-down-2",{command:"notebook:move-cursor-down",keys:["J"],selector:".jp-Notebook:focus",title:"Move Cursor Down",category:"Notebook Cell Operations"}),Ht(Vt,"notebook:move-cursor-up-1",{command:"notebook:move-cursor-up",keys:["ArrowUp"],selector:".jp-Notebook:focus",title:"Move Cursor Up",category:"Notebook Cell Operations"}),Ht(Vt,"notebook:move-cursor-up-2",{command:"notebook:move-cursor-up",keys:["K"],selector:".jp-Notebook:focus",title:"Move Cursor Up",category:"Notebook Cell Operations"}),Ht(Vt,"notebook:paste-cell-below",{command:"notebook:paste-cell-below",keys:["V"],selector:".jp-Notebook:focus",title:"Paste Cell(s) Below",category:"Notebook Cell Operations"}),Ht(Vt,"notebook:redo-cell-action",{command:"notebook:redo-cell-action",keys:["Shift Z"],selector:".jp-Notebook:focus",title:"Redo Cell Operation",category:"Notebook Cell Operations"}),Ht(Vt,"notebook:run-cell-1",{command:"notebook:run-cell",keys:["Ctrl Enter"],selector:".jp-Notebook:focus",title:"Run Cell(s)",category:"Notebook Cell Operations"}),Ht(Vt,"notebook:run-cell-2",{command:"notebook:run-cell",keys:["Ctrl Enter"],selector:".jp-Notebook.jp-mod-editMode",title:"Run Cell(s)",category:"Notebook Operations"}),Ht(Vt,"notebook:run-cell-and-insert-below-1",{command:"notebook:run-cell-and-insert-below",keys:["Alt Enter"],selector:".jp-Notebook:focus",title:"Run Cell(s) and Insert Below",category:"Notebook Cell Operations"}),Ht(Vt,"notebook:run-cell-and-insert-below-2",{command:"notebook:run-cell-and-insert-below",keys:["Alt Enter"],selector:".jp-Notebook.jp-mod-editMode",title:"Run Cell and Insert Below",category:"Notebook Operations"}),Ht(Vt,"notebook:run-cell-and-select-next",{command:"notebook:run-cell-and-select-next",keys:["Shift Enter"],selector:"[data-jp-code-runner]",title:"Run Cell and Select Next",category:"Notebook Operations"}),Ht(Vt,"notebook:run-in-console",{command:"notebook:run-in-console",keys:[""],selector:".jp-Notebook.jp-mod-editMode",title:"Run In Console",category:"Notebook Cell Operations"}),Ht(Vt,"notebook:select-all",{command:"notebook:select-all",keys:["Accel A"],selector:".jp-Notebook:focus",title:"Select All Cells",category:"Notebook Cell Operations"}),Ht(Vt,"notebook:split-cell-at-cursor",{command:"notebook:split-cell-at-cursor",keys:["Ctrl Shift -"],selector:".jp-Notebook.jp-mod-editMode",title:"Split Cell at Cursor",category:"Notebook Operations"}),Ht(Vt,"notebook:toggle-all-cell-line-numbers",{command:"notebook:toggle-all-cell-line-numbers",keys:["Shift L"],selector:".jp-Notebook:focus",title:"Toggle All Cell Line Numbers",category:"Notebook Cell Operations"}),Ht(Vt,"notebook:toggle-cell-line-numbers",{command:"notebook:toggle-cell-line-numbers",keys:["L"],selector:".jp-Notebook:focus",title:"Toggle Cell Line Numbers",category:"Notebook Cell Operations"}),Ht(Vt,"notebook:undo-cell-action",{command:"notebook:undo-cell-action",keys:["Z"],selector:".jp-Notebook:focus",title:"Undo Cell Operation",category:"Notebook Cell Operations"}),Ht(Vt,"settingeditor:debug",{command:"settingeditor:debug",keys:["Accel I"],selector:".jp-SettingEditor",title:"Open Debugger",category:"Settings Editor"}),Ht(Vt,"settingeditor:open",{command:"settingeditor:open",keys:["Accel ,"],selector:"body",title:"Open Settings Editor",category:"Settings Editor"}),Ht(Vt,"settingeditor:save",{command:"settingeditor:save",keys:["Accel S"],selector:".jp-SettingEditor",title:"Save Settings",category:"Settings Editor"}),Ht(Vt,"shortcutui:open-ui",{command:"shortcutui:open-ui",keys:["Ctrl Shift /"],selector:"body",title:"Open Keyboard Shortcut Settings",category:"Main Area"}),Ht(Vt,"tabmenu:activate-previously-used-tab",{command:"tabmenu:activate-previously-used-tab",keys:["Accel Shift '"],selector:"body",title:"Activate Previously Used Tab",category:"Main Area"}),Ht(Vt,"tooltip:dismiss-console",{command:"tooltip:dismiss",keys:["Escape"],selector:"body.jp-mod-tooltip .jp-CodeConsole-promptCell",title:"Dismiss Completer",category:"Tooltips"}),Ht(Vt,"tooltip:dismiss-notebook",{command:"tooltip:dismiss",keys:["Escape"],selector:"body.jp-mod-tooltip .jp-Notebook",title:"Dismiss Completer",category:"Tooltips"}),Ht(Vt,"tooltip:launch-console",{command:"tooltip:launch-console",keys:["Shift Tab"],selector:".jp-CodeConsole-promptCell .jp-InputArea-editor:not(.jp-mod-has-primary-selection):not(.jp-mod-in-leading-whitespace)",title:"Invoke Completer",category:"Tooltips"}),Ht(Vt,"tooltip:launch-file",{command:"tooltip:launch-file",keys:["Shift Tab"],selector:".jp-FileEditor",title:"Invoke Completer",category:"Tooltips"}),Ht(Vt,"tooltip:launch-notebook",{command:"tooltip:launch-notebook",keys:["Shift Tab"],selector:".jp-Notebook.jp-mod-editMode .jp-InputArea-editor:not(.jp-mod-has-primary-selection):not(.jp-mod-in-leading-whitespace)",title:"Invoke Completer",category:"Tooltips"}),Vt),qt=n(56),Jt=n(809),Yt=n(799),Xt=n.n(Yt),Zt={sanitize:function(e){var t=e;return t=de.defaultSanitizer.sanitize(t),t=Xt.a.sanitize(t)}};function $t(e,t,n){return($t="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=cn(e)););return e}(e,t);if(o){var a=Object.getOwnPropertyDescriptor(o,t);return a.get?a.get.call(n):a.value}})(e,t,n||e)}function Qt(e){return(Qt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function en(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function tn(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function nn(e,t,n){return t&&tn(e.prototype,t),n&&tn(e,n),e}function on(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&an(e,t)}function an(e,t){return(an=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function rn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=cn(e);if(t){var a=cn(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return sn(this,n)}}function sn(e,t){return!t||"object"!==Qt(t)&&"function"!=typeof t?ln(e):t}function ln(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function cn(e){return(cn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var un=window.CONFIG.prefix||"",dn=function(e){on(n,e);var t=rn(n);function n(){var e;return en(this,n),(e=t.apply(this,arguments)).interval=null,e}return nn(n,[{key:"onResize",value:function(){var e=.8*window.innerWidth,t=document.getElementById("editContainer");t?(e=.8*t.offsetWidth,this.node.style.width=e+"px",this.node.style.left=(t.offsetWidth-e)/2+"px"):(this.node.style.width=e+"px",this.node.style.left=(window.innerWidth-e)/2+"px")}},{key:"onAfterAttach",value:function(){var e=this;this.node.style.visibility="hidden",this.show(),setTimeout((function(){e.hide(),e.node.style.visibility="visible"}))}},{key:"focusInput",value:function(){var e=this;setTimeout((function(){e.isVisible&&document.activeElement!==e.inputNode&&(e.inputNode.focus(),e.focusInput())}))}},{key:"onAfterShow",value:function(){this.focusInput()}}]),n}(k.CommandPalette),pn="";pn=location.host.indexOf("tianchi.aliyun.com")>-1?"wss":"ws";var mn=function(e){on(n,e);var t=rn(n);function n(e,o){var a;return en(this,n),(a=t.call(this,e)).comp=o,a}return nn(n,[{key:"get",value:function(e,t){var n=this,o=e.replace(/\.ipynb$/,""),a=this.comp.props.readOnly,r=this.comp.props.parentProps.routeParams.userId,i=this.comp.props.parentProps.routeParams.id||"edit.ipynb";return this.comp.props.parentProps.notebook.getContent({lab:o,userId:r,id:i}).then((function(t){if(""==t||!t||t&&"ERROR"===t.code)return{message:"Cancel"};var r=t.content||{},i=/^(#+)\s+/,s=r.cells?r.cells:[];n.comp.props.model.set("cellCount",s.length);n.comp.props.model.unwrap("changeContentModal");if(r.metadata&&r.metadata.kernelspec){var l=r.metadata.kernelspec.language;n.comp.props.model.unwrap("inited")||(l="python"==l?"PYTHON3":l.toUpperCase(),n.comp.props.model.set("lang",l))}else r.metadata={"anaconda-cloud":{},kernelspec:{display_name:"Python 3",language:"python",name:"python3"}},n.comp.props.model.set("lang","PYTHON3");var c=document.getElementsByClassName("toc")[0];s.forEach((function(e){if(e.metadata=e.metadata||{},e.metadata.trusted=!1,a&&(e.metadata.editable=!1),"markdown"===e.cell_type&&a&&e.source&&c){var t=function(e){if(e&&i.test(e)&&0===e.indexOf("#")){var t=i.exec(e)[0].length-1,o=Zt.sanitize(e.split("# ")[1].trim().replace(/ /gi,"-")),a=encodeURIComponent(o),r=Zt.sanitize(e.split("# ")[1]),s=document.createElement("a");s.setAttribute("class","level_"+t),s.setAttribute("href","#"+a),s.setAttribute("title",o),s.innerHTML=r,c.appendChild(s),n.comp.props.model.unwrap("hasToc")||n.comp.props.model.set("hasToc",!0)}};"string"==typeof e.source?e.source.split("\n").filter(t):e.source.forEach((function(e){e.split("\n").filter(t)}))}}));var u=(r.metadata||{}).kernelspec;return n.comp.props.model.set("kernelspec",u),{name:o,path:e,format:"json",type:"file",writable:!0,created:"",last_modified:"",mimetype:"",content:t.content}})).catch((function(e){return n.comp.props.model.set("is500",!0),{message:"Cancel",content:'{"cells":[]}'}}))}},{key:"listCheckpoints",value:function(e){return Promise.resolve([])}},{key:"save",value:function(e,t){var n=this,o={cells:t.content.cells,metadata:t.content.metadata,nbformat:t.content.nbformat||4,nbformat_minor:t.content.nbformat_minor||2},a=this.comp.props.model.unwrap("changeContentModal"),r=this.comp.props.model.unwrap("content"),i=this.comp.props.model.unwrap("saveTitle");a&&r&&!i?o=r:i&&r&&r!==o&&this.comp.props.model.set("contentChange",!0);var s=this.comp.props.model.unwrap("lang"),l="R"===s?"r":"python";if(i&&o.metadata.kernelspec&&o.metadata.kernelspec.language!==l){var c="R"===s?"R":"Python 3",u="R"===s?"r":"python",d="R"===s?"ir":"python3";o.metadata.kernelspec={display_name:c,language:u,name:d}}var p=this.comp.props.parentProps.routeParams.lab,m=this.comp.props.parentProps.routeParams.id,f=this.comp.props.parentProps.routeParams.userId;return i?this.comp.props.saveContent(o).then((function(t){return""==t||!t||t&&null===t.data?{message:"Cancel"}:{path:e,format:"json",type:"file",writable:!0,created:"",last_modified:"",mimetype:"",content:o}})).catch((function(e){return Object.assign({err:e},{message:"Cancel"})})):this.comp.props.parentProps.notebook.saveContent({content:o,lab:p,id:m,userId:f}).then((function(t){return t&&t.path?(n.comp.props.model.set("contentUnSaved",!1),n.comp.props.model.set("content",null),be.a.success(Ze("notebook.edit.saveSuccess","保存成功")),{path:e,format:"json",type:"file",writable:!0,created:"",last_modified:"",mimetype:"",content:o}):(be.a.warn(Ze("notebook.edit.saveErr","保存失败，请稍后重试")),{message:"Cancel"})})).catch((function(e){return e&&"Payload Too Large"===e.message?_t.a.error({message:"".concat(Ze("notebook.edit.saveFail","保存失败")),description:"".concat(Ze("notebook.edit.des","亲~输出的结果已经超过限制了哦，无法保存，请精简输出吧o(*￣︶￣*)o"))}):be.a.warn(Ze("notebook.edit.saveErr","保存失败，请稍后重试")),Object.assign({err:e},{message:"Cancel"})}))}},{key:"createCheckpoint",value:function(e){return Promise.resolve({id:"",last_modified:""})}}]),n}(C.Drive),fn=function(e){on(n,e);var t=rn(n);function n(e,o,a){var r;return en(this,n),(r=t.call(this,e)).commands=o,r.compent=a,r}return nn(n,[{key:"createCellHeader",value:function(){return this.compent.props.readOnly?new k.Widget:new gn({commands:this.commands,compent:this.compent})}},{key:"createNotebook",value:function(e){return this.compent.props.readOnly?new hn(e):new bn(e)}},{key:"createCodeCell",value:function(e,t){return e.contentFactory||(e.contentFactory=this),new re(e)}},{key:"createMarkdownCell",value:function(e,t){return e.contentFactory||(e.contentFactory=this),new ce(e)}}]),n}(P.NotebookPanel.ContentFactory),hn=function(e){on(n,e);var t=rn(n);function n(){return en(this,n),t.apply(this,arguments)}return nn(n,[{key:"onAfterAttach",value:function(){}}]),n}(P.Notebook),bn=function(e){on(n,e);var t=rn(n);function n(){return en(this,n),t.apply(this,arguments)}return nn(n,[{key:"onAfterAttach",value:function(){$t(cn(n.prototype),"onAfterAttach",this).call(this,new F.Message("onAfterAttach")),this.node.addEventListener("focusin",(function(e){e.target&&e.target.closest(".md-Toolbar")&&(e.stopImmediatePropagation(),e.stopPropagation(),e.preventDefault())}),!0)}}]),n}(P.Notebook),gn=function(e){on(n,e);var t=rn(n);function n(e){var a;return en(this,n),(a=t.call(this,o.createElement(yn,Object.assign({},e)))).addClass("jp-Delete-Cell-Button"),a}return n}(de.ReactElementWidget),yn=function(e){on(n,e);var t=rn(n);function n(e){return en(this,n),t.call(this,e)}return nn(n,[{key:"render",value:function(){var e=this;return o.createElement("div",{onClick:function(t){e.props.commands.execute(yt.deleteCell),e.props.compent.props.model.set("contentUnSaved",!0)}},o.createElement(ge.a,{type:"close-circle",theme:"outlined"}))}}]),n}(o.Component),vn=function(e){on(n,e);var t=rn(n);function n(e){var o;return en(this,n),(o=t.call(this,e)).insertTable=function(){var e=o.props.editor,t=e.getOffsetAt(e.getCursorPosition());e.model.value.insert(t,"\n\n| Column 1 | Column 2 | Column 3 |\n| -------- | -------- | -------- |\n| Text     | Text     | Text     |\n\n"),e.focus()},o.insertMath=function(){var e=o.props.editor,t=e.getOffsetAt(e.getCursorPosition());e.model.value.insert(t,"$E=mc^2$"),e.focus()},o.userId=o.props.comp.props.parentProps.routeParams.userId,o}return nn(n,[{key:"render",value:function(){var e=this,t=window.CONFIG.prefix,n={name:"file",multiple:!1,showUploadList:!1,action:"".concat(t,"/proxy/tianchi/api/notebook/oss/uploadPublicImageFile"),data:{userId:e.userId},headers:Object.assign({},window.ajaxHeader),onChange:function(t){e.setState({editing:!0});var n=t.file.status;t.file.response;if("done"===n){var o=t.file.response.data;if(e.props.readOnly)return;var a=e.props.editor,r=a.getOffsetAt(a.getCursorPosition()),i="![]("+o+")";a.model.value.insert(r,i),a.focus()}}};return o.createElement("div",{className:"md-Toolbar"},o.createElement(Pt.a,Object.assign({style:{display:"inline-block"}},n),o.createElement("i",{className:"jp-Icon md-Icon-16 my-toolbaricon md-imageIcon"})),o.createElement("i",{className:"jp-Icon md-Icon-16 my-toolbaricon md-tableIcon",onClick:this.insertTable}),o.createElement("i",{className:"jp-Icon md-Icon-16 my-toolbaricon  md-mathIcon",onClick:this.insertMath}))}}]),n}(o.Component),kn=new Jt.a,Cn=function(e){on(n,e);var t=rn(n);function n(e){var a;return en(this,n),(a=t.call(this)).newInlineEditor=function(e){e.host.dataset.type="inline";var t=new A.CodeMirrorEditor(Object.assign(Object.assign({},e),{config:Object.assign(Object.assign({},a.inlineCodeMirrorConfig),e.config||{})}));if(t.editor.startOperation(),kn.pushTask((function(){t.editor.endOperation()})),e.model&&"markdown"===e.model.type){var n=document.createElement("div");e.host.insertBefore(n,t.editor.getWrapperElement()),r.render(o.createElement(vn,{editor:t,comp:a.comp}),n)}return model.unwrap("inited")&&model.set("contentUnSaved",!0),t.editor.on("change",(function(){a.comp.props.onChange(a.comp.state.notebook.context.model.toJSON())})),t},a.comp=e,a}return n}(A.CodeMirrorEditorFactory),wn={baseUrl:"http://".concat(location.host).concat(un,"/proxy/kernel"),wsUrl:"".concat(pn,"://").concat(location.host).concat(un,"/proxy/kernel"),init:{cache:"no-store",credentials:"same-origin",headers:Object.assign({"Content-Type":"application/json"},window.ajaxHeader)}};function Sn(e){var t=e.props.readOnly,n=C.ServerConnection.makeSettings(e.props.model.unwrap("serverSetting")||wn),o=new _({serverSettings:n,readOnly:t,model:e.props.model});return e.setState({manager:o}),o.contents.addDrive(new mn({name:"abc",serverSettings:n},e)),o.specsChanged.connect((function(t,n){e.props.model.set("specs",n)})),o.sessions.refreshSpecs(),o.ready.then((function(){e.setState({app:jn(o,e)})})),o}function jn(e,t){var n=new v.CommandRegistry,o=t.props.readOnly,a=function(e){n.processKeydownEvent(e)};!o&&document.addEventListener("keydown",a,!0);var r=new M.MathJaxTypesetter({url:"https://g.alicdn.com/tc/tianchi-com-assets/0.0.14/mathjax/MathJax.js",config:"TeX-AMS_CHTML-full,Safe"}),i=new L.RenderMimeRegistry({sanitizer:Zt,initialFactories:L.standardRendererFactories,latexTypesetter:r}),s=new G.DocumentRegistry,l=new R.DocumentManager({registry:s,manager:e,opener:{open:function(e){}}}),c=new P.NotebookModelFactory({}),u=new Cn(t).newInlineEditor,d=new fn({editorFactory:u},n,t),p=P.StaticNotebook.defaultEditorConfig;p.code.lineNumbers=!0,p.code.lineWrap="on",p.markdown.lineWrap="on",p.raw.lineWrap="on";var m=new P.NotebookWidgetFactory({name:"Notebook",modelName:"notebook",fileTypes:["notebook"],defaultFor:["notebook"],preferKernel:!1,canStartKernel:!o,readOnly:!!o,rendermime:i,contentFactory:d,editorConfig:p,mimeTypeService:A.editorServices.mimeTypeService,toolbarFactory:function(e){return Ut.getDefaultItems(e,n,t)}});s.addModelFactory(c),s.addWidgetFactory(m);var f=t.state.path,h=l.open(f),b=new dn({commands:n}),g=null;h.toolbar.addClass("nbToolbar");var y=h.context.session;if(y.ready.then((function(){t.props.getTime()})),t.setState({notebook:h,session:y}),!o){var w={};window.heartBeats=w;var S=function(){Object.keys(w).forEach((function(e){return clearInterval(w[e])})),w={}},j={};y.kernelChanged.connect((function(e,n){var o,a=n.newValue;o=a?a.id:"",S(),y&&!y.isDisposed&&o&&(w[o]=setInterval((function(){var e=y.kernel;if(e&&"dead"!=e.status){var t={msgType:"wsping",channel:"shell",session:e.clientId,msgId:"x-"+(new Date).getTime()},n=C.KernelMessage.createShellMessage(t,{});e.sendShellMessage(n,!1,!0).done.catch((function(e){}))}else S()}),1e4)),t.setState({kernel:a}),null==n.newValue&&e.status;var r=y.kernel;r&&(r.terminated.connect((function(){y.statusChanged.emit("dead")})),r.statusChanged.connect((function(e,n){"connected"==n&&(j.lastMessage=null,setTimeout((function(){r.isDisposed||"dead"===r.status||j.lastMessage||y.shutdown().then((function(){y.restart().then((function(){t.props.getTime()}))}))}),5e3))})),r.anyMessage.connect((function(e,t){var n=t.direction,o=t.msg,a=((o=o||{}).header||{}).msg_type;o.content;"wsping"!==a&&("send"!=n||j.interval?(j.lastMessage=o,clearInterval(j.interval),j.interval=0):j.interval=setTimeout((function(){j.interval=0,be.a.warn("此kernel繁忙，请检查是否已有代码正在运行，或断开重连kernel~",5)}),3e3))})))})),y.statusChanged.connect((function(e,n){t.setState({sessionStatus:n}),t.props.model.set("status",n),t.props.sendStatus&&t.props.sendStatus(n)})),h.model.stateChanged.connect((function(e,n){if("dirty"===n.name){var o=t.props.model.unwrap("changeContentModal");!n.newValue||n.oldValue||o||t.props.onChange(t.state.notebook.context.model.toJSON())}}));var O=h.content.activeCell&&h.content.activeCell.editor,E=new D.CompleterModel;g=new D.Completer({editor:O,model:E});var I=new D.KernelConnector({session:h.session}),N=new D.CompletionHandler({completer:g,connector:I});N.editor=O,g.visibilityChanged.connect((function(){g.update()})),h.content.activeCellChanged.connect((function(e,t){N.editor=t&&t.editor})),g.hide(),function(e,t,n,o,a,r){var i=this,s=function(e){return n},l=function(e){var t=s();if(t)return t.content.activeCell&&t.content.activeCell.editor},c=function(){return!0};e.addCommand(yt.save,{label:function(){return"Save"},caption:"Save document",isEnabled:function(e){var t=s().context;return!(!(t&&t.contentsModel&&t.contentsModel.writable)||t.model.readOnly)},execute:function(e){var t=s().context;return t?(r&&r.set("saveTitle",!0),t.save()):Promise.resolve(!1)}}),void 0!==a&&e.addCommand(yt.paletteActivate,{label:"Activate Command Palette",execute:function(e){a.show(),a.activate()}}),void 0!==o&&(e.addCommand(yt.invoke,{label:"Completer: Invoke",execute:function(e){var t=s();if(t&&t.context){var n=t.context.session;n&&!n.isDisposed&&n.kernel&&n.kernel.id?o.invoke():be.a.warn(Ze("notebook.edit.warnConnectKernel","连接kernel后，可以进行代码补全哦~"),4)}}}),e.addCommand(yt.invokeNext,{label:"Completer: Move to next item",execute:function(){o.completer._cycle("down")}}),e.addCommand(yt.invokePrev,{label:"Completer: Move to prev item",execute:function(){o.completer._cycle("up")}}),e.addCommand(yt.select,{label:"Completer: Select",execute:function(){return o.completer.selectActive()}}),e.addCommand(yt.invokeNotebook,{execute:function(t){var n=s();if(n)return e.execute(yt.invoke,{id:n.id})}}),e.addCommand(yt.selectNotebook,{execute:function(t){var n=s(),o=n&&n.id;if(o)return e.execute(yt.select,{id:o})}}),e.addKeyBinding({command:yt.invoke,keys:["Tab"],selector:".jp-Notebook .jp-mod-completer-active"}),e.addKeyBinding({command:yt.invokeNext,keys:["Ctrl N"],selector:".jp-Notebook .jp-mod-completer-active"}),e.addKeyBinding({command:yt.invokePrev,keys:["Ctrl P"],selector:".jp-Notebook .jp-mod-completer-active"})),e.addCommand(yt.find,{label:"Find...",execute:function(e){var t=l();t&&t.execCommand("find")},isEnabled:c}),e.addCommand(yt.findAndReplace,{label:"Find and Replace...",execute:function(e){var t=l();t&&t.execCommand("replace")},isEnabled:c}),e.addCommand(yt.goToLine,{label:"Go to Line...",execute:function(e){var t=l();t&&t.execCommand("jumpToLine")},isEnabled:c}),e.addCommand(yt.runAndAdvance,{label:"Run Selected Cells",execute:function(e){var t=s();if(t){var n=t.context,o=t.content;return o&&r.set("activeCell",{id:o.activeCell.model.id,type:o.activeCell.model.type}),P.NotebookActions.runAndAdvance(o,n.session)}},isEnabled:c}),e.addCommand(yt.run,{label:"Run Selected Cells and Don't Advance",execute:function(e){var t=s();if(t){var n=t.context,o=t.content;return o&&r.set("activeCell",{id:o.activeCell.model.id,type:o.activeCell.model.type}),P.NotebookActions.run(o,n.session)}},isEnabled:c}),e.addCommand(yt.runAndInsert,{label:"Run Selected Cells and Insert Below",execute:function(e){var t=s();if(t){var n=t.context,o=t.content;return o&&r.set("activeCell",{id:o.activeCell.model.id,type:o.activeCell.model.type}),P.NotebookActions.runAndInsert(o,n.session)}},isEnabled:c}),e.addCommand(yt.runInConsole,{label:"Run Selected Text or Current Line in Console",execute:function(t){return Dt(i,void 0,void 0,regeneratorRuntime.mark((function n(){var o,a,r,i,l,c,u,d,p,m,f,h,b;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o=s(Object.assign({activate:!1},t))){n.next=3;break}return n.abrupt("return");case 3:if(a=o.context,r=o.content,i=r.activeCell,l=a.path,i&&"code"===i.model.type){n.next=8;break}return n.abrupt("return");case 8:if(u=i.editor,d=u.getSelection(),p=d.start,m=d.end,p.column!==m.column||p.line!==m.line?(f=u.getOffsetAt(d.start),h=u.getOffsetAt(d.end),c=u.model.value.text.substring(f,h)):(c=u.getLine(d.start.line),(b=u.getCursorPosition()).line+1!==u.lineCount&&u.setCursorPosition({line:b.line+1,column:b.column})),c){n.next=15;break}return n.abrupt("return");case 15:return n.next=17,e.execute("console:open",{activate:!1,insertMode:"split-bottom",path:l});case 17:return n.next=19,e.execute("console:inject",{activate:!1,code:c,path:l});case 19:case"end":return n.stop()}}),n)})))},isEnabled:c}),e.addCommand(yt.runAll,{label:"Run All Cells",execute:function(e){var t=s();if(t){var n=t.context,o=t.content;return o&&r.set("activeCell",{id:o.activeCell.model.id,type:o.activeCell.model.type}),P.NotebookActions.runAll(o,n.session)}},isEnabled:c}),e.addCommand(yt.runAllAbove,{label:"Run All Above Selected Cell",execute:function(e){var t=s();if(t){var n=t.context,o=t.content;return o&&r.set("activeCell",{id:o.activeCell.model.id,type:o.activeCell.model.type}),P.NotebookActions.runAllAbove(o,n.session)}},isEnabled:function(){return 0!==n.content.activeCellIndex}}),e.addCommand(yt.runAllBelow,{label:"Run Selected Cell and All Below",execute:function(e){var t=s();if(t){var n=t.context,o=t.content;return o&&r.set("activeCell",{id:o.activeCell.model.id,type:o.activeCell.model.type}),P.NotebookActions.runAllBelow(o,n.session)}},isEnabled:function(){return n.content.activeCellIndex!==n.content.widgets.length-1}}),e.addCommand(yt.restart,{label:"Restart Kernel…",execute:function(e){var t=s();if(t)return t.session.restart()},isEnabled:c}),e.addCommand(yt.closeAndShutdown,{label:"Close and Shutdown",execute:function(e){var t=s();if(t){var n=t.title.label;return Object(de.showDialog)({title:"Shutdown the notebook?",body:'Are you sure you want to close "'.concat(n,'"?'),buttons:[de.Dialog.cancelButton(),de.Dialog.warnButton()]}).then((function(e){if(e.button.accept)return t.context.session.shutdown().then((function(){t.dispose()}))}))}},isEnabled:c}),e.addCommand(yt.trust,{label:function(){return"Trust Notebook"},execute:function(e){var t=s();if(t){var n=t.context,o=t.content;return P.NotebookActions.trust(o).then((function(){return n.save()}))}},isEnabled:c}),e.addCommand(yt.exportToFormat,{label:function(e){var t=e.label;return(e.isPalette?"Export Notebook to ":"")+t},execute:function(e){var n=s();if(n){var o=U.URLExt.encodeParts(n.context.path),a=U.URLExt.join(t.serverSettings.baseUrl,"nbconvert",e.format,o)+"?download=true",r=window.open("","_blank"),i=n.context;return i.model.dirty&&!i.model.readOnly?i.save().then((function(){r.location.assign(a)})):new Promise((function(e){r.location.assign(a),e(void 0)}))}},isEnabled:c}),e.addCommand(yt.restartClear,{label:"Restart Kernel and Clear All Outputs…",execute:function(e){var t=s();if(t){var n=t.content;return t.session.restart().then((function(){P.NotebookActions.clearAllOutputs(n)}))}},isEnabled:c}),e.addCommand(yt.restartRunAll,{label:"Restart Kernel and Run All Cells…",execute:function(e){var t=s();if(t){var n=t.context,o=t.content;return t.session.restart().then((function(e){return e&&(o&&r.set("activeCell",{id:o.activeCell.model.id,type:o.activeCell.model.type}),P.NotebookActions.runAll(o,n.session)),e}))}},isEnabled:c}),e.addCommand(yt.clearAllOutputs,{label:"Clear All Outputs",execute:function(e){var t=s();if(t)return P.NotebookActions.clearAllOutputs(t.content)},isEnabled:c}),e.addCommand(yt.clearOutputs,{label:"Clear Outputs",execute:function(e){var t=s();if(t)return P.NotebookActions.clearOutputs(t.content)},isEnabled:c}),e.addCommand(yt.interrupt,{label:"Interrupt Kernel",execute:function(e){var t=s();if(t){var n=t.context.session.kernel;return n?n.interrupt():void 0}},isEnabled:c}),e.addCommand(yt.toCode,{label:"Change to Code Cell Type",execute:function(e){var t=s();if(t)return P.NotebookActions.changeCellType(t.content,"code")},isEnabled:c}),e.addCommand(yt.toMarkdown,{label:"Change to Markdown Cell Type",execute:function(e){var t=s();if(t)return P.NotebookActions.changeCellType(t.content,"markdown")},isEnabled:c}),e.addCommand(yt.toRaw,{label:"Change to Raw Cell Type",execute:function(e){var t=s();if(t)return P.NotebookActions.changeCellType(t.content,"raw")},isEnabled:c}),e.addCommand(yt.cut,{label:"Cut Cells",execute:function(e){var t=s();if(t)return P.NotebookActions.cut(t.content)},isEnabled:c}),e.addCommand(yt.copy,{label:"Copy Cells",execute:function(e){var t=s();if(t)return P.NotebookActions.copy(t.content)},isEnabled:c}),e.addCommand(yt.pasteBelow,{label:"Paste Cells Below",execute:function(e){var t=s();if(t)return P.NotebookActions.paste(t.content,"below")},isEnabled:c}),e.addCommand(yt.pasteAbove,{label:"Paste Cells Above",execute:function(e){var t=s();if(t)return P.NotebookActions.paste(t.content,"above")},isEnabled:c}),e.addCommand(yt.pasteAndReplace,{label:"Paste Cells and Replace",execute:function(e){var t=s();if(t)return P.NotebookActions.paste(t.content,"replace")},isEnabled:c}),e.addCommand(yt.deleteCell,{label:"Delete Cells",execute:function(e){var t=s();if(t)return P.NotebookActions.deleteCells(t.content)},isEnabled:c}),e.addCommand(yt.showOrhideOutput,{label:"Show and hide output",execute:function(e){var t=s();if(t){var n=t.content.activeCell;n&&"outputHidden"in n&&(n.outputHidden=!n.outputHidden)}},isEnabled:c}),e.addCommand(yt.split,{label:"Split Cell",execute:function(e){var t=s();if(t)return P.NotebookActions.splitCell(t.content)},isEnabled:c}),e.addCommand(yt.merge,{label:"Merge Selected Cells",execute:function(e){var t=s();if(t)return P.NotebookActions.mergeCells(t.content)},isEnabled:c}),e.addCommand(yt.insertAbove,{label:"Insert Cell Above",execute:function(e){var t=s();if(t)return P.NotebookActions.insertAbove(t.content)},isEnabled:c}),e.addCommand(yt.insertBelow,{label:"Insert Cell Below",execute:function(e){var t=s();if(t)return P.NotebookActions.insertBelow(t.content)},isEnabled:c}),e.addCommand(yt.insertMarkdownBelow,{label:"Insert Markdown Below",execute:function(e){var t=s();t&&(P.NotebookActions.insertBelow(t.content),P.NotebookActions.changeCellType(t.content,"markdown"))},isEnabled:c}),e.addCommand(yt.selectAbove,{label:"Select Cell Above",execute:function(e){var t=s();if(t)return P.NotebookActions.selectAbove(t.content)},isEnabled:c}),e.addCommand(yt.selectBelow,{label:"Select Cell Below",execute:function(e){var t=s();if(t)return P.NotebookActions.selectBelow(t.content)},isEnabled:c}),e.addCommand(yt.extendAbove,{label:"Extend Selection Above",execute:function(e){var t=s();if(t)return P.NotebookActions.extendSelectionAbove(t.content)},isEnabled:c}),e.addCommand(yt.extendBelow,{label:"Extend Selection Below",execute:function(e){var t=s();if(t)return P.NotebookActions.extendSelectionBelow(t.content)},isEnabled:c}),e.addCommand(yt.selectAll,{label:"Select All Cells",execute:function(e){var t=s();if(t)return P.NotebookActions.selectAll(t.content)},isEnabled:c}),e.addCommand(yt.deselectAll,{label:"Deselect All Cells",execute:function(e){var t=s();if(t)return P.NotebookActions.deselectAll(t.content)},isEnabled:c}),e.addCommand(yt.moveUp,{label:"Move Cells Up",execute:function(e){var t=s();if(t)return P.NotebookActions.moveUp(t.content)},isEnabled:c}),e.addCommand(yt.moveDown,{label:"Move Cells Down",execute:function(e){var t=s();if(t)return P.NotebookActions.moveDown(t.content)},isEnabled:c}),e.addCommand(yt.toggleAllLines,{label:"Toggle All Line Numbers",execute:function(e){var t=s();if(t)return P.NotebookActions.toggleAllLineNumbers(t.content)},isEnabled:c}),e.addCommand(yt.commandMode,{label:"Enter Command Mode",execute:function(e){var t=s();t&&(t.content.mode="command")},isEnabled:c}),e.addCommand(yt.editMode,{label:"Enter Edit Mode",execute:function(e){var t=s();t&&(t.content.mode="edit")},isEnabled:c}),e.addCommand(yt.undoCellAction,{label:"Undo Cell Operation",execute:function(e){var t=s();if(t)return P.NotebookActions.undo(t.content)},isEnabled:c}),e.addCommand(yt.redoCellAction,{label:"Redo Cell Operation",execute:function(e){var t=s();if(t)return P.NotebookActions.redo(t.content)},isEnabled:c}),e.addCommand(yt.changeKernel,{label:"Change Kernel…",execute:function(e){var t=s();if(t)return t.context.session.selectKernel()},isEnabled:c}),e.addCommand(yt.reconnectToKernel,{label:"Reconnect To Kernel",execute:function(e){var t=s();if(t){var n=t.context.session.kernel;return n?n.reconnect():void 0}},isEnabled:c}),e.addCommand(yt.markdown1,{label:"Change to Heading 1",execute:function(e){var t=s();if(t)return P.NotebookActions.setMarkdownHeader(t.content,1)},isEnabled:c}),e.addCommand(yt.markdown2,{label:"Change to Heading 2",execute:function(e){var t=s();if(t)return P.NotebookActions.setMarkdownHeader(t.content,2)},isEnabled:c}),e.addCommand(yt.markdown3,{label:"Change to Heading 3",execute:function(e){var t=s();if(t)return P.NotebookActions.setMarkdownHeader(t.content,3)},isEnabled:c}),e.addCommand(yt.markdown4,{label:"Change to Heading 4",execute:function(e){var t=s();if(t)return P.NotebookActions.setMarkdownHeader(t.content,4)},isEnabled:c}),e.addCommand(yt.markdown5,{label:"Change to Heading 5",execute:function(e){var t=s();if(t)return P.NotebookActions.setMarkdownHeader(t.content,5)},isEnabled:c}),e.addCommand(yt.markdown6,{label:"Change to Heading 6",execute:function(e){var t=s();if(t)return P.NotebookActions.setMarkdownHeader(t.content,6)},isEnabled:c}),e.addCommand(yt.hideCode,{label:"Collapse Selected Code",execute:function(e){var t=s();if(t)return P.NotebookActions.hideCode(t.content)},isEnabled:c}),e.addCommand(yt.showCode,{label:"Expand Selected Code",execute:function(e){var t=s();if(t)return P.NotebookActions.showCode(t.content)},isEnabled:c}),e.addCommand(yt.hideAllCode,{label:"Collapse All Code",execute:function(e){var t=s();if(t)return P.NotebookActions.hideAllCode(t.content)},isEnabled:c}),e.addCommand(yt.showAllCode,{label:"Expand All Code",execute:function(e){var t=s();if(t)return P.NotebookActions.showAllCode(t.content)},isEnabled:c}),e.addCommand(yt.hideOutput,{label:"Collapse Selected Outputs",execute:function(e){var t=s();if(t)return P.NotebookActions.hideOutput(t.content)},isEnabled:c}),e.addCommand(yt.showOutput,{label:"Expand Selected Outputs",execute:function(e){var t=s();if(t)return P.NotebookActions.showOutput(t.content)},isEnabled:c}),e.addCommand(yt.hideAllOutputs,{label:"Collapse All Outputs",execute:function(e){var t=s();if(t)return P.NotebookActions.hideAllOutputs(t.content)},isEnabled:c}),e.addCommand(yt.showAllOutputs,{label:"Expand All Outputs",execute:function(e){var t=s();if(t)return P.NotebookActions.showAllOutputs(t.content)},isEnabled:c}),e.addCommand(yt.enableOutputScrolling,{label:"Enable Scrolling for Outputs",execute:function(e){var t=s();if(t)return P.NotebookActions.enableOutputScrolling(t.content)},isEnabled:c}),e.addCommand(yt.disableOutputScrolling,{label:"Disable Scrolling for Outputs",execute:function(e){var t=s();if(t)return P.NotebookActions.disableOutputScrolling(t.content)},isEnabled:c}),e.addCommand(yt.saveWithView,{label:"Save Notebook with View State",execute:function(t){var n=s();n&&(P.NotebookActions.persistViewState(n.content),e.execute("docmanager:save"))},isEnabled:function(t){return e.isEnabled("docmanager:save",t)}})}(n,e,h,N,b,t.props.model),function(e,t){var n="Notebook Operations";[yt.interrupt,yt.restart,yt.restartClear,yt.restartRunAll,yt.runAll,yt.runAllAbove,yt.runAllBelow,yt.selectAll,yt.deselectAll,yt.clearAllOutputs,yt.toggleAllLines,yt.editMode,yt.commandMode,yt.changeKernel,yt.reconnectToKernel,yt.createConsole,yt.closeAndShutdown,yt.trust,yt.save,yt.saveWithView].forEach((function(t){e.addItem({command:t,category:n})})),e.addItem({command:yt.createNew,category:n,args:{isPalette:!0}}),n="Notebook Cell Operations",[yt.run,yt.runAndAdvance,yt.runAndInsert,yt.runInConsole,yt.clearOutputs,yt.toCode,yt.toMarkdown,yt.toRaw,yt.cut,yt.copy,yt.pasteBelow,yt.pasteAbove,yt.pasteAndReplace,yt.deleteCell,yt.split,yt.merge,yt.insertAbove,yt.insertBelow,yt.insertMarkdownBelow,yt.selectAbove,yt.selectBelow,yt.extendAbove,yt.extendBelow,yt.moveDown,yt.moveUp,yt.undoCellAction,yt.redoCellAction,yt.markdown1,yt.markdown2,yt.markdown3,yt.markdown4,yt.markdown5,yt.markdown6,yt.hideCode,yt.showCode,yt.hideAllCode,yt.showAllCode,yt.hideOutput,yt.showOutput,yt.hideAllOutputs,yt.showAllOutputs,yt.enableOutputScrolling,yt.disableOutputScrolling].forEach((function(t){e.addItem({command:t,category:n})}))}(b),b.node.addEventListener("keydown",(function(e){27===e.keyCode&&(e.preventDefault(),e.stopPropagation(),b.hide())}));b.node.addEventListener("blur",(function(e){e.relatedTarget}),!0),n.commandExecuted.connect((function(e,n){if(n.id!==yt.paletteActivate&&(b.isVisible&&b.hide(),/notebook:run/.test(n.id))){if("code"!=(t.props.model.unwrap("activeCell")||{}).type||t.props.model.unwrap("poweron"))return;y.kernel&&"dead"!=y.kernel||mt.restartSession(t,!0).then((function(){P.NotebookActions.run(h.content,y)}))}})),Object.keys(Wt).map((function(e){return n.addKeyBinding(Wt[e])}))}var x=new k.BoxPanel({alignment:"start",direction:"top-to-bottom",spacing:0});x.id="root-panel",x.node.addEventListener("click",(function(e){var t=e.target;t&&!b.node.contains(t)&&(t.classList.contains("jp-ShotcustIcon")?b.isVisible?b.hide():b.show():b.isVisible&&b.hide())}));var T=new k.Panel({});T.id="top-panel",T.addWidget(new St({model:t.props.model,releaseVersion:t.props.releaseVersion,session:t.state.session,changeContentModal:t.props.changeModal,panel:h.content,sendSecond:t.props.sendSecond,isGpu:t.props.isGpuOpen}));var _=new k.StackedPanel;k.BoxPanel.setStretch(T,0),k.BoxPanel.setStretch(_,1);var F=[];function B(){var e=K.tabBars().next();F.length>1?(e.show(),document.getElementById("main-panel")&&(document.getElementById("main-panel").style.marginTop="17px",document.getElementById("main-panel").style.maxHeight="calc(100% - 48px)"),_.title.label=t.props.model.unwrap("title")):(e.hide(),document.getElementById("main-panel")&&(document.getElementById("main-panel").style.marginTop="0px",document.getElementById("main-panel").style.maxHeight="unset"))}function V(e){if(F.indexOf(e)>-1)return K.activateWidget(e),void e;-1===F.indexOf(e)&&(K.addWidget(e,{mode:"tab-after"}),F.push(e)),B(),K.activateWidget(e),e,e.disposed.connect((function(e){var t=F.indexOf(e);F.splice(t,1),B()}))}var K=new k.DockPanel;K.spacing=8,k.BoxPanel.setStretch(K,1),document.addEventListener("focus",(function(e){for(var t=0;t<F.length;t++){var n=F[t];if(n.node.contains(e.target)){n;break}}})),V(_),_.id="main-panel",_.title.label="Notebook",_.title.iconClass="jp-NotebookIcon",_.addWidget(h),o||(_.addWidget(b),k.Widget.attach(g,document.body)),x.addWidget(T),x.addWidget(K),k.Widget.attach(x,window.el),h.content.node.removeEventListener("contextmenu",h.content,!0),h.revealed.then((function(){}));var z=function(){x.update()};window.addEventListener("resize",z);var H=t.props.model;return H.set("rootPanel",H.of(x)),H.set("mainPanel",H.of(_)),H.set("dockPanel",H.of(K)),H.set("addDockWidget",H.of(V)),new qt.DisposableDelegate((function(){o||(b.node.removeEventListener("blur",blurHandler,!0),document.removeEventListener("keydown",a,!0)),window.removeEventListener("resize",z),l.dispose(),e.dispose()}))}var On=function(e){on(n,e);var t=rn(n);function n(e){var o;en(this,n);for(var a=arguments.length,r=new Array(a>1?a-1:0),i=1;i<a;i++)r[i-1]=arguments[i];return(o=t.call.apply(t,[this,e].concat(r))).state={path:"abc:"+o.props.parentProps.routeParams.lab+".ipynb",toc:!1,hasToc:!1,tocFloat:!1},o.handleTocClick=o.handleTocClick.bind(ln(o)),o}return nn(n,[{key:"componentDidMount",value:function(){var e,t=this,n=this.props.model;n.change.map((function(n){n.type;var o=n.path,a=n.value;/serverSetting|hasToc/.test(o)&&("serverSetting"===o[0]?e?t.changeKernel(a.unwrap()):e=Sn(t):"hasToc"===o[0]&&t.setState({hasToc:a.unwrap()},(function(){t.state.hasToc&&t.setState({toc:!0},(function(){var e=t.props.model.unwrap("rootPanel");e&&e.update()}))})))})),window.com=this,n.set("com",n.of(this))}},{key:"closeApp",value:function(e){var t=this.state,n=t.app,o=t.notebook;return!(!e&&o.context.model.dirty)&&(n?(n.dispose(),!0):void 0)}},{key:"restartApp",value:function(){this.closeApp(!0)&&Sn(this)}},{key:"changeKernel",value:function(e){var t=this,n=this.state,o=n.manager,a=n.session;n.path,n.notebook;if(o&&!Tt()(e,o.serverSettings))if(Object.assign(o.serverSettings,e),a){(a.kernel&&"dead"!=a.kernel.status?a.kernel.shutdown().catch((function(e){a.kernel&&!a.kernel.isDisposed&&a.kernel.statusChanged.emit("dead")})):Promise.resolve()).then((function(){(a&&"dead"!=a.status?a.shutdown().catch((function(e){a.isDisposed||a.statusChanged.emit("dead")})):Promise.resolve()).then((function(){o.sessions.refreshRunning().then((function(){if("inthequeue"!=t.props.model.unwrap("status")&&"dead"!=a.status){var e=(t.props.model.unwrap("kernelspec")||{}).name;a.changeKernel({name:e}).then((function(){t.props.getTime()}),(function(e){}))}}))}))}))}else clearTimeout(this._changeKernelInterval),this._changeKernelInterval=setTimeout((function(){t.changeKernel(e)}),200)}},{key:"handleTocClick",value:function(){var e=this;this.setState({toc:!this.state.toc},(function(){e.props.model.unwrap("rootPanel").update()}))}},{key:"render",value:function(){var e=this.state.toc?" toc-wrap":"toc-wrap  toc-float toc-off";return o.createElement("div",{ref:function(e){return window.el=e},style:{height:"100%"},className:this.props.readOnly&&this.state.toc?"warpper":""},this.props.readOnly?o.createElement("div",{className:e},o.createElement("div",{className:"toc-head",onClick:this.handleTocClick},Ze("notebook.edit.catalog","目录")," ",o.createElement(ge.a,{type:this.state.toc?"up-circle":"down-circle"})),o.createElement("div",{className:"toc"}),!(this.state.hasToc||!this.state.toc)&&o.createElement("div",{className:"toc-empty"},o.createElement("span",{className:"level_1"},Ze("notebook.edit.catalogEmpty","目录为空")))):"")}}]),n}(o.Component),En=n(1616),In=n(1611),Nn=n(1613),xn=n(229),Tn=n(1617),_n=(n(1483),n(327)),Pn=n(803),Dn=n(804),An=n(232),Rn=n(1612);function Gn(){var e=Fn(["\n  position: absolute;\n"]);return Gn=function(){return e},e}function Ln(){var e=Fn(["\n    position: absolute;\n  "]);return Ln=function(){return e},e}function Mn(){var e=Fn(["\n    position: absolute;\n  "]);return Mn=function(){return e},e}function Fn(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function Bn(e){return(Bn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Un(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Vn(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Kn(e,t,n){return(Kn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=qn(e)););return e}(e,t);if(o){var a=Object.getOwnPropertyDescriptor(o,t);return a.get?a.get.call(n):a.value}})(e,t,n||e)}function zn(e,t){return(zn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Hn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=qn(e);if(t){var a=qn(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return Wn(this,n)}}function Wn(e,t){return!t||"object"!==Bn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function qn(e){return(qn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Jn,Yn,Xn,Zn=Ce.a.confirm,$n=null,Qn=null,eo=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&zn(e,t)}(r,e);var t,n,o,a=Hn(r);function r(){return Un(this,r),a.apply(this,arguments)}return t=r,(n=[{key:"openOrReveal",value:function(e,t,n,o){var a=e.split("/").pop()||"",i=a.split(".").slice(-1).toString();if(!(".jpeg|.gif|.jpg|.png|.bmp|.pic|".indexOf(i)>-1))return!i||Dn.indexOf(i.toLowerCase())>-1?void Ce.a.warning({title:"File Load Error for ".concat(a),content:"Notebook is unable to open this file type."}):Kn(qn(r.prototype),"openOrReveal",this).call(this,e,t,n,o);var s=window.open();Xn(e,i).then((function(e){if(e&&e.content)try{for(var t=e.content,n=atob(t),o=n.length,a=new Uint8Array(o);o--;)a[o]=n.charCodeAt(o);var r=new Blob([a],{type:e.mimetype});s.location=URL.createObjectURL(r)}catch(e){s.close()}}))}}])&&Vn(t.prototype,n),o&&Vn(t,o),r}(R.DocumentManager);function to(e,t,n,a,r){Jn=a,Xn=r;var i=(Yn=n.model).unwrap("addDockWidget"),s=Yn.unwrap("serverSetting");if(s){var l=window.CONFIG.prefix||"";s.baseUrl=l+"/proxy/filemanager"}else s={baseUrl:"http://localhost:8888",init:{headers:{Authorization:"token 4785af3506742d5b827001ff49f33fe2297013c6aa814d67"}}};var c=new _({readOnly:!0,serverSettings:C.ServerConnection.makeSettings(s)}),u=new k.Widget;return c.ready.then((function(){u=function(e,t){var n=[],a=t.opener||{open:function(e){t.model;-1===n.indexOf(e)&&(y.addWidget(e,{mode:"tab-after"}),n.push(e)),y.activateWidget(e),e,e.disposed.connect((function(e){var t=n.indexOf(e);n.splice(t,1)}))}},r=new G.DocumentRegistry,i=new eo({registry:r,manager:e,opener:a}),s={factoryService:new A.CodeMirrorEditorFactory,mimeTypeService:new A.CodeMirrorMimeTypeService},l=new Pn.FileEditorFactory({editorServices:s,factoryOptions:{name:"Editor",modelName:"text",fileTypes:["*"],defaultFor:["*"],preferKernel:!1,canStartKernel:!0}});r.addWidgetFactory(l);var c=new v.CommandRegistry,u=new _n.FileBrowserModel({manager:i}),d=new _n.FileBrowser({id:"filebrowser",commands:c,model:u}),p=d.toolbar.children();p.next(),p.next(),p.next().dispose(),window.fbModel=u;var m=new de.ToolbarButton({iconClassName:"fb-newFile jp-Icon jp-Icon-16",tooltip:"New File",onClick:function(){Zn({width:"420px",title:"New file name and type",content:o.createElement(Rn.a,{placeholder:"Please enter the file name and file type",id:"newFilename"}),onOk:function(){var e=document.getElementById("newFilename");if(e){var t=e.value,n=(t.indexOf("."),t.lastIndexOf("."));if(t&&-1===t.indexOf("."))return void Ce.a.error({width:"420px",title:"File name error",content:"The file name is incorrect. Please enter the file type."});if(function(e){if(e.match(/[^\u0020-\u007E\u00A0-\u00BE\u2E80-\uA4CF\uF900-\uFAFF\uFE30-\uFE4F\uFF00-\uFFEF\u0080-\u009F\u2000-\u201f\u2026\u2022\u20ac\r\n]/g))return!0;return!1}(t))return void Ce.a.error({width:"420px",title:"File name error",content:"The file name is incorrect. File names cannot contain special characters."});var o=t.substring(0,n),a=t.substring(n+1);if(f(o))return void Ce.a.error({width:"420px",title:"File name error",content:"The file name is incorrect. File name cannot be empty."});if(f(a))return void Ce.a.error({width:"420px",title:"File name error",content:"The file name is incorrect. File type cannot be empty."});if(".jpeg|.gif|.jpg|.png|.bmp|.pic|".indexOf(a)>-1)return void Ce.a.error({width:"420px",title:"File name error",content:"The file name is incorrect. File type cannot be images."});i.newUntitled({filename:o,ext:a,type:"file",path:u.path}).then((function(e){i.open(e.path)}))}},onCancel:function(){}})}});function f(e){if(""==e)return!0;return new RegExp("^[ ]+$").test(e)}d.toolbar.insertItem(2,"create",m);var h=new de.ToolbarButton({iconClassName:"jp-SubmitIcon jp-Icon jp-Icon-16",tooltip:"Submit documents to the competition",onClick:function(){var e,t,n,o=0,a=0;Object(j.each)(d.selectedItems(),(function(r){t=r.type,n=r.name,e=r.path,a=r.size,o+=1})),o?o>1?Ce.a.warning({title:"No submission",content:"Only one file can be submitted at a time"}):"directory"!==t?Jn&&Jn(e,n,a):Ce.a.warning({title:"No submission",content:"No folders can be submitted"}):Ce.a.warning({title:"No submission",content:"Please select a file"})}});d.toolbar.insertItem(3,"submitor",h);var b=Object(j.toArray)(d.toolbar.children());d.toolbar.insertItem(2,"directory",b[0]);var g=new k.SplitPanel;g.id="main";var y=new k.DockPanel;g.addWidget(y),k.SplitPanel.setStretch(y,1),y.spacing=8,document.addEventListener("focus",(function(e){for(var t=0;t<n.length;t++){var o=n[t];if(o.node.contains(e.target)){o;break}}})),c.addCommand("file-open",{label:"Open",icon:"fa fa-folder-open-o",mnemonic:0,execute:function(){Object(j.each)(d.selectedItems(),(function(e){var t,n,o,a,r,s;"directory"!==e.type?i.openOrReveal(e.path):O&&(n="keydown",o=13,r=(t=O).ownerDocument,s=r.defaultView||r.parentWindow,r.createEvent?(s.KeyEvent?(a=r.createEvent("KeyEvents")).initKeyEvent(n,!0,!0,s,!1,!1,!1,!1,o,0):(a=r.createEvent("UIEvents"),Object.defineProperty(a,"keyCode",{get:function(){return this.keyCodeVal}}),Object.defineProperty(a,"which",{get:function(){return this.keyCodeVal}}),a.initUIEvent(n,!0,!0,s,1),a.keyCodeVal=o,a.keyCode),t.dispatchEvent(a)):r.createEventObject&&((a=r.createEventObject()).keyCode=o,t.fireEvent("on"+n,a)))}))}}),c.addCommand("file-rename",{label:"Rename",icon:"fa fa-edit",mnemonic:0,execute:function(){d.rename()}}),c.addCommand("file-save",{execute:function(){var e=t.model.unwrap("dockPanel").selectedWidgets().next();if(null!=e){var n=i.contextForWidget(e);n&&n.save()}}}),c.addCommand("file-cut",{label:"Cut",icon:"fa fa-cut",execute:function(){d.cut()}}),c.addCommand("file-copy",{label:"Copy",icon:"fa fa-copy",mnemonic:0,execute:function(){d.copy()}}),c.addCommand("file-delete",{label:"Delete",icon:"fa fa-remove",mnemonic:0,execute:function(){d.delete()}}),c.addCommand("file-duplicate",{label:"Duplicate",icon:"fa fa-copy",mnemonic:0,execute:function(){d.duplicate()}}),c.addCommand("file-paste",{label:"Paste",icon:"fa fa-paste",mnemonic:0,execute:function(){d.paste()}}),c.addCommand("file-download",{label:"Download",icon:"fa fa-download",execute:function(){d.download()}}),c.addCommand("file-upload",{label:"Upload",execute:function(){Object(de.showDialog)({title:"Upload files",body:"Upload local files",buttons:[de.Dialog.okButton()]})}}),c.addKeyBinding({keys:["Enter"],selector:".jp-DirListing span.jp-DirListing-itemText",command:"file-open"}),c.addKeyBinding({keys:["Accel S"],selector:".jp-FileEditor",command:"file-save"}),document.addEventListener("keydown",(function(e){c.processKeydownEvent(e)}),!0);var C=new k.Menu({commands:c});C.addItem({command:"file-open"}),C.addItem({command:"file-rename"}),C.addItem({command:"file-remove"}),C.addItem({command:"file-duplicate"}),C.addItem({command:"file-delete"}),C.addItem({command:"file-cut"}),C.addItem({command:"file-copy"}),C.addItem({command:"file-paste"}),C.addItem({command:"file-download"});var w=new k.Menu({commands:c});w.addItem({command:"file-open"}),w.addItem({command:"file-rename"}),w.addItem({command:"file-remove"}),w.addItem({command:"file-delete"}),w.addItem({command:"file-cut"}),w.addItem({command:"file-paste"});var S=new k.Menu({commands:c});S.addItem({command:"file-paste"});var O=d.node.getElementsByClassName("jp-DirListing-content")[0];return O.addEventListener("mouseover",(function(e){e.preventDefault();for(var t=e.target,n=O.children,o=0;o<n.length;o++)if(t==n[o])return void($n=n[o])})),O.addEventListener("contextmenu",(function(e){e.preventDefault(),Qn=O.getElementsByClassName("jp-mod-selected")[0];var t=e.clientX,n=e.clientY;$n&&$n.dataset&&"false"===$n.dataset.isdir?C.open(t,n):$n&&$n.dataset&&"true"===$n.dataset.isdir?w.open(t,n):Qn&&Qn.dataset&&"false"===Qn.dataset.isdir?C.open(t,n):Qn&&Qn.dataset&&"true"===Qn.dataset.isdir?w.open(t,n):S.open(t,n),$n=null,Qn=null})),C.addClass(Object(An.a)(Mn()).class),w.addClass(Object(An.a)(Ln()).class),S.addClass(Object(An.a)(Gn()).class),d.toolbar.addClass("fbToolbar"),d}(c,{model:Yn,opener:{open:function(e){var t,n,o=e.context.path,a=o.lastIndexOf(".");switch(a>-1&&(n=o.substring(a+1)),n){case"ipynb":t="jp-NotebookIcon";break;case"json":t="jp-JSONIcon";break;case"pdf":t="jp-FileIcon";break;case"md":t="jp-MarkdownIcon";break;case"py":t="jp-PythonIcon";break;default:t="jp-TextEditorIcon"}e.title.iconClass=t,i(e),e.disposed.connect((function(e){}))}}}),k.Widget.attach(u,e)})),c}function no(e){return(no="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oo(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function ao(e,t){return(ao=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ro(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=lo(e);if(t){var a=lo(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return io(this,n)}}function io(e,t){return!t||"object"!==no(t)&&"function"!=typeof t?so(e):t}function so(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function lo(e){return(lo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function co(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var uo,po=En.a.Group,mo=Ce.a.confirm,fo=In.a.TabPane,ho=he.a.Option,bo=window.CONFIG.currentVip,go=co({stripIgnoreTagBody:["style"],onIgnoreTag:function(e,t,n){if(/^(ptimes|style|strike|o:p)$/i.test(e))return t},onIgnoreTagAttr:function(e,t,n){if("style"==t)return"".concat(t,'="').concat(n,'"')}},"stripIgnoreTagBody",!0),yo=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ao(e,t)}(i,e);var t,n,o,r=ro(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=r.call(this,e)).submitFile=function(e,n,o){t.props.notebook.listRaceByUserId({inProgress:!0,pageSize:9999}).then((function(a){a?t.setState({raceDataList:a&&a.list?a.list:[],raceTotal:a.total},(function(){t.renderSubmitModal(e,n,o)})):be.a.error(Ze("notebook.ajax.networkErrorTitle","网络不给力，刚才的操作失败啦o(╥﹏╥)o 请稍后重试~"))}))},t.getImages=function(e,n){var o=null;return t.props.file.getImages({filepath:e,userId:t.props.routeParams.userId,filetype:n}).then((function(e){if(e&&e.content)return o=e,Promise.resolve(o)}))},t.renderSubmitModal=function(e,n,o){if(t.state.raceDataList&&t.state.raceDataList.length){var r=t.state.raceDataList[0];t.setState({submitraceName:r.raceName,submitraceId:r.raceId,seasonId:r.seasonId,teamId:r.teamId},(function(){var r=void 0===t.state.raceDataList?null:t.state.raceDataList.map((function(e,t){var n=("en-us"===window.CONFIG.language||"en"===window.CONFIG.language)&&e.raceNameEn?e.raceNameEn:e.raceName;return a.a.createElement(ho,{key:e.raceName+"&&"+e.raceId+"&&"+e.seasonId+"&&"+e.teamId,title:n},n)}));t.setState({sumitVisible:!0,submitFileSize:o,submitFilePath:e,submitFileName:n,gameList:r})}))}else Ce.a.error({title:Ze("notebook.edit.tip","提示"),content:Ze("notebook.submitcompetition.notable","您还没有参加过比赛，请先参加比赛")})},t.getDataList=function(e){t.props.tianchi.versionGetData({notebookId:e,userId:t.props.routeParams.userId,pageSize:15}).then((function(e){t.setState({dataList:e.list,dataListInfo:e,pageNum:e.pageNum,pages:e.pages}),model.set("dataList",e.list),model.set("dataListInfo",e)}))},t.getRaceDataList=function(e,n){t.props.notebook.listRaceByUserId({title:e,pageNum:n}).then((function(e){e&&t.setState({dataLabList:e&&e.list?e.list:[],pageItem:e.total})}))},t.vipGpuOpenClickModal=function(){t.state.vipGpuOpen||(t.props.model.unwrap("kernelStatus")&&"dead"!=t.props.model.unwrap("kernelStatus")?t.setState({vipOnKernelOpenGpu:!0}):t.setState({vipNoKernelOpenGpu:!0}))},t.vipNoKernelOpenGpuDialogCancel=function(){t.setState({vipNoKernelOpenGpu:!1})},t.vipOnKernelOpenGpuDialogCancel=function(){t.setState({vipOnKernelOpenGpu:!1})},t.vipGpuOpenClick=function(){window.tcComponent&&("idle"==t.props.model.unwrap("status")||"busy"==t.props.model.unwrap("status"))&&window.tcComponent.state.session.shutdown().then((function(){})),t.props.tianchi.vipGetGpu().then((function(e){e.vipIsGPU||t.props.tianchi.vipOpenGpu({vipIsGPU:!0}).then((function(e){e.vipIsGPU&&(t.setState({gpuState:"ON",vipGpuOpen:!0,vipNoKernelOpenGpu:!1,vipOnKernelOpenGpu:!1}),t.props.model.get("gpuInfo").setMany({gpuState:"ON",vipGpuOpen:!0}),t.props.model.setMany({isGpuOpen:!0}))}))})),t.props.model.setMany({gpuOpenClick:!1,gpuCloseClick:!1})},t.vipGpuCloseClick=function(){if(t.state.vipGpuOpen){var e="busy"===t.state.kernelStatus?Ze("notebook.newNotebook.runningGpu","关闭GPU会中断当前运行，是否确认关闭？"):Ze("notebook.newNotebook.closeGpu","确定关闭GPU？"),n=so(t);mo({title:Ze("notebook.manage.prompt","温馨提示"),content:e,cancelText:Ze("notebook.edit.cancel","取消"),okText:Ze("notebook.edit.comfirm","确定"),width:"680px",onOk:function(){n.handleVipCloseGpu()},onCancel:function(){}})}t.props.model.setMany({gpuOpenClick:!1,gpuCloseClick:!1})},t.handleVipCloseGpu=function(){window.tcComponent&&("idle"==t.props.model.unwrap("status")||"busy"==t.props.model.unwrap("status"))&&window.tcComponent.state.session.shutdown().then((function(){})),t.props.tianchi.vipCloseGpu().then((function(e){e.vipIsGPU||(t.setState({vipGpuOpen:!1,gpuState:"OFF"}),t.props.model.get("gpuInfo").setMany({vipGpuOpen:!1,gpuState:"OFF"}),t.props.model.setMany({status:"dead",isGpuOpen:!1}))}))},t.onSelectedRace=function(e){t.setState({submitraceId:e.split("&&")[1],submitraceName:e.split("&&")[0],seasonId:e.split("&&")[2],teamId:e.split("&&")[3]})},t.handleSubmitOk=function(){if(-1!=t.state.seasonId&&t.state.seasonId){if(t.state.submitraceId&&t.state.raceDataList)for(var e=t.state.raceDataList,n=0;n<e.length;n++)if(e[n].raceId&&t.state.submitraceId==e[n].raceId.toString()){t.submitStart(e[n].uploadSuffixLimit||"");break}}else Ce.a.warning({title:Ze("notebook.submitfile.canotsubmit","提交失败"),content:Ze("notebook.submitfile.canotsubmitcontent","该比赛已经不能提交文件,请选择其他比赛")})},t.submitStart=function(e){if(e&&""!==e){var n=t.state.submitFileName,o=n.lastIndexOf(".");if(!(o>-1))return void Ce.a.error({width:"420px",title:"File type error",content:'The file type is incorrect. Supportable file format "'.concat(i,'"')});var a=n.substring(0,o),r=n.substring(o+1),i=e;if(-1==i.indexOf(r))return void Ce.a.error({width:"420px",title:"File type error",content:'The file type is incorrect. Supportable file format "'.concat(i,'"')})}var s=t.state.submitFilePath.toString(),l=(a=t.state.submitFileName.toString(),t.props.routeParams.userId.toString()),c=t.state.submitraceId.toString(),u=t.state.seasonId.toString(),d=t.state.teamId.toString();t.props.file.postFileToOss({filepath:s,filename:a,userId:l,raceId:c,seasonId:u,teamId:d}).then((function(e){e&&e.ossPath&&t.props.notebook.uploadFileForNotebook({raceId:t.state.submitraceId,currentSeasonId:t.state.seasonId,userId:t.props.routeParams.userId,ossPath:e.ossPath,fileSize:t.state.submitFileSize}).then((function(e){e&&e.status?t.setState({submitFileSuccess:!0,sumitVisible:!1}):be.a.error(Ze("notebook.submit.submitfailed","您的比赛答案提交失败，请稍后重试"))}))}))},t.handleSubmitCancel=function(){t.setState({sumitVisible:!1,submitFilePath:"",submitraceId:null,submitraceName:null,seasonId:null,teamId:null,submitFileSize:0})},t.deleteData=function(e,n,o,a,r,i){i.stopPropagation();var s=so(t),l=document.getElementsByClassName("data-item-title")[o].innerText,c=t.props.EditVersion?t.props.EditVersion:0,u=c<t.state.publishedVersions-1?c:t.state.publishedVersions-1;mo({title:Ze("notebook.manage.prompt","温馨提示"),width:"680px",content:"".concat(Ze("notebook.dataset.sureDelete","确定删除"),'"').concat(l,'"?'),cancelText:Ze("notebook.edit.cancel","取消"),okText:Ze("notebook.edit.comfirm","确定"),onOk:function(){s.props.tianchi.relieveData({labId:s.props.routeParams.lab,version:u,dataId:e,isExpired:r,userId:s.props.routeParams.userId}).then((function(e){if(e){be.a.destroy(),be.a.success(Ze("notebook.dataDetail.deleteData.success","删除成功，十秒后生效哦～"),3);var t=s.state.dataList;t.splice(o,1),s.setState({dataList:t},(function(){})),s.props.tianchi.versionGetData({notebookId:s.props.notebookId,userId:Number(s.props.routeParams.userId),pageSize:15}).then((function(e){s.props.model.set("dataList",e.list)}))}else be.a.error(Ze("notebook.dataDetail.fileDelete.deletefailed","删除失败"))}))},onCancel:function(){}})},t.timerDown=null,t.state={dataList:[],pageNum:0,pages:0,description:"",visible:!1,value:"PUBLIC",dataLabList:[],raceDataList:[],raceTotal:0,seasonId:null,teamId:null,racePages:0,currentPage:1,title:"",flag:"",loading:!1,gpuText:Ze("notebook.newNotebook.gpuapply","申请GPU"),visibles:!1,gpuClass:"",isRightOpen:!0,slideRightValue:"-280px",isGpuOn:!1,stampVisible:!1,timeDownVisible:!1,timeDownValue:30,needStamp:200,gpuDelayTime:3,connectCount:null,gmtExpiry:null,delayed:!1,stampNotDelay:!1,restTime:30,sendDelayTime:!0,overTime:null,defaultCurrent:1,publishedVersions:1,sumitVisible:!1,submitFilePath:"",submitFileName:"",submitFileSize:0,raceName:Ze("notebook.ipython_editor.operation_bar.linkCompetition","关联比赛"),raceId:"",competitionList:[],submitraceId:null,submitraceName:null,racedataId:null,submitFileSuccess:!1,submitFileType:"",gpuOpenClick:!1,gpuCloseClick:!1,vipGpuOpen:!1,vipNoKernelOpenGpu:!1,vipOnKernelOpenGpu:!1},t.handleAddDataClick=t.handleAddDataClick.bind(so(t)),t.handleScroll=t.handleScroll.bind(so(t)),t.onChange=t.onChange.bind(so(t)),t.onPaginationChange=t.onPaginationChange.bind(so(t)),t.handleCloseBtnClick=t.handleCloseBtnClick.bind(so(t)),t.handleTitleInput=t.handleTitleInput.bind(so(t)),t.handleSearchBtnClick=t.handleSearchBtnClick.bind(so(t)),t.handleAddBtnClick=t.handleAddBtnClick.bind(so(t)),t.transformData=t.transformData.bind(so(t)),t.renderData=t.renderData.bind(so(t)),t.handleCreateClick=t.handleCreateClick.bind(so(t)),t.getGpu=t.getGpu.bind(so(t)),t.handleOk=t.handleOk.bind(so(t)),t.rightOpen=t.rightOpen.bind(so(t)),t.gpuOpenClick=t.gpuOpenClick.bind(so(t)),t.gpuCloseClick=t.gpuCloseClick.bind(so(t)),t.handleStampCancel=t.handleStampCancel.bind(so(t)),t.applyGpu=t.applyGpu.bind(so(t)),t.handleTimeDownCancel=t.handleTimeDownCancel.bind(so(t)),t.handleTimeDownOk=t.handleTimeDownOk.bind(so(t)),t.handleGetStampOk=t.handleGetStampOk.bind(so(t)),t.handleTimeDownDialog=t.handleTimeDownDialog.bind(so(t)),t.confirmOpenCpu=t.confirmOpenCpu.bind(so(t)),t.deleteData=t.deleteData.bind(so(t)),t.handleDelayedCancel=t.handleDelayedCancel.bind(so(t)),t.handleCloseGpu=t.handleCloseGpu.bind(so(t)),t.handleStampNotDelayCancel=t.handleStampNotDelayCancel.bind(so(t)),t.submitFileDialogCancel=t.submitFileDialogCancel.bind(so(t)),t.submitFileDialogOk=t.submitFileDialogOk.bind(so(t)),be.a.config({top:120,duration:2,maxCount:3}),t}return t=i,(n=[{key:"fmtDate",value:function(e){var t=new Date(e),n=1900+t.getYear(),o="0"+(t.getMonth()+1),a="0"+t.getDate(),r="0"+t.getHours(),i="0"+t.getMinutes(),s="0"+t.getSeconds();return n+"-"+o.substring(o.length-2,o.length)+"-"+a.substring(a.length-2,a.length)+" "+r.substring(r.length-2,r.length)+":"+i.substring(i.length-2,i.length)+":"+s.substring(s.length-2,s.length)}},{key:"setupFileBrowser",value:function(){if(!this.fileBrowser){var e=this.domFileBrowser,t=this.props.model.unwrap("mainPanel");t&&e&&(this.fileBrowser=to(e,0,this.props,this.submitFile,this.getImages))}}},{key:"componentDidMount",value:function(){var e=this;this._modelChange=this.props.model.change.map((function(t){var n=t.path;/addDockWidget/.test(n)&&e.setupFileBrowser()})),window.CONFIG.hasGPU&&("true"==bo?this.vipGetGpu():this.getGpu()),this.props.notebook.listRaceByUserId({inProgress:!1}).then((function(t){t&&e.setState({raceDataList:t&&t.list?t.list:[],raceTotal:t.total})})),this.props.model.change.map((function(t){var n=t.path,o=t.value;/restartTimeDown|refresh|kernelStatus|todelay|holdtime|publishedVersions|competitionList|raceName|raceId|gpuCloseClick|gpuOpenClick|applyGpuClick/.test(n)&&e.setState(co({},n.join(""),o.unwrap()),(function(){1==e.state.todelay&&1==e.state.connectCount&&e.setState({timeDownVisible:!0,restTime:e.state.holdtime}),1==e.state.restartTimeDown&&e.openGpu(!1,!0),e.state.refresh&&window.location.reload(),e.state.gpuOpenClick&&(e.gpuOpenClick(),e.vipGpuOpenClick()),e.state.gpuCloseClick&&e.gpuCloseClick(),e.state.applyGpuClick&&e.applyGpu()}))}))}},{key:"componentWillReceiveProps",value:function(e){e.projectDetail&&e.projectDetail!==this.props.projectDetail&&(e.projectDetail.notebookLab,this.setState({id:e.projectDetail.notebookLab.id,versions:e.projectDetail.notebooks.length-1,notebookId:e.notebookId}),this.getDataList(e.notebookId)),e.kernelStatus!=this.props.kernelStatus&&this.setState({kernelStatus:e.kernelStatus})}},{key:"transformData",value:function(e){var t=new FormData;for(var n in e)t.append(n,e[n]);return t}},{key:"onChange",value:function(e){var t=this,n=e.target.value;if(this.setState({value:n,currentPage:1,defaultCurrent:1}),"RACE"!==n){var o="PUBLIC"!==n,a="PUBLIC"!==n;this.props.tianchi.getDataList({my:o,isMount:a,userId:this.props.routeParams.userId}).then((function(e){t.setState({dataLabList:e&&e.list?e.list:[],pageItem:e.total,defaultCurrent:1})}))}else this.getRaceDataList("",1),this.setState({defaultCurrent:1})}},{key:"handleScroll",value:function(){var e=this,t=document.querySelector(".data-wrap");t&&t.scrollTop+10>45&&this.state.pageNum<this.state.pages&&this.setState({pageNum:this.state.pageNum+1},(function(){e.props.tianchi.versionGetData({notebookId:e.props.notebookId,userId:Number(e.props.routeParams.userId),pageNum:e.state.pageNum,pageSize:15}).then((function(t){e.setState({dataList:e.state.dataList.concat(t.list)},(function(){e.props.model.set("dataList",e.state.dataList)}))}))}))}},{key:"handleItemAddClick",value:function(e){this.setState({version:this.props.EditVersion||this.state.versions,dataId:"RACE"!==this.state.value?this.state.dataLabList[e].datalab.id:null,racedataId:"RACE"===this.state.value?this.state.dataLabList[e].raceId:null});var t,n=document.getElementsByClassName("data-item");for(t=0;t<n.length;t++)n[t].style.backgroundColor="";n[e].style.background="#F3FCFF"}},{key:"handleAddBtnClick",value:function(){var e=this;this.setState({loading:!0});var t=this.props.EditVersion?this.props.EditVersion:0,n=t<this.state.publishedVersions-1?t:this.state.publishedVersions-1;this.props.tianchi.relationData({labId:this.props.routeParams.lab,version:n,dataId:this.state.dataId,raceId:this.state.racedataId,userId:Number(this.props.routeParams.userId)}).then((function(t){e.setState({loading:!1}),!0===t?(e.props.tianchi.versionGetData({notebookId:e.props.notebookId,userId:Number(e.props.routeParams.userId),pageSize:15}).then((function(t){e.setState({dataList:t.list,pageNum:t.pageNum,pages:t.pages},(function(){e.props.model.set("dataList",e.state.dataList)}))})),be.a.success(Ze("notebook.addMessage.success","添加成功")),setTimeout((function(){e.setState({visible:!1,value:"PUBLIC",defaultCurrent:1})}),500)):!1===t?be.a.error(Ze("notebook.addMessage.duplicate","添加重复")):be.a.error(Ze("notebook.addMessage.failed","添加失败"))}))}},{key:"handleClick",value:function(e){var t=document.getElementsByClassName("data-list-menu")[e],n=document.getElementsByClassName("icon")[e];if(t&&n){var o=40*t.children.length;"rotate(0deg)"===n.style.transform?(n.style.transform="rotate(-90deg)",t.style.height="0",t.style.borderBottom="0",t.style.marginbottom="0px"):(n.style.transform="rotate(0deg)",t.style.borderBottom="1px solid #eee",t.style.height=o+"px",t.style.marginbottom="20px")}}},{key:"handleAddDataClick",value:function(){var e=this;this.state.raceDataList&&this.state.raceDataList.length?this.setState({value:"RACE"},(function(){e.getRaceDataList("",1)})):this.setState({value:"PUBLIC"},(function(){e.props.tianchi.getDataList({my:!1}).then((function(t){e.setState({dataLabList:t&&t.list?t.list:[],pageItem:t.total})}))})),this.setState({visible:!0,title:"",defaultCurrent:1})}},{key:"handleCloseBtnClick",value:function(){this.setState({visible:!1,defaultCurrent:1})}},{key:"onPaginationChange",value:function(e){var t=this;if(this.setState({pageNum:e}),"RACE"!==this.state.value){var n="PUBLIC"!==this.state.value,o="PUBLIC"!==this.state.value;this.props.tianchi.getDataList({my:n,pageNum:e,title:this.state.title,isMount:o,userId:Number(this.props.routeParams.userId)}).then((function(n){t.setState({dataLabList:n&&n.list?n.list:[],pageItem:n.total,defaultCurrent:e})}))}else this.getRaceDataList(this.state.title,e),this.setState({defaultCurrent:e})}},{key:"handleTitleInput",value:function(e){this.setState({title:e.target.value})}},{key:"handleSearchBtnClick",value:function(){var e=this;if("RACE"!==this.state.value){var t="PUBLIC"!==this.state.value,n="PUBLIC"!==this.state.value;this.props.tianchi.getDataList({my:t,title:this.state.title,isMount:n,userId:Number(this.props.routeParams.userId)}).then((function(t){e.setState({dataLabList:t&&t.list?t.list:[],pageItem:t.total,defaultCurrent:1})}))}else this.getRaceDataList(this.state.title,1),this.setState({defaultCurrent:1})}},{key:"handleCreateClick",value:function(){window.parent.postMessage({gotoDataEdite:!0},"*")}},{key:"handleOk",value:function(){this.setState({visibles:!1})}},{key:"vipGetGpu",value:function(){var e=this;this.props.tianchi.vipGetGpu().then((function(t){t.vipIsGPU&&(e.setState({vipGpuOpen:!0}),e.props.model.setMany({isGpuOpen:!0}))}))}},{key:"getGpu",value:function(){var e=this;this.props.tianchi.getGpu({userId:this.props.routeParams.userId}).then((function(t){if(t){var n=(t={data:t}).data.notebookGpu?t.data.notebookGpu.applyStatus:null,o=t.data.notebookGpu?t.data.notebookGpu.gpuState:null,a=t.data.openTime,r=t.data.notebookGpu?e.addDate(t.data.notebookGpu.gmtExpiry,parseInt(-t.data.startTime)):null,i=t.data.notebookGpu&&t.data.notebookGpu.gmtExpiry?t.data.notebookGpu.gmtExpiry.split(" ")[1].substr(0,5):null,s=t.data.notebookGpu?t.data.notebookGpu.connectCount:null;e.setState({applyStatus:n,gpuState:o,needStamp:t.data.available2,applyNeedStamp:t.data.available1,userStamp:t.data.userAvailable,connectCount:s,gpuDelayTime:a,gmtExpiry:t.data.notebookGpu?e.dateChange(t.data.notebookGpu.gmtExpiry)+" "+i:null,overTime:t.data.notebookGpu?t.data.notebookGpu.gmtExpiry:null,effectiveDays:t.data.startTime,startDate:t.data.notebookGpu?t.data.notebookGpu.gmtExpiry?e.dateChange(r)+" "+i:"":null});var l="",c="",u=Ze("notebook.newNotebook.gpuapply","申请GPU"),d=!1,p=!1,m=!1;if("INVALID"===n||null==t.data.notebookGpu?(l="apply",e.setState({gpuClass:l})):"ADOPT"===n?(e.handleTimeDownDialog(),l="pass",e.setState({gpuClass:l})):"NOTADOPT"===n?(l="gpu-apply-fail",c=t.data.notebookGpu.rejectReasons,e.setState({gpuClass:l,rejectReasons:c})):"APPLICATION"===n&&(l="applying",u=Ze("notebook.newNotebook.applying","GPU申请中..."),e.setState({gpuClass:l,gpuText:u})),"ON"===o){e.setState({isGpuOn:!0,gpuDelayTime:a}),d=!0,2==s&&(m=!0,a=e.state.sendDelayTime?a:0);var f={act:"article",msg:{startTimeDown:!0,needStamp:t.data.available2,gpuDelayTime:a,isdelay:m,connectCount:s}};p=!0,m=m,e.props.onChildMessage(f)}else"OFF"!==o&&"NONE"!==o||(e.setState({isGpuOn:!1}),d=!1);e.props.model.setMany({gpuInfo:{applyStatus:n,gpuState:o,needStamp:t.data.available2,applyNeedStamp:t.data.available1,userStamp:t.data.userAvailable,connectCount:s,gpuDelayTime:a,gmtExpiry:t.data.notebookGpu?e.dateChange(t.data.notebookGpu.gmtExpiry)+" "+i:null,overTime:t.data.notebookGpu?t.data.notebookGpu.gmtExpiry:null,effectiveDays:t.data.startTime,startDate:t.data.notebookGpu?t.data.notebookGpu.gmtExpiry?e.dateChange(r)+" "+i:"":null,isGpuOn:d,gpuClass:l,gpuText:u,startTimeDown:p,isdelay:m,rejectReasons:c}})}}))}},{key:"addDate",value:function(e,t){var n=new Date(e);n.setDate(n.getDate()+t);var o=n.getMonth()+1;return n.getFullYear()+"-"+o+"-"+n.getDate()}},{key:"renderData",value:function(){var e=this;return this.state.dataLabList&&this.state.dataLabList.length>0?a.a.createElement("div",null,a.a.createElement("div",{className:"data-con"},a.a.createElement("div",{className:"data-title"},a.a.createElement("span",{className:"data-name"},Ze("notebook.dataset.dataName","名称")),"RACE"!==this.state.value&&a.a.createElement("span",{className:"data-nickname"},Ze("notebook.dataset.dataPostedBy","发布者")),a.a.createElement("span",{className:"data-description"},Ze("notebook.dataset.description","描述")),a.a.createElement("div",{className:"createData",onClick:this.handleCreateClick},a.a.createElement(ge.a,{type:"plus"}),a.a.createElement("span",{style:{marginLeft:"10px"}},Ze("notebook.dataset.newData","新建数据")))),a.a.createElement("div",{className:"data-item-con"},this.state.dataLabList.map((function(t,n){var o="RACE"!==e.state.value?t.datalab&&t.datalab.description?t.datalab.description:Ze("notebook.common.none","无"):t.description,r="RACE"!==e.state.value?t.datalab&&t.datalab.title?t.datalab.title:Ze("notebook.common.none","无"):t.title;return a.a.createElement("div",{className:"data-item",key:n,onClick:e.handleItemAddClick.bind(e,n)},a.a.createElement("span",{className:"data-item-name",dangerouslySetInnerHTML:{__html:fe()(r,go)}}),"RACE"!==e.state.value&&a.a.createElement("span",{className:"data-item-nickname",dangerouslySetInnerHTML:{__html:fe()(t.nickName,go)}}),a.a.createElement("span",{className:"data-item-description",dangerouslySetInnerHTML:{__html:o?fe()(o,go):Ze("notebook.common.none","无")}}))})))),"RACE"===this.state.value&&a.a.createElement("div",{className:"data-item-remarks"},Ze("notebook.dataset.remarks","注：若您未能在该列表中找到已报名的某些比赛数据，说明该比赛数据不支持直接挂载到天池notebook")),a.a.createElement("div",{className:"data-footer"},a.a.createElement(Nn.a,{current:this.state.defaultCurrent,total:this.state.pageItem,onChange:this.onPaginationChange}),a.a.createElement("div",{className:"data-btn"},a.a.createElement("span",{className:"data-close",onClick:this.handleCloseBtnClick},Ze("notebook.common.close","关闭")),a.a.createElement("span",{className:"data-add",onClick:this.handleAddBtnClick},Ze("notebook.common.add","添加"))))):a.a.createElement("div",null,a.a.createElement("div",{className:"data-con"},a.a.createElement("p",{className:"noData"},Ze("notebook.dataset.noData","还没有数据哦～"))),a.a.createElement("div",{className:"data-footer"},a.a.createElement("div",{className:"data-btn"},a.a.createElement("span",{className:"data-close",onClick:this.handleCloseBtnClick},Ze("notebook.common.close","关闭")),a.a.createElement("span",{className:"data-add",onClick:this.handleCreateClick},Ze("notebook.dataset.newData","新建数据")))))}},{key:"rightOpen",value:function(){var e=document.getElementById("editContent");uo&&clearTimeout(uo),this.setState({isRightOpen:!this.state.isRightOpen});var t=this.props.model.unwrap("rootPanel");this.state.isRightOpen?e&&(e.style.width="calc(100% - 20px)",e.style.left="10px",uo=setTimeout((function(){t&&t.update()}),500)):e&&(e.style.width="calc(100% - 295px)",e.style.left="295px",uo=setTimeout((function(){t&&t.update()}),500))}},{key:"gpuOpenClick",value:function(){var e=this;this.props.tianchi.getGpu({userId:this.props.routeParams.userId}).then((function(t){var n=(t={data:t}).data.notebookGpu?t.data.notebookGpu.gpuState:null,o=t.data.userAvailable,a=t.data.available1,r=t.data.notebookGpu?t.data.notebookGpu.gmtExpiry:null;e.setState({userStamp:o,gpuState:n,needStamp:t.data.available2,applyNeedStamp:a,gpuDelayTime:t.data.openTime,overTime:t.data.notebookGpu?t.data.notebookGpu.gmtExpiry:null}),"ON"!==n&&(null===r&&o<a||null!==r&&o<a?e.state.isGpuOn||e.setState({stampVisible:!0}):null===r&&o>=a?e.setState({visibles:!0}):null!==r&&o>=a&&e.openGpu(!0,!1))})),this.props.model.setMany({gpuOpenClick:!1,gpuCloseClick:!1})}},{key:"confirmOpenCpu",value:function(){var e=this;this.setState({visibles:!1}),this.props.tianchi.getGpu({userId:this.props.routeParams.userId}).then((function(t){var n=(t={data:t}).data.userAvailable,o=t.data.notebookGpu?t.data.notebookGpu.gpuState:null,a=t.data.available1,r=t.data.notebookGpu&&t.data.notebookGpu.gmtExpiry?t.data.notebookGpu.gmtExpiry.split(" ")[1].substr(0,5):null,i=t.data.notebookGpu?e.dateChange(t.data.notebookGpu.gmtExpiry)+" "+r:null;e.setState({userStamp:n,gpuState:o,needStamp:t.data.available2,applyNeedStamp:a,gmtExpiry:i,gpuDelayTime:t.data.openTime,overTime:t.data.notebookGpu?t.data.notebookGpu.gmtExpiry:null}),"ON"!==o&&(n<a?e.state.isGpuOn||e.setState({stampVisible:!0}):n>=a&&e.openGpu(!0,!1))}))}},{key:"openGpu",value:function(e,t){var n=this;this.props.tianchi.openGpu({submit:e,count:t,userId:Number(this.props.routeParams.userId)}).then((function(e){if((e={data:e}).data.success){if(t&&n.setState({connectCount:1}),e.data.startTime){var o=e.data,a=o.startTime,r=o.endTime;if(null!==a&&null!==r){var i=n.dateChange(a),s=n.dateChange(r);n.setState({gpuDialogStartTime:i,gpuDialogEndTime:s})}}if(e.data.notebookGpu){var l=e.data.notebookGpu,c=l.connectCount,u=l.gpuState,d=e.data.notebookGpu?n.addDate(e.data.notebookGpu.gmtExpiry,parseInt(-n.state.effectiveDays)):null,p=e.data.notebookGpu&&e.data.notebookGpu.gmtExpiry?e.data.notebookGpu.gmtExpiry.split(" ")[1].substr(0,5):null;n.setState({overTime:e.data.notebookGpu?e.data.notebookGpu.gmtExpiry:null,gmtExpiry:e.data.notebookGpu?n.dateChange(e.data.notebookGpu.gmtExpiry)+" "+p:null,startDate:e.data.notebookGpu?e.data.notebookGpu.gmtExpiry?n.dateChange(d)+" "+p:"":null,gpuState:u,connectCount:c,isGpuOn:!0});var m={act:"article",msg:{startTimeDown:!0,connectCount:c,gpuDelayTime:n.state.gpuDelayTime}};n.props.onChildMessage(m),n.props.model.get("gpuInfo").setMany({overTime:e.data.notebookGpu?e.data.notebookGpu.gmtExpiry:null,gmtExpiry:e.data.notebookGpu?n.dateChange(e.data.notebookGpu.gmtExpiry)+" "+p:null,startDate:e.data.notebookGpu?e.data.notebookGpu.gmtExpiry?n.dateChange(d)+" "+p:"":null,gpuState:u,connectCount:c,isGpuOn:!0,startTimeDown:!0,gpuDelayTime:n.state.gpuDelayTime})}}else n.setState({isGpuOn:!1})}))}},{key:"dateChange",value:function(e){var t=new Date(e),n=t.getMonth()+1;return(e=t.getDate())>0&&e<10&&(e="0"+e),n>0&&n<10&&(n="0"+n),n+"."+e}},{key:"gpuCloseClick",value:function(){if("ON"===this.state.gpuState){var e="busy"===this.state.kernelStatus?Ze("notebook.newNotebook.runningGpu","关闭GPU会中断当前运行，是否确认关闭？"):Ze("notebook.newNotebook.closeGpu","确定关闭GPU？"),t=this;mo({title:Ze("notebook.manage.prompt","温馨提示"),content:e,cancelText:Ze("notebook.edit.cancel","取消"),okText:Ze("notebook.edit.comfirm","确定"),width:"680px",onOk:function(){t.handleCloseGpu()},onCancel:function(){}})}this.props.model.setMany({gpuOpenClick:!1,gpuCloseClick:!1})}},{key:"handleCloseGpu",value:function(){var e=this;this.props.tianchi.closeGpu({submit:!0,userId:Number(this.props.routeParams.userId)}).then((function(t){if((t={data:t}).data.notebookGpu){var n=t.data.notebookGpu,o=n.connectCount,a=n.gpuState,r=e.state.effectiveDays,i=e.addDate(t.data.notebookGpu.gmtExpiry,parseInt(-r)),s=t.data.notebookGpu.gmtExpiry.split(" ")[1].substr(0,5);t.data.success&&(e.setState({isGpuOn:!1,gpuState:a,connectCount:o,gmtExpiry:e.dateChange(t.data.notebookGpu.gmtExpiry)+" "+s,startDate:e.dateChange(i)+" "+s,sendDelayTime:!1,overTime:t.data.notebookGpu?t.data.notebookGpu.gmtExpiry:null}),e.props.onChildMessage({act:"off",msg:{isdelay:!1,delayten:!1,startTimeDown:!1}}),e.props.model.get("gpuInfo").setMany({isGpuOn:!1,gpuState:a,connectCount:o,gmtExpiry:e.dateChange(t.data.notebookGpu.gmtExpiry)+" "+s,startDate:e.dateChange(i)+" "+s,sendDelayTime:!1,overTime:t.data.notebookGpu?t.data.notebookGpu.gmtExpiry:null,isdelay:!1,delayten:!1,startTimeDown:!1}))}}))}},{key:"handleStampCancel",value:function(){this.setState({stampVisible:!1})}},{key:"applyGpu",value:function(){var e=this.state.gpuClass;"apply"!==e&&"gpu-apply-fail"!==e||window.parent.postMessage({gotoGpuApply:!0},"*"),this.props.model.set("applyGpuClick",!1)}},{key:"handleTimeDownCancel",value:function(){this.setState({timeDownVisible:!1})}},{key:"getStampGetGpu",value:function(){var e=this;this.props.tianchi.getGpu({userId:this.props.routeParams.userId}).then((function(t){var n=(t={data:t}).data.userAvailable,o=t.data.notebookGpu?t.data.notebookGpu.gpuState:null,a=t.data.available1,r=t.data.notebookGpu&&t.data.notebookGpu.gmtExpiry?t.data.notebookGpu.gmtExpiry.split(" ")[1].substr(0,5):null,i=t.data.notebookGpu?e.dateChange(t.data.notebookGpu.gmtExpiry)+" "+r:null,s=t.data.available2;e.setState({userStamp:n,gpuState:o,needStamp:s,applyNeedStamp:a,gmtExpiry:i,gpuDelayTime:t.data.openTime,overTime:t.data.notebookGpu.gmtExpiry}),e.props.model.get("gpuInfo").setMany({userStamp:n,gpuState:o,needStamp:s,applyNeedStamp:a,gmtExpiry:i,gpuDelayTime:t.data.openTime,overTime:t.data.notebookGpu.gmtExpiry}),n<s?(e.setState({stampNotDelay:!0}),e.props.model.get("gpuInfo").setMany({stampNotDelay:!0})):e.toDelay()}))}},{key:"handleTimeDownOk",value:function(){this.setState({timeDownVisible:!1}),this.getStampGetGpu()}},{key:"toDelay",value:function(){var e=this;this.props.tianchi.openGpu({submit:!0,count:!1,userId:Number(this.props.routeParams.userId)}).then((function(t){if((t={data:t}).data.success){if(1===e.state.connectCount){e.setState({connectCount:t.data.notebookGpu.connectCount});var n={isdelay:!0,delayten:!1,gpuDelayTime:e.state.gpuDelayTime};e.props.onChildMessage(n),e.props.model.get("gpuInfo").setMany({isdelay:!0,delayten:!1,gpuDelayTime:e.state.gpuDelayTime})}}else e.setState({delayed:!0,connectCount:2}),e.props.model.get("gpuInfo").setMany({delayed:!0,connectCount:2})}))}},{key:"handleGetStampOk",value:function(){window.open("http://".concat(location.host,"/home/rule-info?spm=5176.12282027.0.0.2b521580A5ySwJ")),this.setState({stampVisible:!1})}},{key:"handleTimeDownDialog",value:function(){var e=this;this.state.overTime&&(this.timerDown=setInterval((function(){(new Date).getTime()>=new Date(e.state.overTime).getTime()&&(e.handleCloseGpu(),e.getGpu(),clearInterval(e.timerDown))}),1e3))}},{key:"applyRender",value:function(){var e=this.state.gpuClass;if("true"==bo){var t=this.state,n=t.vipGpuOpen;return t.gpuState,t.startDate,t.gmtExpiry,t.overTime,t.nowTime,a.a.createElement("div",{className:"switch-wrap"},a.a.createElement("div",{className:n?"gpu-switch-on":"gpu-switch-off"},a.a.createElement("div",{className:n?"gpu-on-on":"gpu-on-off",onClick:this.vipGpuOpenClickModal}," ","GPU ON"),a.a.createElement("div",{className:n?"gpu-off-on":"gpu-off-off",onClick:this.vipGpuCloseClick},"GPU OFF")))}if("apply"===e||"applying"===e)return a.a.createElement("a",{className:e+" buttonLink",onClick:this.applyGpu,href:"#"},this.state.gpuText);if("gpu-apply-fail"===e)return a.a.createElement(ye.a,{placement:"bottom",title:a.a.createElement("p",{style:{fontzSize:"12px",color:"#E55130"}},this.state.rejectReasons)},a.a.createElement("a",{className:"gpu-apply-fail buttonLink",href:"#",onClick:this.applyGpu},Ze("notebook.newNotebook.applyFail","未通过，再次申请")));if("pass"===e){var o=this.state,r=o.isGpuOn,i=o.gpuState,s=o.startDate,l=o.gmtExpiry,c=o.overTime;return o.nowTime,a.a.createElement("div",{className:"switch-wrap"},a.a.createElement("div",{className:r?"gpu-switch-on":"gpu-switch-off"},a.a.createElement("div",{className:r?"gpu-on-on":"gpu-on-off",onClick:this.gpuOpenClick},"GPU ON"),a.a.createElement("div",{className:r?"gpu-off-on":"gpu-off-off",onClick:this.gpuCloseClick},"GPU OFF")),c?"ON"==i||"OFF"==i?a.a.createElement("div",{className:"useful-time"},s,"  ",Ze("notebook.newNotebook.to","至")," ",l," ",Ze("notebook.newNotebook.work","有效")):"":a.a.createElement("div",{className:"marginbot"}))}}},{key:"handleDelayedCancel",value:function(){this.setState({delayed:!1})}},{key:"handleStampNotDelayCancel",value:function(){this.setState({stampNotDelay:!1})}},{key:"componentWillUnmount",value:function(){this._modelChange&&this._modelChange.end(!0),uo&&clearTimeout(uo)}},{key:"submitFileDialogCancel",value:function(){this.setState({submitFileSuccess:!1,sumitVisible:!1,submitFilePath:"",submitraceId:null,submitraceName:null,seasonId:null,teamId:null,submitFileSize:0})}},{key:"submitFileDialogOk",value:function(){window.parent.postMessage({gotoUploadResult:!0,raceId:this.state.submitraceId},"*"),this.setState({submitFileSuccess:!1,sumitVisible:!1,submitFilePath:"",submitraceId:null,submitraceName:null,seasonId:null,teamId:null,submitFileSize:0})}},{key:"render",value:function(){var e=this,t=this.state,n=t.slideRightValue,o=t.isRightOpen;return t.isGpuOn,t.gpuClass,a.a.createElement("div",{className:"slide-wrap",style:{left:o?"0px":n}},a.a.createElement("div",{className:"right-btn",onClick:this.rightOpen},o?a.a.createElement("i",{className:"left"}):a.a.createElement("i",{className:"right"})),a.a.createElement("div",{className:"slide-pane",style:{right:o?"0px":n}},"true"==bo?a.a.createElement("div",{className:"gpuHead"},this.applyRender()):"",a.a.createElement("div",{className:"data-list-box"},a.a.createElement(In.a,{defaultActiveKey:window.CONFIG.hasFileManager?"1":"2"},!!window.CONFIG.hasFileManager&&a.a.createElement(fo,{tab:Ze("notebook.dataset.fileList","个人空间"),key:"1"},a.a.createElement("div",{className:"filebrowser",ref:function(t){e.domFileBrowser=t,e.setupFileBrowser()}})),a.a.createElement(fo,{tab:Ze("notebook.dataset.dataList","挂载数据"),key:"2"},a.a.createElement("div",{className:"data-list"},a.a.createElement("p",null,Ze("notebook.dataset.datalist","数据列表")),a.a.createElement(ye.a,{title:Ze("notebook.newNotebook.addDatasetbtn","添加数据集")},a.a.createElement("div",{className:"newData",onClick:this.handleAddDataClick}))),a.a.createElement("div",{className:"data-wrap",onScroll:this.handleScroll},a.a.createElement("div",{className:"data-list-wrap"},this.state.dataList.map((function(t,n){return a.a.createElement("div",{className:"data-list-item",key:n},a.a.createElement("div",{className:"data-list-con",onClick:e.handleClick.bind(e,n)},a.a.createElement("img",{className:"icon",src:"https://gw.alicdn.com/tfs/TB1mpkKdgmTBuNjy1XbXXaMrVXa-8-4.png"}),a.a.createElement("p",{className:"data-item-title",dangerouslySetInnerHTML:{__html:"<span class=first-span>".concat(fe()(t.datalab.title,go),"</span><span class=second-span>").concat(t.datalab.isDeleted?"(".concat(Ze("notebook.dataset.expired","已过期"),")"):"","</span>")}}),a.a.createElement("div",{className:"item-delete",onClick:e.deleteData.bind(e,t.datalab.id,t.datalab.title,n,e.state.id,t.datalab.isDeleted)},a.a.createElement("img",{src:"https://img.alicdn.com/tfs/TB1BAEZubsrBKNjSZFpXXcXhFXa-38-38.png"}))),a.a.createElement("ul",{className:"data-list-menu"},e.state.dataList[n].datalabFile.map((function(e,t){return a.a.createElement(xn.a,{placement:"top",title:"datalab/"+e.filePath.split("documents/")[1],arrowPointAtCenter:!0,key:t},a.a.createElement("li",{className:"data-list-children"},a.a.createElement("p",null,e.filePath.split("/").pop())))}))))}))))))),a.a.createElement(Ce.a,{visible:this.state.visible,onOk:this.handleOk,onCancel:this.handleCancel,footer:null,className:"common",closable:!1},a.a.createElement("div",{className:"data-header"},a.a.createElement("span",{className:"data-dataLab"},Ze("notebook.datasetList.dataset","数据集")),a.a.createElement("span",{className:"data-menu"},a.a.createElement(po,{onChange:this.onChange,value:this.state.value},!(!this.state.raceDataList||!this.state.raceDataList.length)&&a.a.createElement(Tn.a,{count:"new"},a.a.createElement(En.a,{value:"RACE"},Ze("notebook.datasetList.dataset.competition","参加比赛数据"))),a.a.createElement(En.a,{value:"PUBLIC"},Ze("notebook.datasetList.dataset.publish","公有数据集")),a.a.createElement(En.a,{value:"PRIVAT"},Ze("notebook.datasetList.dataset.my","我的数据集"))),a.a.createElement("span",{className:"data-input"},a.a.createElement("input",{placeholder:Ze("notebook.datasetList.dataset.addPublish","仅可挂载已发布的数据集哦"),value:this.state.title,onChange:this.handleTitleInput})),a.a.createElement("span",{className:"data-search",onClick:this.handleSearchBtnClick},a.a.createElement(ge.a,{type:"search"})))),this.renderData()),a.a.createElement("div",{className:"modal"},a.a.createElement(Ce.a,{visible:this.state.visibles,okText:Ze("notebook.applyGpu.getToken","去赚粮票"),title:Ze("notebook.manage.prompt","温馨提示"),width:"680px",onCancel:this.handleOk,footer:[a.a.createElement(ke.a,{key:"back",onClick:this.handleOk},Ze("notebook.edit.cancel","取消")),a.a.createElement(ke.a,{key:"submit",type:"primary",size:"large",onClick:this.confirmOpenCpu},Ze("notebook.edit.comfirm","确定"))]},a.a.createElement("p",null,Ze("notebook.dataDetail.confirm.deletion.useGpu","使用GPU将扣除"),this.state.applyNeedStamp,Ze("notebook.newNotebook.tokens","粮票")))),a.a.createElement("div",{className:"isStampVisible"},a.a.createElement(Ce.a,{title:Ze("notebook.manage.prompt","温馨提示"),style:{top:250},width:"680px",visible:this.state.stampVisible,onOk:this.handleOk,onCancel:this.handleStampCancel,footer:[a.a.createElement(ke.a,{key:"back",onClick:this.handleStampCancel},Ze("notebook.edit.cancel","取消")),a.a.createElement(ke.a,{key:"submit",type:"primary",onClick:this.handleGetStampOk},Ze("notebook.applyGpu.getToken","去赚粮票"))]},a.a.createElement("p",null,Ze("notebook.dataDetail.confirm.deletion.useGpu","使用GPU将扣除"),this.state.applyNeedStamp,Ze("notebook.newNotebook.tokens","粮票"),Ze("notebook.newNotebook.delayToken",",你的粮票不足"),this.state.applyNeedStamp,"，",Ze("notebook.newNotebook.earntoken","请先赚取粮票。")))),a.a.createElement(Ce.a,{title:Ze("notebook.manage.prompt","温馨提示"),style:{top:250},width:"680px",visible:this.state.timeDownVisible,onOk:this.handleOk,onCancel:this.handleTimeDownCancel,closable:!0,footer:[a.a.createElement(ke.a,{key:"back",onClick:this.handleTimeDownCancel},Ze("notebook.edit.cancel","取消")),a.a.createElement(ke.a,{key:"submit",type:"primary",onClick:this.handleTimeDownOk},Ze("notebook.edit.comfirm","确定"))]},a.a.createElement("p",null,Ze("notebook.newNotebook.kernel","你的kernel连接将在"),a.a.createElement("span",{className:"close-time"},parseInt(this.state.restTime/60),Ze("notebook.newNotebook.kernelTime","分钟后断开")),Ze("notebook.newNotebook.deduction","，扣除"),this.state.needStamp,Ze("notebook.newNotebook.tokenDelay","个粮票将可以延时"),a.a.createElement("span",{className:"close-time"},this.state.gpuDelayTime,Ze("notebook.newNotebook.delayHour","小时")),Ze("notebook.newNotebook.you","，你还有"),this.state.userStamp,Ze("notebook.newNotebook.deductionAndDelay","粮票，是否扣除并延时？"))),a.a.createElement(Ce.a,{title:Ze("notebook.manage.prompt","温馨提示"),style:{top:250},width:"680px",visible:this.state.delayed,onOk:this.handleOk,onCancel:this.handleDelayedCancel,closable:!0,footer:[a.a.createElement(ke.a,{type:"primary",key:"back",onClick:this.handleDelayedCancel},Ze("notebook.dataDetail.confirm.delete.got","知道了"))]},a.a.createElement("p",null,Ze("notebook.dataDetail.confirm.delete.haveDeily","你已延时过了，不能再延时！"))),a.a.createElement(Ce.a,{title:Ze("notebook.manage.prompt","温馨提示"),style:{top:250},width:"680px",visible:this.state.stampNotDelay,onOk:this.handleOk,onCancel:this.handleStampNotDelayCancel,footer:[a.a.createElement(ke.a,{key:"back",onClick:this.handleStampNotDelayCancel},Ze("notebook.edit.cancel","取消")),a.a.createElement(ke.a,{key:"submit",type:"primary",onClick:this.handleGetStampOk},Ze("notebook.applyGpu.getToken","去赚粮票"))]},a.a.createElement("p",null,Ze("notebook.newNotebook.willdeduction","延时GPU将扣除"),this.state.needStamp,Ze("notebook.newNotebook.tokens","粮票"),Ze("notebook.newNotebook.delayToken",",你的粮票不足"),this.state.needStamp,"，",Ze("notebook.newNotebook.earntoken","请先赚取粮票。"))),a.a.createElement(Ce.a,{title:a.a.createElement("p",{style:{textAlign:"center"}},Ze("notebook.submitFile.submitTitles","提交文件至比赛")),width:"580px",visible:this.state.sumitVisible,onOk:this.handleSubmitOk.bind(this),onCancel:this.handleSubmitCancel.bind(this),footer:[a.a.createElement(ke.a,{key:"back",onClick:this.handleSubmitCancel.bind(this),style:{marginRight:"10px"}},Ze("notebook.edit.cancel","取消")),a.a.createElement(ke.a,{key:"submit",type:"primary",onClick:this.handleSubmitOk.bind(this)},Ze("notebook.edit.comfirm","确定"))]},a.a.createElement("div",{className:"submit-selectContainer"},a.a.createElement("div",{className:"submit-left"},Ze("notebook.submitFile.submitContent","提交比赛至")),a.a.createElement("div",{className:"submit-right"},a.a.createElement(he.a,{value:this.state.submitraceName,onSelect:function(t){e.onSelectedRace(t)}},this.state.gameList)))),a.a.createElement(Ce.a,{visible:this.state.submitFileSuccess,title:Ze("notebook.submit.submitsuccess","提交成功"),onOk:this.submitFileDialogOk,onCancel:this.submitFileDialogCancel,footer:[a.a.createElement(ke.a,{key:"back",onClick:this.submitFileDialogOk.bind(this),style:{marginRight:"16px"}},Ze("notebook.submit.viewsubmit","查看提交")),a.a.createElement(ke.a,{key:"submit",type:"primary",onClick:this.submitFileDialogCancel.bind(this)},Ze("notebook.common.close","关闭"))]},a.a.createElement("p",null,Ze("notebook.submit.submitfilecontent","您的比赛答案已提交成功"))),a.a.createElement(Ce.a,{className:"vipNoKernelOpenGpu-model",visible:this.state.vipNoKernelOpenGpu,title:Ze("notebook.manage.prompt","温馨提示"),onCancel:this.vipNoKernelOpenGpuDialogCancel,footer:[a.a.createElement(ke.a,{key:"back",onClick:this.vipNoKernelOpenGpuDialogCancel.bind(this),style:{marginRight:"10px"}},Ze("notebook.edit.cancel","取消")),a.a.createElement(ke.a,{key:"submit",type:"primary",onClick:this.vipGpuOpenClick.bind(this)},Ze("notebook.edit.comfirm","确定"))]},a.a.createElement("p",null,Ze("notebook.vip.noKernelOpenGpu","确认打开GPU？"))),a.a.createElement(Ce.a,{className:"vipNoKernelOpenGpu-model",visible:this.state.vipOnKernelOpenGpu,title:Ze("notebook.manage.prompt","温馨提示"),onCancel:this.vipOnKernelOpenGpuDialogCancel,footer:[a.a.createElement(ke.a,{key:"back",onClick:this.vipOnKernelOpenGpuDialogCancel.bind(this),style:{marginRight:"10px"}},Ze("notebook.edit.cancel","取消")),a.a.createElement(ke.a,{key:"submit",type:"primary",onClick:this.vipGpuOpenClick.bind(this)},Ze("notebook.edit.comfirm","确定"))]},a.a.createElement("p",null,Ze("notebook.vip.onKernelOpenGpu","连接GPU将进行kernel重连，导致当前运行程序的中间结果失效，确认打开？")))))}}])&&oo(t.prototype,n),o&&oo(t,o),i}(a.a.Component);function vo(e){return(vo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ko(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Co(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function wo(e,t){return(wo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function So(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=Oo(e);if(t){var a=Oo(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return jo(this,n)}}function jo(e,t){return!t||"object"!==vo(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Oo(e){return(Oo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(1496);var Eo=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&wo(e,t)}(i,e);var t,n,o,r=So(i);function i(){return ko(this,i),r.apply(this,arguments)}return t=i,(n=[{key:"componentDidMount",value:function(){var e=document.getElementById("loading");e&&e.parentNode.removeChild(e)}},{key:"render",value:function(){return a.a.createElement("div",{className:"notebook-empty-page"},Ze("notebook.empty.message","你访问的文档不存在或没有权限"))}}])&&Co(t.prototype,n),o&&Co(t,o),i}(a.a.Component);function Io(){var e=window.location.href.split("?")[1],t={};e&&e.split("&").map((function(e){var n=e.split("=");t[n[0]]=decodeURIComponent(n[1])}));return t}function No(e){return(No="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],o=!0,a=!1,r=void 0;try{for(var i,s=e[Symbol.iterator]();!(o=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);o=!0);}catch(e){a=!0,r=e}finally{try{o||null==s.return||s.return()}finally{if(a)throw r}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return To(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return To(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function To(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function _o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Po(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Do(e,t){return(Do=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ao(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=Lo(e);if(t){var a=Lo(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return Ro(this,n)}}function Ro(e,t){return!t||"object"!==No(t)&&"function"!=typeof t?Go(e):t}function Go(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Lo(e){return(Lo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Mo,Fo=n(180)("ipythonEdit"),Bo=n(1497),Uo=n(1498),Vo=Ce.a.confirm;n(786);var Ko="";Ko=location.host.indexOf("tianchi.aliyun.com")>-1?"wss":"ws";var zo=window.CONFIG.prefix||"",Ho=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Do(e,t)}(i,e);var t,n,o,r=Ao(i);function i(){for(var e,t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return _o(this,i),(e=r.call.apply(r,[this].concat(n))).changeGPU=function(t){e.props.model.setMany({serverSetting:{baseUrl:"".concat(zo,"/proxy/kernel"),wsUrl:"".concat(Ko,"://").concat(location.host).concat(zo,"/proxy/kernel"),init:{cache:"no-store",credentials:"same-origin",headers:Object.assign({"Content-Type":"application/json"},window.ajaxHeader)}}})},e.requestAgain=function(){window.location.reload()},e._delayClick=function(){e.setState({todelay:!0}),Mo.setMany({todelay:!0,time:e.state.time})},e._changeContent=function(e){Mo.unwrap("changeContentModal")?Mo.setMany({contentUnSaved:!0,changeContentModal:!1}):Mo.setMany({contentChange:!0,contentUnSaved:!0})},e._releaseVersion=function(){var t=e.props.model.unwrap();-1!==t.raceId?t.unSaved||t.contentUnSaved?e.editor.state.notebook.context.save().then((function(t){Mo.unwrap("unSaved")||Mo.unwrap("contentUnSaved")||e._postRelease()})):e._postRelease():Ce.a.info({title:"".concat(Ze("notebook.edit.tip","提示")),okText:"".concat(Ze("notebook.edit.comfirm","确定")),content:a.a.createElement("div",null,a.a.createElement("p",null,Ze("notebook.edit.linkCompetitionFirt","请先关联比赛"))),onOk:function(){}})},e._postRelease=function(){Go(e).props.routeParams.lab;"PUBLIC"===Mo.unwrap("type")||"PUBLIC"===Mo.unwrap("types")&&"PUBLIC"!==Mo.unwrap("type")?e.props.notebook.havePrivateData({notebookId:e.state.notebookId,userId:e.props.routeParams.userId}).then((function(t){t?e.showIsReleaseModal():e._comfirmRelease()})):e._comfirmRelease()},e._comfirmRelease=function(){var t=Go(e),n=t.props.routeParams.lab,o=e.props.routeParams.userId;Vo({title:"".concat(Ze("notebook.edit.tip","提示")),content:"".concat(Ze("notebook.edit.comfirmVersion","确定发布版本？")),okText:"".concat(Ze("notebook.edit.comfirm","确定")),cancelText:"".concat(Ze("notebook.edit.cancel","取消")),onOk:function(){"PUBLIC"===Mo.unwrap("types")&&"PUBLIC"!==Mo.unwrap("type")&&$e()||t.props.notebook.releaseVersion({lab:n,userId:o,version:Io().version}).then((function(e){if(e.path){if(be.a.destroy(),be.a.success("".concat(Ze("notebook.edit.versionSuccess","版本发布成功"))),"PUBLIC"===Mo.unwrap("types")&&"PUBLIC"!==Mo.unwrap("type")){var a=Mo.unwrap("title"),r=Mo.unwrap("lang"),i=Mo.unwrap("contentChange");t.props.tianchi.saveOther({id:n,title:a,language:r,type:"PUBLIC",edit:i,userId:o}).then((function(e){e&&(Mo.set("type","PUBLIC"),/the title has sensitive information/.test(e)&&be.a.warn(Ze("notebook.edit.textscan","[标题]有敏感信息，请查看版本")))}))}t.setState({publishedVersions:t.state.publishedVersions+1}),Mo.set("publishedVersions",t.state.publishedVersions+1);var s=[];Mo.unwrap("dataList").map((function(e,t){s.push(e.datalab.id)})),t.notebookLogFun("publish",o,n,s)}})).catch((function(e){be.a.error("".concat(Ze("notebook.edit.versionFail","版本发布失败，请稍后重试")))}))},onCancel:function(){}})},e._doRelease=function(){var t=e.props.routeParams.lab,n=e.props.routeParams.userId;e.props.notebook.releaseVersion({lab:t,userId:n,version:Io().version}).then((function(o){if(o.path){if(be.a.destroy(),be.a.success("".concat(Ze("notebook.edit.versionSuccess","版本发布成功"))),"PUBLIC"===Mo.unwrap("types")&&"PUBLIC"!==Mo.unwrap("type")){var a=Mo.unwrap("title"),r=Mo.unwrap("lang"),i=Mo.unwrap("contentChange"),s=(e.props.routeParams.id,e.props.routeParams.userId);e.props.tianchi.saveOther({id:t,title:a,language:r,type:"PUBLIC",edit:i,userId:Number(s)}).then((function(e){e&&Mo.set("type","PUBLIC")}))}e.setState({publishedVersions:e.state.publishedVersions+1}),Mo.set("publishedVersions",e.state.publishedVersions+1);var l=[];Mo.unwrap("dataList").map((function(e,t){l.push(e.datalab.id)})),e.notebookLogFun("publish",n,t,l)}})).catch((function(e){be.a.error("".concat(Ze("notebook.edit.versionFail","版本发布失败，请稍后重试")))}))},e.notebookLogFun=function(t,n,o,a){e.props.notebook.notebookLog({actionCode:t,userId:n,notebookLabId:o,dataSetId:a.join(","),notebookId:e.state.notebookId}).then((function(e){}))},e.isNull=function(e){if(""==e)return!0;return new RegExp("^[ ]+$").test(e)},e.getStingLength=function(e){for(var t=0,n=e.length,o=-1,a=0;a<n;a++)t+=(o=e.charCodeAt(a))>=0&&o<=128?1:2;return t},e._saveContent=function(t){var n=e.state.kernelStatus,o=e.props.routeParams.lab,a=e.props.routeParams.id;e.setState({kernelStatus:"saving"});var r=e.props.model.unwrap();if(!r.contentUnSaved&&!r.unSaved)return Promise.resolve();var i=e.getStingLength(r.title);if(e.isNull(r.title))return be.a.destroy(),be.a.warn("".concat(Ze("notebook.edit.emptyTitle","标题不能为空！"))),e.setState({kernelStatus:n}),Promise.resolve();if(-1!==r.title.indexOf("Draft"))return be.a.destroy(),be.a.warn(Ze("notebook.edit.defaultTitle","请修改标题")),e.setState({kernelStatus:n}),Promise.resolve();if(i<10)return be.a.destroy(),be.a.warn(Ze("notebook.edit.limitTitle","标题应大于10个字符长度")),e.setState({kernelStatus:n}),Promise.resolve();if(i>120)return be.a.destroy(),be.a.warn(Ze("notebook.edit.maxTitle","标题长度不可以超过120个字符哦~")),e.setState({kernelStatus:n}),Promise.resolve();if(-1===r.raceId)return be.a.destroy(),be.a.warn(Ze("notebook.edit.competition","亲~需要关联比赛吗？若不需要可选择“无”")),e.setState({kernelStatus:n}),Promise.resolve();var s;s=r.title;var l=e.props.routeParams.userId,c=e.props.tianchi.saveOther({id:o,title:s,language:r.lang,type:r.type?r.type:"PRIVATE",edit:r.contentChange,userId:Number(l)}),u=e.props.tianchi.saveRaceId({id:o,raceId:r.raceId,userId:Number(l)});return Promise.all([c,u]).then((function(i){if("PUBLIC"!==Mo.unwrap("types")||"PUBLIC"===Mo.unwrap("type")||!$e())return i[0]&&!i[0].message&&i[1]?e.props.notebook.saveContent({lab:o,id:a,content:t==={}?r.content:t}):i[0]&&"the title has sensitive information"==i[0].message?(be.a.destroy(),be.a.warn(Ze("notebook.edit.textscan","[标题]有敏感信息，请查看版本"),5),e.setState({kernelStatus:n}),null):null==i[0]||null==i[1]?(be.a.destroy(),be.a.warn(Ze("notebook.ajax.networkErrorTitle","网络不给力，刚才的操作失败啦o(╥﹏╥)o 请稍后重试~"),5),e.setState({kernelStatus:n}),i[0]):i[0]&&"title is repeat"===i[0].message?(be.a.destroy(),be.a.warn(Ze("notebook.edit.sameTitle","标题重复")),e.setState({kernelStatus:n}),null):void 0})).then((function(t){if(t){var a=[];r.dataList.map((function(e,t){a.push(e.datalab.id)})),e.notebookLogFun("edit",l,o,a),be.a.success(Ze("notebook.edit.saveSuccess","保存成功")),e.setState({unSaved:!1,kernelStatus:n}),Mo.setMany({unSaved:!1,kernelStatus:n,contentUnSaved:!1,content:null})}return t})).catch((function(t){return e.setState({kernelStatus:n}),"Payload Too Large"===t.message?_t.a.error({message:"".concat(Ze("notebook.edit.saveFail","保存失败")),description:"".concat(Ze("notebook.edit.des","亲~输出的结果已经超过限制了哦，无法保存，请精简输出吧o(*￣︶￣*)o"))}):be.a.warn(Ze("notebook.edit.saveErr","保存失败，请稍后重试")),t}))},e._sendStatus=function(t){e.setState({kernelStatus:t})},e._sendTime=function(){e.setState({timerShow:!1,isdelay:!1})},e._startPolling=function(){},e._onChildMessage=function(t){if(Mo.setMany({kernelStatus:e.state.kernelStatus}),(t={data:t}).data&&"article"===t.data.act){e.changeGPU(t.data.msg.startTimeDown);var n=t.data.msg,o=n.startTimeDown,a=n.needStamp,r=n.gpuDelayTime,i=n.isdelay,s=n.connectCount;e.setState({isGpuOpen:o,needStamp:a,gpuDelayTime:r,isdelay:i,connectCount:s||0,restTime:0,iframe:!0}),2===s&&0!==r&&e.setState({isdelay:i}),0!==e.state.time&&e.setState({status:!0})}if(t.data&&t.data.isdelay){var l=t.data,c=l.isdelay;l.delayten;e.setState({isdelay:c,iframe:!0,restTime:1e3*parseInt(e.state.time+60*t.data.gpuDelayTime*60),connectCount:2}),Mo.set("time",1e3*parseInt(e.state.time+60*t.data.gpuDelayTime*60))}if(t.data&&"off"===t.data.act){var u=t.data.msg,d=u.isdelay,p=u.delayten,m=u.startTimeDown;e.setState({isdelay:d,delayten:p,isGpuOpen:m,restTime:0,iframe:!0}),e.changeGPU(!1)}},e._onVisibilityChange=function(){if(!document[e.hiddenProperty]){if(2===e.state.connectCount&&0!==e.state.gpuDelayTime?e.setState({restTime:60*e.state.gpuDelayTime*60*1e3,status:!1}):e.setState({restTime:0}),!e.state.kernelStatus||"dead"===e.state.kernelStatus||"inthequeue"===e.state.kernelStatus)return;e.timeStamp(e.state.isGpuOpen)}},e._getTime=function(){e.setState({sessionReady:!0,restTime:0}),e.timeStamp(e.state.isGpuOpen)},e._changeModal=function(t){e.props.notebook.getDefaultNotebook({language:t}).then((function(t){if(t){if(!t.content.metadata||!t.content.metadata.kernelspec){var n=Mo.unwrap("lang"),o="R"===n?"R":"Python 3",a="R"===n?"r":"python",r="R"===n?"ir":"python3";t.content.metadata={"anaconda-cloud":{},kernelspec:{display_name:o,language:a,name:r}}}Mo.set("content",t.content),Mo.set("changeContentModal",!0),Mo.set("contentUnSaved",!0),Mo.set("saveTitle",!1),e.editor.state.notebook.context.save().then((function(){e.editor.state.notebook.context.revert(),Mo.set("saveTitle",!0)}))}else be.a.destroy(),be.a.warn(Ze("notebook.ajax.networkErrorTitle","网络不给力，刚才的操作失败啦o(╥﹏╥)o 请稍后重试~"),5)}))},e.timeStamp=function(t){var n="".concat(zo,"/proxy/kernel/time/stamp");fetch(n,{method:"GET",headers:{}}).then((function(e){return e.json()})).then((function(n){if(n){var o="";o=e.state.isGpuOpen?60*e.state.gpuDelayTime*60*1e3:72e5,0!==e.state.restTime&&t?e.state.status||(Mo.set("time",n.data+o+e.state.restTime-(new Date).getTime()),e.setState({restTime:n.data+o+e.state.restTime-(new Date).getTime(),status:!0})):(2==e.state.connectCount&&t&&(o*=e.state.connectCount),e.setState({restTime:n.data+o-(new Date).getTime()}),Mo.set("time",n.data+o-(new Date).getTime()))}}))},e.sendMessage=function(){e.sendMessageTimer&&clearInterval(e.sendMessageTimer),e.sendMessageTimer=setInterval((function(){if(e._session){var t=e._session.kernel,n={msgType:"wsping",channel:"iopub",msgId:"x-"+(new Date).getTime()},o=C.KernelMessage.createShellMessage(n,{});t.sendShellMessage(o,!0,(function(){})),e.shoutdownSendMessage()}}),3e4)},e.shoutdownSendMessage=function(){e.time++;var t=e.state.isGpuOpen?360:240;e.time>=t&&clearInterval(e.sendMessageTimer)},e.GetQueryString=function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),n=window.location.search.substr(1).match(t);return null!=n?unescape(n[2]):null},e._kernelStatusChange=function(t,n){e.setState({kernelStatus:n}),Mo.setMany({kernelStatus:e.state.kernelStatus}),"idle"===n||"connected"===n||"busy"===n?e.setState({timerShow:!0}):"dead"===n&&e.setState({timerShow:!1})},e._onKernelReplay=function(){},e._onKernelStdin=function(){},e._sendSecond=function(t){e.setState({time:t}),e.state.isGpuOpen&&!e.state.isdelay&&(1800!==t&&900!==t||Mo.setMany({todelay:!0,holdtime:t}),t<=600&&e.setState({delayten:!0}))},e._onKernelIOPub=function(t,n){var o=-1,a="",r=e.state.content||{};var i=function(e,t){var n=xo(t.split("-")[0].split(":"),2),r=n[0],i=n[1];return"idx"===r?o=parseInt(i,10):a=i,o>=0?e.cells[o]:e.cells.reduce((function(e,t){return t.key===a?t:e}),{})}(r,n.parent_header.msg_id),s=n.header.msg_type,l=u.a.get(i,"outputs",[]);switch(Fo("got iopub message",o,n),s){case"execute_result":l.push({output_type:"execute_result",data:u.a.get(n.content,"data.text/html")||u.a.get(n.content,"data.text/plain")});break;case"stream":n.content.output_type=n.msg_type,l.push({output_type:n.msg_type,text:u.a.get(n.content,"text","").split("↵"),stream:u.a.get(n.content,"name"),name:u.a.get(n.content,"name")});break;case"display_data":l.push({output_type:"display_data",data:u.a.get(n.content,"data")});break;case"error":l.push({output_type:"stream",text:u.a.flattenDeep([].concat((n.content.traceback||[]).map((function(e){return e.trim("↵ ").split("↵").map((function(e){return Uo.decodeHtml(e)+"\n"}))})))),stream:"stderr"});break;case"clear_output":u.a.set(r.cells,"["+o+"].outputs",[]);break;case"update_display_data":break;case"status":return void("idle"===n.content.execution_state&&e.editor.activeNext(o))}Mo.setMany({unSaved:!0})},Mo=e.props.model,e.state={content:{},unSaved:!1,competitionList:[],kernelStatus:null,timeoutThreshold:2e3,latestUseTime:null,title:"",lang:"PYTHON3",path:null,raceId:-1,type:"PRIVATE",contentChange:!1,raceName:Ze("notebook.edit.linkCompetition","关联比赛"),todelay:!1,timerShow:!1,restartTimeDown:!1,isGpuOpen:!1,delayten:!1,restTime:0,time:0,status:!1,connectCount:1,gpuDelayTime:0,iframe:!1,sessionReady:!1,hasWarnConnect:!1,is500:!1,dataList:[],dataListInfo:{},publishedVersions:1,lastType:"",kernelName:"python3",isReleaseVisible:!1,versions:0,creatType:"FROMTEMPLATE",hasToc:!1,editVersion:0,notebookFileName:"edit.ipynb"},e.hiddenProperty="hidden"in document?"hidden":"webkitHidden"in document?"webkitHidden":"mozHidden"in document?"mozHidden":null,e.props.model.setMany({content:{},unSaved:!1,competitionList:[],kernelStatus:null,timeoutThreshold:2e3,latestUseTime:null,title:"",titles:"",lang:"PYTHON3",path:null,raceId:-1,type:"PRIVATE",types:"PRIVATE",contentChange:!1,raceName:Ze("notebook.edit.linkCompetition","关联比赛"),todelay:!1,timerShow:!1,restartTimeDown:!1,isGpuOpen:!1,delayten:!1,restTime:0,time:0,status:!1,connectCount:1,gpuDelayTime:0,contentUnSaved:!1,saveTitle:!0,hasWarnConnect:!1,is500:!1,dataList:[],dataListInfo:{},publishedVersions:1,lastType:"",kernelName:"python3",versions:0,creatType:"FROMTEMPLATE",hasToc:!1,editVersion:0,notebookFileName:"edit.ipynb",gpuInfo:{},gpuOpenClick:!1,gpuCloseClick:!1,applyGpuClick:!1,changeContentModal:!0,inited:!1}),e.handleIsReleaseOk=e.handleIsReleaseOk.bind(Go(e)),e.handleIsReleaseCancel=e.handleIsReleaseCancel.bind(Go(e)),be.a.config({top:120,duration:2,maxCount:3}),e}return t=i,(n=[{key:"render",value:function(){var e=this,t=this.props.routeParams.lab,n=this.state.is500;return t?a.a.createElement("div",{className:"notebook-edit-page"},n?a.a.createElement("div",{className:"notebook-empty-page"},a.a.createElement("div",{className:"requstAgain"},Ze("notebook.ajax.networkErrorTitle","网络不给力，刚才的操作失败啦o(╥﹏╥)o 请稍后重试~"),a.a.createElement("p",null,a.a.createElement(ke.a,{type:"primary",onClick:this.requestAgain},Ze("notebook.networkMessage.reload","重新加载"))))):a.a.createElement("div",{className:"editContainer",id:"editContainer"},a.a.createElement("div",{className:"editContent",id:"editContent"},a.a.createElement(On,{model:this.props.model,parentProps:this.props,onChange:this._changeContent,kernelStatus:this.state.kernelStatus,saveContent:this._saveContent,releaseVersion:this._releaseVersion,delayClick:this._delayClick,timerShow:this.state.timerShow,ref:function(t){return e.editor=t},isGpuOpen:this.state.isGpuOpen,needStamp:this.state.needStamp,gpuDelayTime:this.state.gpuDelayTime,isdelay:this.state.isdelay,delayten:this.state.delayten,restTime:this.state.restTime,sendSecond:this._sendSecond,sendStatus:this._sendStatus,getTime:this._getTime,changeModal:this._changeModal})),a.a.createElement(yo,{kernelStatus:this.state.kernelStatus,onChildMessage:this._onChildMessage,model:this.props.model,tianchi:this.props.tianchi,file:this.props.file,notebook:this.props.notebook,projectDetail:this.state.projectDetail,notebookId:this.state.notebookId,postId:this.state.postId,routeParams:this.props.routeParams,EditVersion:this.EditVersion})),a.a.createElement(Ce.a,{title:Ze("notebook.manage.prompt","温馨提示"),visible:this.state.isReleaseVisible,onOk:this.handleIsReleaseCancel,onCancel:this.handleIsReleaseOk,okText:Ze("notebook.dataset.continueRelease","继续发布"),cancelText:Ze("notebook.dataset.publicData","公开数据"),width:480,wrapClassName:"isRelease"},a.a.createElement("p",null,Ze("notebook.dataset.priDataDialogCon","由于所使用的数据集为私有权限，公开后其他用户将无法fork到该notebook的数据哦。")))):a.a.createElement(Eo,null)}},{key:"showIsReleaseModal",value:function(){this.setState({isReleaseVisible:!0})}},{key:"handleIsReleaseCancel",value:function(e){this.setState({isReleaseVisible:!1}),this._doRelease()}},{key:"handleIsReleaseOk",value:function(e){this.setState({isReleaseVisible:!1})}},{key:"_sessionStartErrHander",value:function(e,t){var n=this;if(Fo("start new session error: ",t),-1!==t.toString().indexOf("Invalid response: 423")){this.setState({kernelStatus:"inthequeue"}),e&&e.dispose(),this.kernelConnecter&&clearInterval(this.kernelConnecter);var o=this.props.routeParams.lab,a=this.state.content.metadata.kernelspec.language;this.kernelConnecter=setInterval((function(){n.connectKernel(o,a)}),3e4)}}},{key:"connectKernel",value:function(e,t,n){var o=this;if(this.state.kernelStatus&&"dead"!==this.state.kernelStatus&&"inthequeue"!==this.state.kernelStatus)return n&&n();this._sessionMng&&this._sessionMng.dispose(),e=e||this.props.routeParams.lab,t=t||(this.state.content.metadata?this.state.content.metadata.kernelspec.language:"python"),Bo.startNew({path:this.state.path,type:t,labId:e,gpu:this.state.isGpuOpen,errHandler:this._sessionStartErrHander.bind(this)}).then((function(e){o._sessionMng=e.sessionMng,o._session=e.session,o._session.statusChanged.connect(o._kernelStatusChange),o._session.iopubMessage.connect(o._onKernelIOPub),o.setState({kernelStatus:"idle",latestUseTime:(new Date).getTime(),timerShow:!0,restartTimeDown:!1}),clearInterval(o.kernelConnecter),o.sendMessage(),o.time=0,o._startPolling(),n&&n(),o.state.isGpuOpen&&Mo.setMany({restartTimeDown:!1,kernelStatus:o.state.kernelStatus})}))}},{key:"componentDidMount",value:function(){var e,t=this,n=document.getElementById("loading");n&&n.parentNode.removeChild(n),(e=document.getElementById("main"))&&(e.style.backgroundColor="#f5f5f6"),this.EditVersion=this.GetQueryString("version")||0,(e=document.getElementById("main"))&&(e.style.padding="0px"),Mo.change.map((function(e){var n=e.path,o=(e.type,e.value);/is500|kernelName|publishedVersions/.test(n)&&t.setState(function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},n.join(""),o.unwrap()))})),this.setState(Object.assign({},this.props.model.unwrap()));var o=this.hiddenProperty.replace(/hidden/i,"visibilitychange");document.addEventListener(o,this._onVisibilityChange);var a=this.props.routeParams.lab;if(Mo.setMany({serverSetting:{baseUrl:"".concat(zo,"/proxy/kernel"),wsUrl:"".concat(Ko,"://").concat(location.host).concat(zo,"/proxy/kernel"),init:{cache:"no-store",credentials:"same-origin",headers:Object.assign({"Content-Type":"application/json","X-Access-LabId":this.props.routeParams.lab},window.ajaxHeader)}},lab:a}),a){var r=this.props.tianchi.getCompetitionList({states:"1,3",isPublic:!0}),i=this.props.tianchi.getDetail({id:a,userId:this.props.routeParams.userId}).then((function(e){if(e&&e.user){var n=t.EditVersion||e.notebooks.length-1;n=n>e.notebooks.length-1?e.notebooks.length-1:n;var o=(e.notebooks[n].notebookUrl||"").replace('""',""),a=o.substring(o.lastIndexOf("/")+1)||"edit.ipynb";t.setState({projectDetail:e,postId:e.notebookLab.postId,notebookId:e.notebooks[n].id,datalabIds:e.notebooks[n].datalabIds,publishedVersions:e.notebooks.length,lastType:e.notebookLab.type,versions:n,notebookFileName:a}),Mo.set("notebookFileName",a),Mo.set("notebookId",e.notebooks[n].id)}Mo.setMany({title:e.notebookLab.title,titles:e.notebookLab.title,type:e.notebookLab.type,publishedVersions:e.notebooks.length,creatType:e.notebookLab.creatType}),t.getStingLength(e.notebookLab.title)>120&&Mo.setMany({unSaved:!0}),e.notebooks.length<=1&&"PRIVATE"!==e.notebookLab.type&&Mo.set("type","PRIVATE");var r=e.notebookLab.postId;return t.props.tianchi.getRaceId({postId:r})}));Promise.all([r,i]).then((function(e){Mo.setMany({competitionList:e[0].list,contentChange:!(!e[1]||!e[1].post.noteEdit)&&e[1].post.noteEdit,inited:!0,contentUnSaved:!1}),e[1]&&null!==e[1].raceId&&Mo.setMany({raceName:e[1].raceNameZh||e[1].raceNameEn?"en"!=window.CONFIG.language&&"en-us"!=window.CONFIG.language||!e[1].raceNameEn?e[1].raceNameZh:e[1].raceNameEn:Ze("notebook.ipython_editor.operation_bar.none","无"),raceId:e[1].raceId})})).catch((function(e){}))}}},{key:"componentWillMount",value:function(){var e=this;this.timer=setInterval((function(){var t=Mo.unwrap();t.contentUnSaved&&!t.changeContentModal&&(Mo.set("saveTitle",!1),e.editor.state.notebook.context.save().then((function(e){Mo.set("saveTitle",!0)})))}),12e4)}},{key:"componentWillUnmount",value:function(){this._session.statusChanged.disconnect(this._kernelStatusChange),this._stopPolling(),this.timer&&clearTimeout(this.timer),this.sendMessageTimer&&clearInterval(this.sendMessageTimer)}}])&&Po(t.prototype,n),o&&Po(t,o),i}(a.a.Component);function Wo(e){return(Wo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qo(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Jo(e,t){return(Jo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Yo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=Zo(e);if(t){var a=Zo(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return Xo(this,n)}}function Xo(e,t){return!t||"object"!==Wo(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Zo(e){return(Zo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var $o=n(180)("ipythonPreview");n(1499),n(786);var Qo="";Qo=location.host.indexOf("tianchi.aliyun.com")>-1?"wss":"ws";var ea=window.CONFIG.prefix||"",ta=function(){},na=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Jo(e,t)}(i,e);var t,n,o,r=Yo(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=r.call(this,e)).requestAgain=function(){window.location.reload()},t._onWindowMessage=function(e){if(location.origin!==e.origin){$o("evt",e);var t,n;(t=e.origin,n=document.createElement("a"),n.href=t,n).hostname;parent.postMessage({data:document.body.scrollHeight},e.origin)}},model=t.props.model,t.state={content:{},is500:!1},t}return t=i,(n=[{key:"render",value:function(){var e=this.props.routeParams.lab,t=this.state.is500;return e?a.a.createElement("div",{className:"notebook-preview"},t?a.a.createElement("div",{className:"notebook-empty-page"},a.a.createElement("div",{className:"requstAgain"},Ze("notebook.ajax.networkErrorTitle","网络不给力，刚才的操作失败啦o(╥﹏╥)o 请稍后重试~"),a.a.createElement("p",null,a.a.createElement(ke.a,{type:"primary",onClick:this.requestAgain},Ze("notebook.networkMessage.reload","重新加载"))))):a.a.createElement(On,Object.assign({model:model,parentProps:this.props,value:this.state.content,readOnly:!0,onChange:ta,getTime:ta,sendSecond:ta,sendStatus:ta},this.props))):a.a.createElement(Eo,null)}},{key:"componentDidMount",value:function(){var e=this,t=document.getElementById("loading");t&&t.parentNode.removeChild(t);var n=document.getElementById("main");n&&(n.style.padding="0px"),model.change.map((function(t){var n=t.path,o=(t.type,t.value);/is500/.test(n)&&e.setState(function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},n.join(""),o.unwrap()))})),window.addEventListener("message",this._onWindowMessage);var o=this.props.routeParams.lab;if(o){model.setMany({serverSetting:{baseUrl:"".concat(ea,"/proxy/kernel"),wsUrl:"".concat(Qo,"://").concat(location.host).concat(ea,"/proxy/kernel"),init:{cache:"no-store",credentials:"same-origin",headers:Object.assign({"Content-Type":"application/json"},window.ajaxHeader)}}});var a=this.props.location.query&&this.props.location.query.learn||"false",r=this.props.routeParams.id||"edit";this.props.notebook.getContent({lab:o,id:r,learn:a}).then((function(t){e.setState(t),$o("this.state",e.state),e.props.routeParams.lab})).catch((function(e){}))}}},{key:"componentDidUpdate",value:function(){this.props.model.unwrap("rootPanel").update()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("message",this._onWindowMessage)}}])&&qo(t.prototype,n),o&&qo(t,o),i}(a.a.Component),oa=window.CONFIG&&window.CONFIG.prefix||"/example";window.CONFIG?window.CONFIG.prefix=oa:window.CONFIG={prefix:oa};var aa=[{path:oa,component:y,childRoutes:[window.CONFIG.notebookCanEdit&&{path:"edit/:lab/:id/:userId",component:Ho,api:["notebook","tianchi","file"]},window.CONFIG.notebookCanEdit&&{path:"edit",component:Ho,api:["notebook","tianchi","file"]},{path:"preview/:lab/:id/:userId",component:na,api:["notebook","tianchi"]},{path:"preview",component:na,api:["notebook","tianchi"]}].filter(Boolean)}],ra=(n(49),We({displayName:"notebook",store:{},actions:{releaseVersion:{reducer:function(e,t){}},saveContent:{reducer:function(e,t){}},getContent:{reducer:function(e,t){}},getDefaultNotebook:{reducer:function(e,t){}},timeStamp:{reducer:function(e,t){}},cleanData:{reducer:function(e,t){}},listRaceByUserId:{reducer:function(e,t){}},havePrivateData:{reducer:function(e,t){}},uploadFileForNotebook:{reducer:function(e,t){}},notebookLog:{reducer:function(e,t){}}},subscriptions:{}},n(1500))),ia=n(49),sa=We({displayName:"tianchi",store:{data:{}},actions:{getCurrentUser:{reducer:{success:function(e,t){}}},getCompetitionList:{reducer:{success:function(e,t){var n=ia.get(t,"data");n.data&&(e.data=n.data)}}},getDetail:{reducer:{success:function(e,t){}}},saveType:{reducer:{success:function(e,t){}}},getRaceId:{reducer:{success:function(e,t){}}},saveOther:{reducer:{success:function(e,t){}}},saveRaceId:{reducer:{success:function(e,t){}}},getGpu:{reducer:function(e,t){}},openGpu:{reducer:function(e,t){}},vipGetGpu:{reducer:function(e,t){}},vipOpenGpu:{reducer:function(e,t){}},vipCloseGpu:{reducer:function(e,t){}},vipCheckCurrentVip:{reducer:function(e,t){}},closeGpu:{reducer:function(e,t){}},versionGetData:{reducer:function(e,t){}},relieveData:{reducer:function(e,t){}},getDataList:{reducer:function(e,t){}},relationData:{reducer:function(e,t){}},getUserInfo:{reducer:{success:function(e,t){}}}},subscriptions:{}},n(1501)),la=(n(49),We({displayName:"file",store:{},actions:{saveContent:{reducer:{success:function(e,t){}}},postFileToOss:{reducer:{success:function(e,t){}}}},subscriptions:{}},n(1502))),ca={};ra(ca),sa(ca),la(ca);var ua,da,pa=(ua=ca,Ie()(Oe.a.stream,Me({unwrap:Je},da))(ua));window.model=pa;var ma=pa;function fa(e){return(fa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ha(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ba(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function ga(e,t){return(ga=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ya(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=ka(e);if(t){var a=ka(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return va(this,n)}}function va(e,t){return!t||"object"!==fa(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ka(e){return(ka=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(180)("index.tsx");function Ca(e){var t=e.model,n=e.modelName,o=t;return n&&(t.ensure(n,{}),o=t.slice(n)),a.a.createElement(i.a,{path:e.path,render:function(t){return a.a.createElement(e.component,Object.assign({},t,{routeParams:t.match.params||{}},function(e){var t=e.api;if(Array.isArray(t)){var n={};return t.forEach((function(e){var t={};n[e]=t,u.a.forEach(ma.unwrap(["api",e]),(function(n,o){t[o]=ma.unwrap(["api",e,o])}))})),n}}(e),{model:o}),a.a.createElement(s.a,null,e.childRoutes&&e.childRoutes.map((function(t,n){var r,i,s=(r=e.path,i=t.path,r=r||"","/"!=i[0]&&(i="/"+i),"/"==r[r.length-1]&&(r=r.slice(0,-1)),r+i);return a.a.createElement(Ca,Object.assign({key:n},t,{path:s,model:o}))}))))}})}var wa=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ga(e,t)}(i,e);var t,n,o,r=ya(i);function i(){return ha(this,i),r.apply(this,arguments)}return t=i,(n=[{key:"render",value:function(){return a.a.createElement(l.a,null,a.a.createElement(s.a,null,aa.map((function(e,t){return a.a.createElement(Ca,Object.assign({key:t},e,{model:ma}))}))))}}])&&ba(t.prototype,n),o&&ba(t,o),i}(a.a.Component);Object(r.render)(a.a.createElement(wa,null),document.getElementById("main")),window.addEventListener("click",(function(e){try{e.target.classList.contains("buttonLink")&&e.preventDefault()}catch(e){}}),!0),window.addEventListener("click",(function(e){e.target instanceof HTMLElement&&"#"===e.target.getAttribute("href")&&e.preventDefault()}),!0)},580:function(e,t){},786:function(e,t,n){},804:function(e){e.exports=JSON.parse('["3dm","3ds","3g2","3gp","7z","a","aac","adp","ai","aif","aiff","alz","ape","apk","ar","arj","asf","au","avi","bak","baml","bh","bin","bk","btif","bz2","bzip2","cab","caf","cgm","class","cmx","cpio","cr2","cur","dat","dcm","deb","dex","djvu","dll","dmg","dng","doc","docm","docx","dot","dotm","dra","DS_Store","dsk","dts","dtshd","dvb","dwg","dxf","ecelp4800","ecelp7470","ecelp9600","egg","eol","eot","epub","exe","f4v","fbs","fh","fla","flac","fli","flv","fpx","fst","fvt","g3","gh","graffle","gz","gzip","h261","h263","h264","icns","ico","ief","img","ipa","iso","jar","jpgv","jpm","jxr","key","ktx","lha","lib","lvp","lz","lzh","lzma","lzo","m3u","m4a","m4v","mar","mdi","mht","mid","midi","mj2","mka","mkv","mmr","mng","mobi","mov","movie","mp3","mp4","mp4a","mpeg","mpg","mpga","mxu","nef","npx","numbers","o","oga","ogg","ogv","otf","pages","pbm","pcx","pdb","pdf","pea","pgm","pnm","pot","potm","potx","ppa","ppam","ppm","pps","ppsm","ppsx","ppt","pptm","pptx","psd","pya","pyc","pyo","pyv","qt","rar","ras","raw","resources","rgb","rip","rlc","rmf","rmvb","rtf","rz","s3m","s7z","scpt","sgi","shar","sil","sketch","slk","smv","so","stl","sub","swf","tar","tbz","tbz2","tga","tgz","thmx","tif","tiff","tlz","ttc","ttf","txz","udf","uvh","uvi","uvm","uvp","uvs","uvu","viv","vob","war","wav","wax","wbmp","wdp","weba","webm","webp","whl","wim","wm","wma","wmv","wmx","woff","woff2","wrm","wvx","xbm","xif","xla","xlam","xls","xlsb","xlsm","xlsx","xlt","xltm","xltx","xm","xmind","xpi","xpm","xwd","xz","z","zip","zipx"]')},832:function(e,t,n){}});